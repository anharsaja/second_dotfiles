(()=>{var e={4241:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new R(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",y="executing",E="completed",A={};function v(){}function m(){}function T(){}var b={};c(b,a,(function(){return this}));var S=Object.getPrototypeOf,_=S&&S(S(N([])));_&&_!==n&&r.call(_,a)&&(b=_);var g=T.prototype=v.prototype=Object.create(b);function p(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,a,s){var u=d(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(e,t,n){var r=f;return function(i,o){if(r===y)throw new Error("Generator is already running");if(r===E){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===A)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=E,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=y;var u=d(e,t,n);if("normal"===u.type){if(r=n.done?E:h,u.arg===A)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=E,n.method="throw",n.arg=u.arg)}}}function O(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),A;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,A;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,A):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return m.prototype=T,i(g,"constructor",{value:T,configurable:!0}),i(T,"constructor",{value:m,configurable:!0}),m.displayName=c(T,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,c(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},p(C.prototype),c(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new C(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},p(g),c(g,u,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=N,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,A):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),A}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},2621:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"CONFIG_PANELOS_VERSION",get:function(){return"2.0.17"}},{key:"CONFIG_PINSTANCE_ID",get:function(){return 1}},{key:"CONFIG_PARTNER_ID",get:function(){return 5}},{key:"CONFIG_DISTRIBUTOR_ID",get:function(){return 5}},{key:"CONFIG_UTILITY_HOST",get:function(){return"https://authentication.urban-vpn.com"}},{key:"CONFIG_PANELBACKEND_ENDPOINT",get:function(){return"https://analytics-toolbar.urban-vpn.com"}},{key:"CONFIG_PANELBACKEND_ENDPOINT_ULR_OUTTICKET",get:function(){return"/tickets"}},{key:"CONFIG_PANELBACKEND_ENDPOINT_ULR_INSTALL_EVENT",get:function(){return"/install"}},{key:"CONFIG_PANELBACKEND_ENDPOINT_ULR_CONFIGURATION",get:function(){return"/configuration?pv=".concat(this.CONFIG_PANELOS_VERSION)}},{key:"CONFIG_GLOBAL_ACTIVE_STATUS",get:function(){return!1}},{key:"CONFIG_USE_COMPRESSION",get:function(){return!0}},{key:"CONFIG_MARK_AD_CANDIDATES",get:function(){return!1}},{key:"CONFIG_MARK_PROCESSED_AD_CANDIDATES",get:function(){return!1}},{key:"CONFIG_ADBLOCKER_AVAILABLE",get:function(){return!0}},{key:"CONFIG_TARGET_URL_BY_CLICK_AVAILABLE",get:function(){return!0}},{key:"CONFIG_ANALYTIC_INSTALL_EVENTS_TRACING_AVAILABLE",get:function(){return!0}},{key:"CONFIG_ADBLOCK_INSPECTOR_AVAILABLE",get:function(){return!0}},{key:"CONFIG_DATA_COLLECTION_ENABLED",get:function(){return!1}},{key:"CONFIG_PANALYTICS_UTILITY_LOGGING",get:function(){return!1}}],(t=null)&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();e.exports=i},5173:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(5837),s=n(1453),u=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.init=!1,this.InspectorConfig=null,this.hasActiveAdblock=!1},(t=[{key:"Init",value:function(e){return this.InspectorConfig=e,!this.init&&this.InspectorConfig&&this.InspectorConfig.active&&(this.init=!0,setTimeout(this.CheckForActiveAdblocker.bind(this),1e3*this.GetAgentActivationTimeout())),this.init}},{key:"CheckForActiveAdblocker",value:function(){document.readyState===s.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.CheckAdblockerActivityStatus.bind(this)):document.readyState!==s.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==s.DOCUMENT_READYSTATE_COMPLETE||this.CheckAdblockerActivityStatus()}},{key:"CheckAdblockerActivityStatus",value:function(){for(var e=this,t=this.CreateDumpAdElements(),n=t.length,r=0,i=function(){n-=1;var i=setTimeout((function(){e.CheckAndRemoveTestAd(t[r]),r+=1,i&&clearTimeout(i)}),1e3*e.GetAdblockerAdRemovingTimeout())};0!==n||this.hasActiveAdblock;)i()}},{key:"IsElementHidden",value:function(e){return!!e&&0===e.offsetHeight}},{key:"CreateDumpAdElements",value:function(){var e=this,t=this.GetAdblockerDetectingSrcPatterns();return t&&t.length||(t=[""]),t.map((function(t){var n=document.createElement("iframe");return n.innerHTML="&nbsp;",n.className=e.GetAdblockerDetectionClassName(),n.style.position="absolute",n.style.visibility="hidden",n.style.zIndex="-9999",t&&(n.src=t),document.body.appendChild(n),n}))}},{key:"CheckAndRemoveTestAd",value:function(e){var t={};t.hasActiveAdblock=this.IsElementHidden(e),e.remove(),a.SendAdBlockInspectorAgentReport(this.id,t,null)}},{key:"GetAdblockerDetectionClassName",value:function(){return this.init&&this.InspectorConfig&&this.InspectorConfig.detectionClassName}},{key:"GetAdblockerDetectingSrcPatterns",value:function(){return this.init&&this.InspectorConfig&&this.InspectorConfig.detectionSrcPatterns}},{key:"GetAgentActivationTimeout",value:function(){return this.init&&this.InspectorConfig&&this.InspectorConfig.agentActivationTimeoutSec}},{key:"GetAdblockerAdRemovingTimeout",value:function(){return this.init&&this.InspectorConfig&&this.InspectorConfig.adRemovingTimeoutSec}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=u},1171:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2621),s=n(1453),u=n(2315),c=n(5837),l=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.IOManager=n,this.init=!1,this.tabId=null,this.status=u.GetDefaultAdblockerStatus(),this.excludeList={domains:[],pages:[]},this.IOManager&&(this.IOManager.onAdBlockerStatusChanged=this.onAdBlockerStatusChanged.bind(this))},(t=[{key:"GetStatus",value:function(){return this.status}},{key:"Init",value:function(e,t,n){return!this.init&&a.CONFIG_ADBLOCKER_AVAILABLE&&(this.tabId=n,this.status=e,this.excludeList=t,this.init=!0),this.init}},{key:"onAdBlockerStatusChanged",value:function(e){this.status=e}},{key:"SetHiddenAmount",value:function(e){e>0&&c.SendHiddenAdCandidatesAmount(this.id,e)}},{key:"IsEnabled",value:function(){return this.init&&a.CONFIG_ADBLOCKER_AVAILABLE&&this.status[s.ADBLOCKER_FOR_DISPLAY]===s.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsEnabledForFacebook",value:function(){return this.init&&a.CONFIG_ADBLOCKER_AVAILABLE&&this.status[s.ADBLOCKER_FOR_FACEBOOK]===s.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsEnabledForTwitter",value:function(){return this.init&&a.CONFIG_ADBLOCKER_AVAILABLE&&this.status[s.ADBLOCKER_FOR_TWITTER]===s.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsEnabledForReddit",value:function(){return this.init&&a.CONFIG_ADBLOCKER_AVAILABLE&&this.status[s.ADBLOCKER_FOR_REDDIT]===s.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsEnabledForPinterest",value:function(){return this.init&&a.CONFIG_ADBLOCKER_AVAILABLE&&this.status[s.ADBLOCKER_FOR_PINTEREST]===s.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsEnabledForInstagram",value:function(){return this.init&&a.CONFIG_ADBLOCKER_AVAILABLE&&this.status[s.ADBLOCKER_FOR_INSTAGRAM]===s.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsEnabledForLinkedin",value:function(){return this.init&&a.CONFIG_ADBLOCKER_AVAILABLE&&this.status[s.ADBLOCKER_FOR_LINKEDIN]===s.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}},{key:"IsConfigUseLocal",value:function(){return this.init&&this.status[s.USE_LOCAL_CONFIG]===s.ADBLOCKER_STATUS_ENABLED}},{key:"GetCurrentDomain",value:function(){return window.location.origin}},{key:"GetCurrentPageUrl",value:function(){return window.location.href}},{key:"IsExcluded",value:function(){return this.IsExcludedByDomainRule()||this.IsExcludedByPageRule()}},{key:"IsNotExcluded",value:function(){return!this.IsExcluded()}},{key:"IsExcludedByDomainRule",value:function(){return-1!==this.excludeList.domains.indexOf(this.GetCurrentDomain())}},{key:"IsExcludedByPageRule",value:function(){return-1!==this.excludeList.pages.indexOf(this.GetCurrentPageUrl())}},{key:"IsElementHidden",value:function(e){return"hidden"===e.getAttribute(s.ATTRIBUTE_BIS_HIDE_STATUS)}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=l},7769:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,n){return t=u(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var l=n(1645),d=n(8076),f=n(2315),h=n(1453),y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=a(this,t)).id=e,n.active=!1,n.candidates=[],n.hiddenAmount=0,n.pageUrl="",n.ticketId="",n.onPageRefreshed=null,n.isActive=!1,n.available=!1,n.elementId=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,r=[{key:"getGlobalContainer",value:function(){}},{key:"sendAdCandidatesToBackground",value:function(){}},{key:"getUniqueContentId",value:function(){}},{key:"CandidatesCount",get:function(){return this.candidates.length}},{key:"Candidates",get:function(){return this.candidates}},{key:"HiddenAmount",get:function(){return this.hiddenAmount}},{key:"PageUrl",get:function(){return this.pageUrl}},{key:"TicketId",get:function(){return this.ticketId}},{key:"IsActive",get:function(){return this.active}},{key:"Activated",value:function(){this.active=!0}},{key:"CandidateHidden",value:function(){this.hiddenAmount=this.hiddenAmount+1}},{key:"ClearHiddenCounter",value:function(){this.hiddenAmount=0}},{key:"ClearCandidates",value:function(){this.candidates=[]}},{key:"AddCandidate",value:function(e){this.candidates.push(e)}},{key:"PageRefreshed",value:function(e,t){this.pageUrl=e,this.ticketId=t,this.onPageRefreshed&&this.onPageRefreshed(e,t)}},{key:"getSponsorTwitterScreenName",value:function(e){var t=this.getSponsorPageRelativeUrl(e),n=t.lastIndexOf("/")+1;return t.substring(n)}},{key:"getSponsorRedditScreenName",value:function(e){var t=this.getSponsorScreenNameReddit(e);return t?t.replace(/^.*\/user\//gi,"").replace(/\/.*/gi,""):""}},{key:"getSponsorPageRelativeUrl",value:function(e){var t="",n=e.querySelectorAll("a");if(n.length){t=n[0].getAttribute("href");var r=n[0].getBoundingClientRect().x;n.forEach((function(e){e.getBoundingClientRect().x<r&&(t=e.getAttribute("href"),r=e.getBoundingClientRect().x)}))}return t}},{key:"getSponsorScreenNameReddit",value:function(e){for(var t,n=0,r=Array.from(e.querySelectorAll("a[href]"));n<r.length;n++){var i=r[n],o=new RegExp(/^\/user\/.*/),a=i.getAttribute("href");if(a&&o.test(a)){t=a.replace(/\/user\//,"").replace(/\/.*/,"");break}}return t}},{key:"Context",get:function(){return this}},{key:"getAdTwitterObject",value:function(e,t,n){var r=f.SetFullSizeToElement(e),i=f.GetCookie("ct0");return{content:l.encode(e.outerHTML),screenName:this.getSponsorTwitterScreenName(e),stylesByElementBisId:n?{}:this.getStylesByElementsBisId(e),adPlacementType:t,size:r,userDataByScreenName:"",token:i}}},{key:"getAdRedditObject",value:function(e,t,n,r){var i=f.SetFullSizeToElement(e);return{content:l.encode(t.outerHTML),screenName:this.getSponsorRedditScreenName(t),adPlacementType:r,targetUrl:n,size:i}}},{key:"getAdLinkedinObject",value:function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=f.SetFullSizeToElement(e);return{content:l.encode(t.outerHTML),socialAdvertiserUrl:i,advertiserName:o,advertiserUrl:"",adPlacementType:n,targetUrl:r,size:s,cookie:f.GetAllCookies(),uniqueDataId:a}}},{key:"getAdPinterestObject",value:function(e,t,n,r,i,o,a){var s=f.SetFullSizeToElement(e),u=this.getUniqueContentId(t);return{content:l.encode(t.outerHTML),screenName:n,adPlacementType:a,targetUrl:r,size:s,adText:i,advertiserUrl:o,uniqueContentId:u}}},{key:"getAdInstagramObject",value:function(e,t,n,r,i,o){var a=f.SetFullSizeToElement(e);return{content:l.encode(t.outerHTML),screenName:n,adPlacementType:o,targetUrl:r,size:a,aboutPageUrl:i}}},{key:"setSizesAndIdForAllElements",value:function(e){var t=this;if(e&&e.setAttribute){var n=this.getElementId();e.setAttribute(h.ATTRIBUTE_BIS_ELEMENT_ID,n),e.querySelectorAll("*").forEach((function(e){var n=t.getElementId();e.setAttribute&&(e.setAttribute(h.ATTRIBUTE_BIS_ELEMENT_ID,n),f.SetFullSizeToElement(e))}))}}},{key:"isEmpty",value:function(e){return void 0===e||0===e.length}},{key:"getElementId",value:function(){return this.elementId++}},{key:"setActive",set:function(e){"boolean"==typeof e&&(this.isActive=e)}},{key:"setAvailable",set:function(e){"boolean"==typeof e&&(this.available=e)}},{key:"HideElement",value:function(e){e&&e.style&&(e.style.cssText+=h.STYLES_HIDE_ELEMENT,e.setAttribute(h.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"),this.CandidateHidden())}},{key:"HideElementForInstagramFeedOnly",value:function(e){e&&e.style&&(e.firstElementChild.style.cssText+=h.STYLES_HIDE_INSTAGRAM_FEED_AD[0],e.style.cssText+=h.STYLES_HIDE_INSTAGRAM_FEED_AD[1],e.setAttribute(h.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"),this.CandidateHidden())}},{key:"UnhideElement",value:function(e){if(e&&e.style){var t=e.style.cssText;t.includes(h.STYLES_HIDE_ELEMENT)&&(t=t.replace(h.STYLES_HIDE_ELEMENT,""),e.style.cssText=t)}}},{key:"removeCloneElement",value:function(e){e.remove()}},{key:"isCarousel",value:function(e){var t=e.querySelector("ul");return!!t&&t.offsetHeight>40}},{key:"isVideo",value:function(e,t){return!(!e||!e.querySelectorAll(t).length)}},{key:"doesElementExists",value:function(e){if(!e)return!1;var t=e.outerHTML;return document.querySelector("html").outerHTML.includes(t)}}],r&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(d);e.exports=y},9640:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(1453),s=n(2315),u=n(5784),c=n(781),l=n(2727),d=n(7782),f=n(4140),h=n(7602),y=n(1072),E=n(8102),A=n(3970),v=n(5172),m=function(){return e=function e(t,n,r,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.Config=n,this.AdBlockerAgent=i,this.IOManager=r,this.PageUrl=document.location.href,this.FacebookAds=null,this.TwitterAds=null,this.RedditAds=null,this.SkinAds=null,this.HTML5Ads=null,this.VideoAds=null,this.PinterestAds=null,this.InstagramAds=null,this.LinkedinAds=null,this.IsBlacklistedPublisher=s.IsPublisherInBlacklist(this.PageUrl,this.Config.BlacklistPublishers),!this.IsBlacklistedPublisher)switch(!0){case s.IsFacebookUrl(this.PageUrl):this.FacebookAds=new f(this.id,this.Config,this.AdBlockerAgent);break;case s.IsTwitterUrl(this.PageUrl):this.TwitterAds=new h(this.id,this.Config,this.AdBlockerAgent);break;case s.IsRedditUrl(this.PageUrl):this.RedditAds=new y(this.id,this.Config,this.AdBlockerAgent);break;case s.IsTiktokUrl(this.PageUrl):this.VideoAds=new d(this.id,this.Config,this.IOManager);break;case s.IsPinterestUrl(this.PageUrl):this.PinterestAds=new E(this.id,this.Config,this.AdBlockerAgent);break;case s.IsInstagramUrl(this.PageUrl):this.InstagramAds=new A(this.id,this.Config,this.AdBlockerAgent);break;case s.IsLinkedinUrl(this.PageUrl):this.LinkedinAds=new v(this.id,this.Config,this.AdBlockerAgent);break;default:this.SkinAds=new u(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.BannerAds=new c(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.HTML5Ads=new l(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.VideoAds=new d(this.id,this.Config,this.IOManager)}},(t=[{key:"ActivateAdsdetectors",value:function(){this.IsBlacklistedPublisher||(document.readyState===a.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.StartAdsdetectors.bind(this)):document.readyState!==a.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==a.DOCUMENT_READYSTATE_COMPLETE||this.StartAdsdetectors())}},{key:"StartAdsdetectors",value:function(){this.SkinAds&&this.SkinAds.ActivateDetector(a.ACTIVATION_BY_ADS_MANAGER),this.BannerAds&&this.BannerAds.ActivateDetector(a.ACTIVATION_BY_ADS_MANAGER),this.HTML5Ads&&this.HTML5Ads.ActivateDetector(a.ACTIVATION_BY_ADS_MANAGER),this.VideoAds&&this.VideoAds.ActivateDetector(a.ACTIVATION_BY_ADS_MANAGER),this.FacebookAds&&this.FacebookAds.ActivateDetector(a.ACTIVATION_BY_ADS_MANAGER),this.TwitterAds&&this.TwitterAds.ActivateDetector(a.ACTIVATION_BY_ADS_MANAGER),this.RedditAds&&this.RedditAds.ActivateDetector(a.ACTIVATION_BY_ADS_MANAGER),this.PinterestAds&&this.PinterestAds.ActivateDetector(a.ACTIVATION_BY_ADS_MANAGER),this.InstagramAds&&this.InstagramAds.ActivateDetector(a.ACTIVATION_BY_ADS_MANAGER),this.LinkedinAds&&this.LinkedinAds.ActivateDetector(a.ACTIVATION_BY_ADS_MANAGER)}},{key:"PageRefreshed",value:function(e,t){this.SkinAds&&this.SkinAds.PageRefreshed(e,t),this.BannerAds&&this.BannerAds.PageRefreshed(e,t),this.HTML5Ads&&this.HTML5Ads.PageRefreshed(e,t),this.VideoAds&&this.VideoAds.PageRefreshed(e,t),this.FacebookAds&&this.FacebookAds.PageRefreshed(e,t),this.TwitterAds&&this.TwitterAds.PageRefreshed(e,t),this.RedditAds&&this.RedditAds.PageRefreshed(e,t),this.PinterestAds&&this.PinterestAds.PageRefreshed(e,t),this.InstagramAds&&this.InstagramAds.PageRefreshed(e,t),this.LinkedinAds&&this.LinkedinAds.PageRefreshed(e,t)}},{key:"GetHtml5CandidatesPrebuildInfo",value:function(){return this.HTML5Ads&&this.HTML5Ads.IsActive?this.HTML5Ads.GetPrebuildInfo():[]}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=m},3213:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(5883),s=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.onGotWindowMessageCallback=n,this.mesToFrameDeactivationIntervalId=null},(t=[{key:"SetId",value:function(e){this.id=e}},{key:"ActivateMesToFrameContentListener",value:function(e){this.mesToFrameDeactivationIntervalId||(this.mesToFrameDeactivationIntervalId=setInterval(this.CheckMesToFrameContent.bind(this),300),setTimeout(this.DeactivateMesToFrameContentListener.bind(this),3e3))}},{key:"CheckMesToFrameContent",value:function(){try{var e=document.body.getAttribute("bis_mes_to_fr");if(e&&e){var t=JSON.parse(e);document.body.setAttribute("bis_mes_to_fr",""),a.IsValid(t)&&this.onGotWindowMessageCallback&&this.onGotWindowMessageCallback(t),this.DeactivateMesToFrameContentListener()}}catch(e){}}},{key:"DeactivateMesToFrameContentListener",value:function(){this.mesToFrameDeactivationIntervalId&&(clearInterval(this.mesToFrameDeactivationIntervalId),this.mesToFrameDeactivationIntervalId=null)}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=s},781:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,n){return t=u(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var l=n(2621),d=n(2315),f=n(1645),h=n(7769),y=n(5837),E=n(1453),A=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=a(this,t,[e])).Config=n,o.bannerAdsConfig=o.Config.BannerAdsConfig,o.IOManager=r,o.IOManager.onGotBannerCandidatesExtractionStatusesCallback=o.onGoBannerCandidatesExtractionStatuses.bind(o),o.AdBlockerAgent=i,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,(r=[{key:"ActivateDetector",value:function(){var e=this;this.DetectCandidates(),setTimeout((function(){e.DetectCandidates()}),350),setInterval((function(){e.DetectCandidates()}),700)}},{key:"PushCandidate",value:function(e,t){var n={bisId:t,content:f.encode(e)};this.AddCandidate(n)}},{key:"IsValidCandidateSize",value:function(e){return!!(e&&e.width>70&&e.height>40&&e.height<1100)}},{key:"HideCandidate",value:function(e){e&&this.AdBlockerAgent.IsEnabled()&&(this.CandidateHidden(),this.HideElement(e))}},{key:"SetBorderToCandidate",value:function(e){e&&l.CONFIG_MARK_AD_CANDIDATES&&!this.AdBlockerAgent.IsEnabled()&&(l.CONFIG_MARK_PROCESSED_AD_CANDIDATES?e.style.cssText+=E.STYLES_BORDER_BANNER_URL_EXTRACTED:e.style.cssText+="border: 6px solid red !important;")}},{key:"SendCandidatesToBackground",value:function(){this.Candidates.length&&(this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount),y.SendAdCandidates(this.id,this.Candidates,E.MESSAGE_TYPE_CANDIDATES_DATA_BANNERS,null))}},{key:"DetectCandidates",value:function(){this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter(),this.ClearCandidates();for(var e=d.QuerySelectorAll(document,this.bannerAdsConfig.QUERIES.FULL_IMG_COLLECTION),t=0;t<e.length;t++){var n=e[t];if(n){var r=n.src.toLowerCase(),i=this.getTagWithHref(n);if(i){var o=i.href.toLowerCase(),a=!1;if((!this.filterNonAdBanner(n)||this.isRedirectInHref(i))&&(d.IsInFilterList(this.Config.BlacklistBannerHref,o)||d.IsInFilterList(this.Config.BlacklistBannerImgSrc,r)||n.hasAttribute("bis_skin_element")||(d.isValidUrl(r)&&d.isValidUrl(o)||d.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,r)||d.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,o))&&(a=!0),a)){var s=n.getBoundingClientRect();if(this.IsValidCandidateSize(s)){this.SetBorderToCandidate(n),d.SetFullSizeToElement(n),d.SetFullSizeToElement(i);var u=d.GenerateAndSetBisIdToBanner(n);this.PushCandidate(i.outerHTML,u),this.HideCandidate(n)}}}}}for(var c=d.QuerySelectorAll(document,this.bannerAdsConfig.QUERIES.ON_EVENT_IMG_COLLECTION),l=0;l<c.length;l++){var f=c[l],h=f.src.toLowerCase();if(!d.IsInFilterList(this.Config.BlacklistBannerImgSrc,h)&&(d.isValidUrl(h)&&!d.IsUrlFromHost(document.location.host,h)||d.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,h))){var y=f.getBoundingClientRect();if(this.IsValidCandidateSize(y)){this.SetBorderToCandidate(f),d.SetFullSizeToElement(f);var E=d.GenerateAndSetBisIdToBanner(f);this.PushCandidate(f.outerHTML,E),this.HideCandidate(f)}}}this.SendCandidatesToBackground()}},{key:"filterNonAdBanner",value:function(e){var t=window.location.host||"__NULL__",n=e.src.toLowerCase(),r=n.match(/\/\/(www\.)?[A-Za-z0-9.]+/),i=this.getTagWithHref(e),o=i?i.href.match(/\/\/(www\.)?[A-Za-z0-9.]+/):"",a=document.querySelector("head").outerHTML,s=d.IsUrlFromHost(t,i.href);return o=o?o[0].replace("//",""):"",r=r?r[0].replace("//",""):"__NULL__",t=0===t.indexOf("www")?t.replace("www.",""):t,s||a.includes(o)||n.includes(t)&&s||-1!==n.search(/^data/)}},{key:"isRedirectInHref",value:function(e){var t=e.href;return!!t&&t.search(/=https?/)>0}},{key:"onGoBannerCandidatesExtractionStatuses",value:function(e){if(l.CONFIG_MARK_AD_CANDIDATES&&l.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&e&&e.length&&!this.AdBlockerAgent.IsEnabled())for(var t=0;t<e.length;t++){var n=d.QuerySelector(document,'*[bis_id="'.concat(e[t].bannerId,'"]'));n&&d.UpdateCandidateStatusBorderColor(n,e[t].extractionStatus)}}},{key:"getTagWithHref",value:function(e){for(var t=e.parentElement,n=0;n<5&&"A"!==t.tagName;n++)t=t.parentElement;return"A"!==t.tagName&&(t=null),t}}])&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(h);e.exports=A},7814:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n(1453);var a=n(1645),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.configEncoded=n,this.config=JSON.parse(a.decode(n)),this.SaveToStorageConfig(this.id,this.config)}return t=e,r=[{key:"CheckBisDataExist",get:function(){try{return!!sessionStorage.getItem("bis_data")}catch(e){return null}}}],(n=[{key:"GetConfigEncoded",value:function(){return this.configEncoded}},{key:"BlacklistPublishers",get:function(){return this.config.filterLists.blacklistPublishers}},{key:"BlacklistBannerImgSrc",get:function(){return this.config.filterLists.blacklistBannerImgSrc}},{key:"BlacklistBannerHref",get:function(){return this.config.filterLists.blacklistBannerHref}},{key:"BlacklistIframeSrc",get:function(){return this.config.filterLists.blacklistIframeSrc}},{key:"BlacklistIframeId",get:function(){return this.config.filterLists.blacklistIframeId}},{key:"WhitelistCandidatesUrlKeyWords",get:function(){return this.config.filterLists.whitelistCandidatesUrlKeyWords}},{key:"WhitelistRedirectionCode",get:function(){return this.config.filterLists.whitelistRedirectionCode}},{key:"GetVideoValidatorsForHTML",value:function(){return this.config.videoValidatorsForHTML}},{key:"GetVideoValidatorsForJS",value:function(){return this.config.videoValidatorsForJS}},{key:"GetVideoValidatorsForXHR",value:function(){return this.config.videoValidatorsForXHR}},{key:"FacebookConfig",get:function(){return this.config.facebookConfig}},{key:"TwitterConfig",get:function(){return this.config.twitterConfig}},{key:"RedditConfig",get:function(){return this.config.redditConfig}},{key:"PinterestConfig",get:function(){return this.config.pinterestConfig}},{key:"LinkedinConfig",get:function(){return this.config.linkedinConfig}},{key:"GetInstagramConfig",get:function(){return this.config.instagramConfig}},{key:"GetAdBlockInspectorConfig",value:function(){return this.config.adBlockInspectorConfig}},{key:"BannerAdsConfig",get:function(){return this.config.bannerAdsConfig}},{key:"Html5AdsConfig",get:function(){return this.config.HTML5AdsConfig}},{key:"BlacklistTargetUrl",get:function(){return this.config.filterLists.blacklistTargetUrl}},{key:"BlacklistKeyWordsInContent",get:function(){return this.config.filterLists.blacklistKeyWordsInContent}},{key:"GetHtml5TargetUrlDetectionConfig",value:function(){return this.config.html5TargetUrlDetectionConfig}},{key:"SaveToStorageConfig",value:function(t,n){var r=JSON.stringify({id:t,config:n}),i=e.CheckBisDataExist;i&&sessionStorage.removeItem("bis_data"),null!==i&&sessionStorage.setItem("bis_data",r)}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();e.exports=s},5837:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(1453),s=n(5883),u=n(2315),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.init=!1,this.onGotHTML5CandidatesExtractionStatusesCallback=null,this.onGotSkinAdCandidatesExtractionStatusesCallback=null,this.onGotBannerCandidatesExtractionStatusesCallback=null,this.onGotVideoXHRTrafficCallback=null,this.onAdBlockerStatusChanged=null,this.onTabUrlChanged=null,this.twitterVideoInfoCandidates=[],this.twitterAdCandidate=[]}return t=e,r=[{key:"SendHiddenAdCandidatesAmount",value:function(e,t){var n=s.EmptyMessage;n.type=a.MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT,n.from=e,n.to="bg",n.content=t,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}},{key:"SendInitMes",value:function(e,t){var n=s.EmptyMessage;n.type=a.MESSAGE_TYPE_TAB_INITIALIZATION,n.to="bg",n.content=e,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).then((function(e){e&&e.config&&t&&t(e.config)})).catch((function(e){}))}},{key:"SendSinglePageReinitMes",value:function(e){var t=s.EmptyMessage;t.type=a.MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION,t.to="bg",t.content=e,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(t).catch((function(e){}))}},{key:"SendNewPageCreatedTicket",value:function(e){var t=s.EmptyMessage;t.type=a.MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET,t.to="bg",t.content=e,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(t).catch((function(e){}))}},{key:"SendPanelRegulatorResult",value:function(e){var t=s.EmptyMessage;t.type=a.MESSAGE_TYPE_PANEL_REGULATOR_RESULT,t.to="bg",t.content=e,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(t).catch((function(e){}))}},{key:"SendMesToBackground",value:function(e,t,n,r){var i=s.EmptyMessage;i.type=t,i.from=e,i.to="bg",i.content=n,u.IsOnChromeRuntime()&&(r?chrome.runtime.sendMessage(i).then(r).catch((function(e){})):chrome.runtime.sendMessage(i).catch((function(e){})))}},{key:"SendAdCandidates",value:function(t,n,r,i){e.SendMesToBackground(t,r,n,i)}},{key:"SendCandidatePlacementsCount",value:function(t,n,r,i){e.SendMesToBackground(t,r,n,i)}},{key:"SendHtml5CandidatePlacements",value:function(t,n,r){e.SendMesToBackground(t,a.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5,n,r)}},{key:"SendAdBlockInspectorAgentReport",value:function(t,n){e.SendMesToBackground(t,a.MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT,n,null)}},{key:"SendTWVideoData",value:function(t,n){e.SendMesToBackground(t,a.MESSAGE_TYPE_TWITTER_VIDEO_DATA,n,null)}},{key:"SendTWCarouselData",value:function(t,n){e.SendMesToBackground(t,a.MESSAGE_TYPE_TWITTER_CAROUSEL_DATA,n,null)}},{key:"SendRedditVideoData",value:function(t,n){e.SendMesToBackground(t,a.MESSAGE_TYPE_REDDIT_VIDEO_DATA,n,null)}},{key:"SendRedditRightColumnData",value:function(t,n){e.SendMesToBackground(t,a.MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA,n,null)}},{key:"SendVideoHar",value:function(e,t){var n=s.EmptyMessage;n.type=a.MESSAGE_TYPE_VIDEO_HAR,n.from=e,n.to="bg",n.content=t,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}},{key:"SendFBVideoData",value:function(e,t){var n=s.EmptyMessage;n.type=a.MESSAGE_TYPE_FACEBOOK_VIDEO_DATA,n.from=e,n.to="bg",n.content=t,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n)}},{key:"SendPinterestVideoData",value:function(e,t){var n=s.EmptyMessage;n.type=a.MESSAGE_TYPE_PINTEREST_VIDEO_DATA,n.from=e,n.to="bg",n.content=t,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}},{key:"SendInstagramDataToBgStorage",value:function(e,t,n){var r=s.EmptyMessage;r.type=n,r.from=e,r.to="bg",r.content=t,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(r).catch((function(e){}))}},{key:"SendLinkedinDataToBgStorage",value:function(e,t,n){var r=s.EmptyMessage;r.type=n,r.from=e,r.to="bg",r.content=t,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(r).catch((function(e){}))}},{key:"SendInstagramFullTextData",value:function(e,t,n){var r=s.EmptyMessage;r.type=n,r.from=e,r.to="bg",r.content=t,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(r).catch((function(e){}))}},{key:"SendFBInStreamData",value:function(e,t){var n=s.EmptyMessage;t.encodedText=t.content,t.alias=a.VIDEO_TRAFFIC_FACEBOOK_MEDIA_ALIAS_JSON,t.mediaType=a.VIDEO_TRAFFIC_FACEBOOK_MEDIA_TYPE_JSON,t.frameId=0,t.framesChain=[],t.contentType="json",delete t.content,n.type=a.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA,n.from=e,n.to="bg",n.content=t,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}},{key:"SendInitRequestListener",value:function(e,t){var n=s.EmptyMessage;n.type=a.MESSAGE_TYPE_INIT_REQUEST_LISTENER,n.from=e,n.to="bg",n.content=t,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}}],(n=[{key:"IsInit",value:function(){return this.init}},{key:"Init",value:function(){var t=this;this.init||(this.init=!0,window.addEventListener("message",(function(n){try{var r=n.data;if(s.IsValid(r)){var i=r.type;switch(i){case a.MESSAGE_TYPE_VIDEO_XHR_CANDIDATE:t.onGotVideoXHRTrafficCallback&&t.onGotVideoXHRTrafficCallback(r.content);break;case a.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA:e.SendFBInStreamData(t.id,r.content);break;case a.MESSAGE_TYPE_FACEBOOK_VIDEO_DATA:u.IsFBVideoDataValid(r.content)&&e.SendFBVideoData(t.id,r.content);break;case a.MESSAGE_TYPE_PINTEREST_VIDEO_DATA:e.SendPinterestVideoData(t.id,r.content);break;case a.MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA:case a.MESSAGE_TYPE_INSTAGRAM_CAROUSEL_SLIDES_SOURCES:case a.MESSAGE_TYPE_INSTAGRAM_FULL_TEXT_DATA:case a.MESSAGE_TYPE_INSTAGRAM_STORY_DATA:e.SendInstagramDataToBgStorage(t.id,r.content,i);break;case a.MESSAGE_TYPE_LINKEDIN_VIDEO_DATA:case a.MESSAGE_TYPE_LINKEDIN_SLIDES_DATA:e.SendLinkedinDataToBgStorage(t.id,r.content,i);break;case a.MESSAGE_TYPE_TWITTER_VIDEO_DATA:e.SendTWVideoData(t.id,r.content);break;case a.MESSAGE_TYPE_TWITTER_CAROUSEL_DATA:e.SendTWCarouselData(t.id,r.content);break;case a.MESSAGE_TYPE_REDDIT_VIDEO_DATA:e.SendRedditVideoData(t.id,r.content);break;case a.MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA:e.SendRedditRightColumnData(t.id,r.content)}}}catch(e){}}),!1),u.IsOnChromeRuntime()&&chrome.runtime.onMessage.addListener((function(e,n,r){var i=e;s.IsValid(i)&&i.to===t.id&&(i.type===a.MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES?t.onGotHTML5CandidatesExtractionStatusesCallback&&t.onGotHTML5CandidatesExtractionStatusesCallback(i.content):i.type===a.MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES?t.onGotBannerCandidatesExtractionStatusesCallback&&t.onGotBannerCandidatesExtractionStatusesCallback(i.content):i.type===a.MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES?t.onGotSkinAdCandidatesExtractionStatusesCallback&&t.onGotSkinAdCandidatesExtractionStatusesCallback(i.content):i.type===a.MESSAGE_TYPE_TAB_URL_CHANGED?t.onTabUrlChanged&&t.onTabUrlChanged(i.content):i.type===a.MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED&&t.onAdBlockerStatusChanged&&t.onAdBlockerStatusChanged(i.content))})))}},{key:"SendTicket",value:function(e){var t=s.EmptyMessage;t.type=a.MESSAGE_TYPE_OUT_TICKET,t.from=this.id,t.to="bg",t.content=e,u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(t).then(this.onTicketSend.bind(this)).catch((function(e){}))}},{key:"onTicketSend",value:function(e){e&&e.status}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();e.exports=c},5404:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2315),s=function(){return e=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=!1,this.Config=i,this.chainId=t,this.frameId=n,this.bisId=r,this.documentObj=null,this.onInputsDetectedCallback=null,this.onRedirectsDetectedCallback=null,this.detectedValidationInfo={inputs:!1,redirect:!1}},(t=[{key:"Init",value:function(e,t,n){return!this.init&&e&&(this.init=!0,this.fullIdStr=a.GetFullIdStr(this.chainId,this.frameId,this.bisId),this.documentObj=e,this.onInputsDetectedCallback=t,this.onRedirectsDetectedCallback=n,this.ValidateContent()),this.init}},{key:"ValidateContent",value:function(){this.detectedValidationInfo.inputs||this.GetInputsAmount()>0&&!this.IsIFrameWithInputsException()&&(this.detectedValidationInfo.inputs=!0,this.onInputsDetectedCallback&&this.onInputsDetectedCallback()),this.detectedValidationInfo.redirect||this.HasRedirect()&&(this.detectedValidationInfo.redirect=!0,this.onRedirectsDetectedCallback&&this.onRedirectsDetectedCallback())}},{key:"GetInputsAmount",value:function(){var e=0;try{var t=a.QuerySelectorAll(this.documentObj,"input");t&&t.length&&t.forEach((function(t){var n=t.getBoundingClientRect();n.width>0&&n.height>0&&(e+=1)}))}catch(e){}return e}},{key:"IsIFrameWithInputsException",value:function(){var e=!1,t=a.QuerySelector(this.documentObj,"html");return t&&-1!==t.innerHTML.search(/var clicktag/i)&&(e=!0),e}},{key:"IsWhiteListedRedirectionCode",value:function(e){var t=!1;try{if(e&&e.length&&this.Config)for(var n=this.Config.WhitelistRedirectionCode,r=0;r<n.length&&!t;r++)e.includes(n[r])&&(t=!0)}catch(e){}return t}},{key:"HasRedirect",value:function(){for(var e=!1,t=a.QuerySelectorAll(this.documentObj,"script"),n=0;n<t.length&&!e;n++){var r=t[n].innerHTML;r.length&&r.includes("location.replace")&&(e=!this.IsWhiteListedRedirectionCode(r))}return e}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=s},6875:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(1645),s=n(2315),u=n(5883),c=n(1453),l=n(9656),d=n(5404),f=n(8322),h=n(7782),y=n(7814),E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.frameId=null,this.chainId=null,this.fullIdStr="",this.init=!1,this.chainActivated=!1,this.finalFrame=!1,this.activated=!1,this.contentSenderTimer=null,this.activationInfo=null,this.IframesIO=null,this.TargetUrlDetector=null,this.ContentValidator=null,this.VideoAds=null,this.Config=null,this.recheckerInterval=null,this.PageUrl=document.location.href,this.counter=10,this.timeoutHandlerForBlockedFrame=null,this.isBlockedFrameInfoGot=!1}return t=e,n=[{key:"Init",value:function(){this.init||(this.init=!0,setTimeout(this.SendInitMessage.bind(this),700))}},{key:"SetBisStatus",value:function(){document&&document.body&&document.body.setAttribute&&document.body.setAttribute("bis_status","ok")}},{key:"RecheckBisStatus",value:function(){document&&document.body&&document.body.getAttribute&&"ok"!==document.body.getAttribute("bis_status")&&this.SetBisStatus()}},{key:"StopRechecker",value:function(){this.recheckerInterval&&(clearInterval(this.recheckerInterval),this.recheckerInterval=null)}},{key:"SendInitMessage",value:function(){var e=document.querySelector("html"),t=e?e.innerHTML:"",n=u.EmptyMessage;n.type=c.MESSAGE_TYPE_IFRAME_INITIALIZATION,n.from=this.id,n.to="bg",n.content={location:document.location.href,contentForSave:{depth:this.findDepthForClosedFrame(window,0),src:document.location.href,content:a.encode(t)}},s.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).then(this.onGotInitMesResponse.bind(this)).catch((function(e){}))}},{key:"findDepthForClosedFrame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.parent;return n&&n!==top?(t++,this.findDepthForClosedFrame(n,t)):t}},{key:"onGotInitMesResponse",value:function(e){var t=e.mes.content.location;this.Config=new y(this.id,e.mes.content.configuration),!0===new RegExp(this.Config.LinkedinConfig.FEED.REGEXP_IFRAME_SRC).test(t)?this.linkedinScenario(e):this.commonScenario(e)}},{key:"commonScenario",value:function(e){var t=this;if(e&&e.status&&"ok"===e.status&&u.IsValid(e.mes)&&e.mes.content.activeStatus&&(this.frameId=e.mes.content.frameId,this.fullIdStr=s.GetFullIdStr(this.chainId,this.frameId,this.id),e.mes.content.isMaster)){this.Config=new y(this.id,e.mes.content.configuration);var n=s.IsPublisherInBlacklist(this.PageUrl,this.Config.BlacklistPublishers),r=s.IsInFilterList(this.Config.BlacklistIframeSrc,this.PageUrl),i=s.IsInFilterList(this.Config.BlacklistKeyWordsInContent,document.querySelector("html").innerHTML);if(n||r||i)return;this.SetBisStatus(),setTimeout(this.StopRechecker.bind(this),1e4),this.recheckerInterval=setInterval(this.RecheckBisStatus.bind(this),300),this.IframesIO=new l(this.id),this.IframesIO.Init(),this.IframesIO.onGotChainActivationCallback=this.onGotChainActivation.bind(this),this.IframesIO.onGotContentMesCallback=this.onGotContentMes.bind(this),this.VideoAds=new h(this.id,this.Config,this.IframesIO,!n),document&&document.body&&document.body.setAttribute&&document.body.setAttribute("bis_frame_id",this.frameId),"null"===self.origin&&(this.timeoutHandlerForBlockedFrame=setInterval((function(){t.counter--,t.isBlockedFrameInfoGot||t.counter<=0?clearInterval(t.timeoutHandlerForBlockedFrame):t.requestHeaderInfoFromBG()}),1e3))}}},{key:"linkedinScenario",value:function(e){var t,n=this;if(e&&e.status&&"ok"===e.status&&u.IsValid(e.mes)){var r=null===(t=document)||void 0===t?void 0:t.documentElement;if(r){var i=r.querySelector("body");if(i){var o=1e3;i.setAttribute(c.ATTRIBUTE_BIS_ELEMENT_ID,o),i.querySelectorAll("*").forEach((function(e){o++,e.setAttribute&&(e.setAttribute(c.ATTRIBUTE_BIS_ELEMENT_ID,o),s.SetFullSizeToElement(e))}))}var a=setTimeout((function(){var e,t=r.outerHTML,i=null===(e=document.querySelector('span[class="ssplayer-topbar-title-text ssplayer-topbar-ellipsis"]'))||void 0===e?void 0:e.textContent;n.storeLinkedinFrameContent(t,i),clearTimeout(a)}),100)}}}},{key:"storeLinkedinFrameContent",value:function(e,t){var n=u.EmptyMessage;n.type=c.MESSAGE_TYPE_LINKEDIN_FRAME_CONTENT_TO_STORAGE,n.from=this.id,n.to="bg",n.content={content:a.encode(e),title:t},s.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}},{key:"requestHeaderInfoFromBG",value:function(){var e=u.EmptyMessage;e.type=c.MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME,e.from=this.id,e.to="bg",e.content={src:document.location.href},s.IsOnChromeRuntime()&&(this.setMessageListenerForThisIFrame(),chrome.runtime.sendMessage(e).catch((function(e){})))}},{key:"setMessageListenerForThisIFrame",value:function(){chrome.runtime.onMessage.addListener(this.callbackForHeaderInfoRequest.bind(this))}},{key:"callbackForHeaderInfoRequest",value:function(e){var t=arguments.callee;if(e&&e.type&&e.type===c.MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE){var n=e.parentInfo;if(chrome.runtime.onMessage.removeListener(t),n){this.isBlockedFrameInfoGot=!0;var r=f.DetectTargetUrlFromWindowObj(this.id,self,this.Config),i={depth:n.depth,headerInfo:n.headerInfo,chainId:n.chainId,configEncoded:this.Config.configEncoded,targetUrlCandidates:r.length?r:[]};this.onGotChainActivation(i)}}}},{key:"onGotChainActivation",value:function(t){var n=this;if(this.chainActivated)return null;if(this.chainActivated=!0,!(t&&t.headerInfo&&t.headerInfo.bisId))return null;this.id=t.headerInfo.bisId,this.IframesIO.SetId(this.id),this.chainId=t.chainId,this.fullIdStr=s.GetFullIdStr(this.chainId,this.frameId,this.id),this.StopRechecker(),this.activationInfo=t,this.Config||t.configEncoded&&t.configEncoded.length&&(this.Config=new y(this.id,t.configEncoded)),this.ContentValidator=new d(this.chainId,this.frameId,this.id,this.Config),this.ContentValidator.Init(document,this.onContentInputsDetected.bind(this),this.onContentRedirectsDetected.bind(this)),this.TargetUrlDetector=new f(this.chainId,this.frameId,this.id,this.activationInfo.targetUrlCandidates,this.Config),this.TargetUrlDetector.Init(this.IframesIO),e.SetBisId(document,window,this.id),s.SetBisDepth(document.body,t.depth),s.SetBisChainId(document.body,t.chainId),this.InjectJs();var r=setTimeout((function(){n.onGotActivationMes(),clearTimeout(r)}),50)}},{key:"onGotActivationMes",value:function(){if(!this.activated){this.activated=!0;var t=s.QuerySelectorAll(document,"iframe, frame");if(t.length)for(var n=0;n<t.length;n++){var r=t[n];if(s.SetFullSizeToElement(r,e.GetAbsoluteCoordinates(this.activationInfo)),s.GenerateAndSetBisIdToFrame(r),s.SetBisDepth(r,this.activationInfo.depth+1),s.SetBisChainId(r,this.activationInfo.chainId),s.IsIframeHasContentScript(t[n]))e.SendActivationMesToFrame(this.id,this.activationInfo.chainId,r,this.activationInfo.depth+1,this.Config);else{var i=e.GetInvalidChainSegmentContent(this.id,this.activationInfo.chainId,r,this.activationInfo.depth+1,this.Config);e.SendInvalidChainSegmentContent(this.id,i)}}this.TargetUrlDetector.DetectTargetUrl(1e3,this.onTargerUrlDetected.bind(this))}}},{key:"onTargerUrlDetected",value:function(){if(!this.contentSenderTimer){var e=s.GetRandomIntInRange(0,200);this.contentSenderTimer=setTimeout(this.SendContent.bind(this),e)}}},{key:"SendContent",value:function(){e.PrepareContent(this.fullIdStr,document,e.GetAbsoluteCoordinates(this.activationInfo)),e.RemoveInjectedJs(this.fullIdStr,document);var t=document.querySelector("html");if(t){var n=t.outerHTML;if(n.length){var r=u.EmptyMessage;r.type=c.MESSAGE_TYPE_IFRAME_CONTENT,r.from=this.id,r.to="bg",r.content={isValid:!0,headerInfo:this.activationInfo.headerInfo,contentFinal:a.encode(n),targetUrl:this.TargetUrlDetector.FrameTargetUrl},s.IsOnChromeRuntime()&&chrome.runtime.sendMessage(r).catch((function(e){}))}}}},{key:"onGotChainActivationResponse",value:function(){}},{key:"onGotContentMes",value:function(){}},{key:"onContentInputsDetected",value:function(){this.IframesIO.SendInputsDetected()}},{key:"onContentRedirectsDetected",value:function(){this.IframesIO.SendRedirectDetected()}},{key:"InjectJs",value:function(){if(!document.querySelector('script[bis_script="display"]')){var e=document.createElement("script"),t=document.querySelector("head");this.setAttributes(e),t&&t.appendChild(e)}}},{key:"setAttributes",value:function(e){var t=s.getURL("../executers/".concat(c.IFRAMES_TRAFFIC_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.setAttribute("bis_script","display"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("bis_id",this.id),e.src=t}}],r=[{key:"SetBisId",value:function(e,t,n){t&&(t.bis_id=n),e&&(e.bis_id=n),e.body&&e.body.setAttribute&&e.body.setAttribute("bis_body_id",n)}},{key:"RemoveInjectedJs",value:function(e,t){try{var n=t.head.querySelectorAll("script[bis_script]");if(n&&n.length)for(var r=0;r<n.length;r++)n[r].remove()}catch(e){}}},{key:"GetAbsoluteCoordinates",value:function(e){return{x:e.headerInfo.size.abs_x,y:e.headerInfo.size.abs_y}}},{key:"PrepareContent",value:function(e,t,n){for(var r=s.QuerySelectorAll(t,"*:not(html):not(script):not(head):not(meta):not(link):not(title):not(style):not(param)"),i=0;i<r.length;i++){var o=r[i];if(o)try{var a=!1,u=window.getComputedStyle(o).backgroundImage;if(u&&u.length&&"none"!=u&&u.includes("url")&&(u=u.replace(/"/g,"'"),a=!0),o.hasAttribute("style")){var c=o.getAttribute("style");c&&o.setAttribute&&(c=c.replace(/"/g,"'"),o.setAttribute("style",c),a&&(o.style.cssText+="background-image: "+u+";",o.setAttribute("bis_label","style")))}else a&&o.setAttribute&&(o.setAttribute("style","background-image: "+u+";"),o.setAttribute("bis_label","style"));try{if(o.attributes&&o.attributes.length)for(var l=0;l<o.attributes.length;l++)o.attributes[l]&&o.attributes[l].value&&o.attributes[l].value.length&&"src"!==o.attributes[l].name&&o.attributes[l].value.includes('"')&&(o.attributes[l].value=o.attributes[l].value.replace(/"/g,"'"))}catch(e){}s.SetFullSizeToElement(o,n)}catch(e){}}}},{key:"ExtractContent",value:function(e,t){return t.document.querySelector("html").outerHTML}},{key:"GetFrameHeaderInfo",value:function(e,t,n){var r={depth:n,chainId:e,frameId:t.id,src:t.src,size:JSON.parse(t.getAttribute("bis_size")),bisId:t.getAttribute("bis_id")};return 0===n&&(r.topHeaderContent=a.encode(t.outerHTML)),r}},{key:"SendActivationMesToFrame",value:function(t,n,r,i,o){var l=!1;try{var d=document.querySelector("body"),h=self===top?0:d?+d.getAttribute("bis_frame_id"):null,y="";if(o&&o.GetConfigEncoded&&(y=o.GetConfigEncoded()),r){var E,A=u.EmptyMessage;try{E=r.contentWindow&&Object.keys(r.contentWindow).includes("origin")?r.contentWindow.origin:r.src}catch(e){E=r.src}A.type=c.MESSAGE_TYPE_CHAIN_ACTIVATION,A.from=t,A.to="fr",A.content={chainId:n,depth:i,headerInfo:e.GetFrameHeaderInfo(n,r,i),configEncoded:y,targetUrlCandidates:[]};var v=u.EmptyMessage;if(v.type=c.MESSAGE_TYPE_HEADER_INFO_TO_STORAGE,v.from=t,v.to="bg",v.content={chainId:n,depth:i,frameId:h,headerInfo:e.GetFrameHeaderInfo(n,r,i)},s.IsOnChromeRuntime()&&chrome.runtime.sendMessage(v).catch((function(e){})),s.IsIframeSecure(r)){if(r.contentWindow&&r.contentWindow.postMessage)try{r.contentWindow.postMessage(A,E)}catch(e){}}else{try{var m=f.DetectTargetUrlFromWindowObj(t,r.contentWindow,o);m.length&&(A.content.targetUrlCandidates=m)}catch(e){}r.contentWindow.document.body.setAttribute&&r.contentWindow.document.body.setAttribute("bis_activation",a.encode(JSON.stringify(A)))}l=!0}}catch(e){}return l}},{key:"GetInvalidChainSegmentContent",value:function(t,n,r,i,o){var u={},c=!1,l=e.GetFrameHeaderInfo(n,r,i),d={x:l.size.x,y:l.size.y};try{var h=s.QuerySelectorAll(r.contentWindow.document,"iframe, frame");if(0===h.length)c=!0;else{c=!1;for(var y=0;y<h.length;y++)s.SetFullSizeToElement(h[y],d),s.GenerateAndSetBisIdToFrame(h[y]),s.SetBisDepth(h[y],i+1),e.SendActivationMesToFrame(t,n,h[y],i+1,o)}e.PrepareContent(t,r.contentWindow.document,d),u.isValid=!1,u.isChainCompleted=c,u.headerInfo=l,u.contentFinal=a.encode(e.ExtractContent(t,r.contentWindow)),u.targetUrl=f.DetectTargetUrlFromWindowObj(t,r.contentWindow,o)}catch(e){}return u}},{key:"SendInvalidChainSegmentContent",value:function(e,t){if(t){var n=u.EmptyMessage;n.type=c.MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT,n.from=e,n.to="bg",n.content=t,s.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((function(e){}))}}}],n&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();e.exports=E},2727:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,n){return t=u(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var l=n(2621),d=n(2315),f=n(1453),h=n(7769),y=n(6875),E=n(5837),A=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=a(this,t,[e])).Config=n,o.HTML5AdsConfig=o.Config.Html5AdsConfig,o.IOManager=r,o.IOManager.onGotHTML5CandidatesExtractionStatusesCallback=o.onGotHTML5CandidatesExtractionStatuses.bind(o),o.AdBlockerAgent=i,o.topFramesCandidates=[],o.onDetectedCallback=null,o.chainIdCounter=0,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,(r=[{key:"ActivateDetector",value:function(){var e=this;this.Activated(),this.DetectHTML5AdsCandidates(),setTimeout((function(){e.DetectHTML5AdsCandidates()}),350),setInterval((function(){e.DetectHTML5AdsCandidates()}),700)}},{key:"DetectHTML5AdsCandidates",value:function(){var e=this;this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter();var t=d.QuerySelectorAll(document,this.HTML5AdsConfig.QUERIES.IFRAMES_COLLECTION),n=0;if(t.length)for(var r=0;r<t.length;r++){var i=t[r],o=i.src?i.src.toLowerCase():i.src;if(this.preCheckFrameContent(i))if(d.IsInFilterList(this.Config.BlacklistIframeSrc,o)||d.IsInFilterList(this.Config.BlacklistIframeId,i.id))d.SetFullSizeToElement(i);else if(!this.IsFrameFromSite(o)||d.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,o)){var a=i.getBoundingClientRect();if(a.width>70&&a.height>40&&a.height<1100){d.SetFullSizeToElement(i);var s=d.GenerateAndSetBisIdToFrame(i);this.chainIdCounter=this.chainIdCounter+1;var u={ticketId:this.TicketId,pageUrl:this.PageUrl,bisId:s,chainId:this.chainIdCounter,detectionTime:(new Date).getTime(),processingStartTime:null,frame:i,isSecure:d.IsIframeSecure(i),hasContentScript:d.IsIframeHasContentScript(i),status:f.CANDIDATE_PROCESS_STATUS_DETECTED};this.topFramesCandidates.push(u),d.SetBisDepth(i,0),d.SetBisChainId(i,this.chainIdCounter),n+=1,this.AdBlockerAgent.IsEnabled()&&(this.CandidateHidden(),this.HideElement(i)),l.CONFIG_MARK_AD_CANDIDATES&&!this.AdBlockerAgent.IsEnabled()&&(i.style.cssText+="border: 6px solid red !important;")}}else d.SetFullSizeToElement(i)}if(n>0){E.SendHtml5CandidatePlacements(this.id,n,null);for(var c=function(t){e.topFramesCandidates[t].status===f.CANDIDATE_PROCESS_STATUS_DETECTED&&(e.topFramesCandidates[t].status=f.CANDIDATE_PROCESS_STATUS_START_PROCESSING,setTimeout((function(){e.ActivateCandidateProcessing(e.topFramesCandidates[t])}),3e3+d.GetRandomIntInRange(0,500)))},h=0;h<this.topFramesCandidates.length;h++)c(h);this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount)}return this.topFramesCandidates.length}},{key:"preCheckFrameContent",value:function(e){if(!e.contentDocument)return!0;var t=e.contentDocument.querySelectorAll(this.HTML5AdsConfig.QUERIES.ACCEPTABLE_NODES_IN_IFRAME),n=e.contentDocument.querySelectorAll(this.HTML5AdsConfig.QUERIES.UNACCEPTABLE_NODES_IN_IFRAME),r=!1;return t.length&&!n.length&&(r=!0),r}},{key:"onGotHTML5CandidatesExtractionStatuses",value:function(e){if(e&&e.length)for(var t=0;t<e.length;t++)if(this.AdBlockerAgent.IsEnabled()&&e[t].extractionStatus.filteredOut)this.UnhideElement(d.QuerySelector(document,'iframe[bis_chainid="'.concat(e[t].chainId,'"]')));else if(l.CONFIG_MARK_AD_CANDIDATES&&l.CONFIG_MARK_PROCESSED_AD_CANDIDATES){var n=d.QuerySelector(document,'iframe[bis_chainid="'.concat(e[t].chainId,'"]'));n&&d.UpdateCandidateStatusBorderColor(n,e[t].extractionStatus)}}},{key:"ActivateCandidateProcessing",value:function(e){if(e&&e.status&&e.status===f.CANDIDATE_PROCESS_STATUS_START_PROCESSING){e.processingStartTime=(new Date).getTime(),e.status=f.CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED;var t=d.IsIframeSecure(e.frame);e.isSecure!==t&&(e.isSecure=t);var n=d.IsIframeHasContentScript(e.frame);if(e.hasContentScript!==n&&(e.hasContentScript=n),e.hasContentScript)y.SendActivationMesToFrame(this.id,e.chainId,e.frame,0,this.Config);else{var r=y.GetInvalidChainSegmentContent(this.id,e.chainId,e.frame,0,this.Config);if(l.CONFIG_MARK_AD_CANDIDATES&&l.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&r.isChainCompleted){var i={fullContentExtracted:!1,targetUrlExtracted:!1,sentToBackend:!1};r.contentFinal&&r.contentFinal.length&&(i.fullContentExtracted=!0),r.targetUrl&&r.targetUrl.length&&(i.targetUrlExtracted=!0),d.UpdateCandidateStatusBorderColor(e.frame,i)}y.SendInvalidChainSegmentContent(this.id,r)}}}},{key:"GetPrebuildInfo",value:function(){for(var e=[],t=(new Date).getTime(),n=0;n<this.topFramesCandidates.length;n++)this.topFramesCandidates[n].status===f.CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED&&(this.topFramesCandidates[n].status=f.CANDIDATE_PROCESS_STATUS_PREBUILD_INFO_SENT,e.push({ticketId:this.topFramesCandidates[n].ticketId,pageUrl:this.topFramesCandidates[n].pageUrl,bisId:this.topFramesCandidates[n].bisId,chainId:this.topFramesCandidates[n].chainId,timeAfterDetection:t-this.topFramesCandidates[n].detectionTime,timeAfterProcessingStart:t-this.topFramesCandidates[n].processingStartTime}));return e}},{key:"IsFrameFromSite",value:function(e){var t=!1,n=e;if(n.length){var r=n.indexOf("?");(r>0||(r=n.indexOf("#"))>0)&&(n=e.substring(0,r)),-1!==n.indexOf(window.location.host)?t=!0:d.isValidUrl(n)||"about:blank"===n||(t=!0)}return t}}])&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(h);e.exports=A},9656:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(5883),s=n(1453),u=n(2315),c=n(1645),l=n(3213),d=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.init=!1,this.AtrMessageListeners=[],this.webNavigationIframes=[],this.chainActivationListernerIntervalId=null,this.onWindowEmbeddedTargetUrlDetectionCallback=null,this.onGotContentMesCallback=null,this.onGotChainActivationCallback=null,this.onGotVideoXHRTrafficCallback=null,this.chainActivationEventProcessed=!1,this.processedMessages=[]},(t=[{key:"IsInit",value:function(){return this.init}},{key:"Context",get:function(){return this}},{key:"SetId",value:function(e){this.id=e,this.AtrMessageListener&&this.AtrMessageListener.SetId(e)}},{key:"Init",value:function(){var e=this;this.init||(this.init=!0,window.addEventListener("message",(function(t){try{var n=t.data;e.ProcessWindowMessage(n)}catch(e){}}),!1),u.IsOnChromeRuntime()&&chrome.runtime.onMessage.addListener((function(t,n,r){var i=t;a.IsValid(i)&&(i.type===s.MESSAGE_TYPE_GET_FRAME_CONTENT?i.multiTo.includes(e.id)&&(e.webNavigationIframes=i.content,e.onGotContentMesCallback&&e.onGotContentMesCallback()):i.type===s.MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK&&i.multiTo.includes(e.id)&&e.ActivateWindowClickTargetUrlDetection(i.content))})),this.chainActivationListernerIntervalId=setInterval((function(){try{if(!e.chainActivationEventProcessed&&document&&document.body){var t=document.body.getAttribute("bis_activation");if(t&&t.length){var n=c.decode(t);if("{"===n[0]&&"}"===n[n.length-1]){var r=JSON.parse(n);a.IsValid(r)&&r.type===s.MESSAGE_TYPE_CHAIN_ACTIVATION&&(e.chainActivationEventProcessed=!0,clearInterval(e.chainActivationListernerIntervalId),e.chainActivationListernerIntervalId=null,document.body.setAttribute("bis_activation","done"),e.onGotChainActivationCallback&&e.onGotChainActivationCallback(r.content))}}document.body.removeAttribute("bis_activation")}}catch(e){}}),500))}},{key:"ProcessWindowMessage",value:function(e){a.IsValid(e)&&e.posdHash&&!this.processedMessages.includes(e.posdHash)&&(e.posdHash&&e.posdHash.length&&this.processedMessages.push(e.posdHash),e.type===s.MESSAGE_TYPE_CHAIN_ACTIVATION?(this.chainActivationListernerIntervalId&&(clearInterval(this.chainActivationListernerIntervalId),this.chainActivationListernerIntervalId=null),this.onGotChainActivationCallback&&this.onGotChainActivationCallback(e.content)):e.type===s.MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND?this.onWindowEmbeddedTargetUrlDetectionCallback&&this.onWindowEmbeddedTargetUrlDetectionCallback(e.content.targetUrlList):e.type===s.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND?(e.to="bg",u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((function(e){}))):e.type===s.MESSAGE_TYPE_VIDEO_XHR_CANDIDATE&&this.onGotVideoXHRTrafficCallback&&this.onGotVideoXHRTrafficCallback(e.content))}},{key:"ActivateWindowEmbeddedTargetUrlDetection",value:function(e){try{this.onWindowEmbeddedTargetUrlDetectionCallback=e;var t=a.EmptyMessage;t.type=s.MESSAGE_TYPE_GET_WINDOW_TARGET_URL,t.from=this.id,t.to=this.id+"_w",window.postMessage&&window.postMessage(t,"*");var n=new l(this.id,this.ProcessWindowMessage.bind(this));n.ActivateMesToFrameContentListener(s.MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND),this.AtrMessageListeners.push(n)}catch(e){}}},{key:"ActivateWindowClickTargetUrlDetection",value:function(e){try{var t=a.EmptyMessage;t.type=s.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL,t.from=this.id,t.to=this.id+"_w",t.content=e,window.postMessage&&window.postMessage(t,"*");var n=new l(this.id,this.ProcessWindowMessage.bind(this));n.ActivateMesToFrameContentListener(s.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL),this.AtrMessageListeners.push(n)}catch(e){}}},{key:"SendInputsDetected",value:function(){var e=a.EmptyMessage;e.type=s.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS,e.from=this.id,e.to="bg",u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((function(e){}))}},{key:"SendRedirectDetected",value:function(){var e=a.EmptyMessage;e.type=s.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS,e.from=this.id,e.to="bg",u.IsOnChromeRuntime()&&chrome.runtime.sendMessage(e).catch((function(e){}))}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=d},6118:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2315),s=n(1453),u=n(2145),c=n(9640),l=n(5837),d=n(1171),f=n(5173),h=n(7814),y=n(6563),E=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.tabId=null,this.init=!1,this.panalyticsId="",this.adsCandidatesDetectionInterval=null,this.ticket=null,this.cycleNumber=0,this.RefreshTicket(),l.SendNewPageCreatedTicket(a.ToJSON(this.ticket))},(t=[{key:"RefreshTicket",value:function(){this.pageUrl=document.location.href,this.ticketId=a.GenerateTicketId(),this.cycleNumber=0,this.ticket=u.GetSingleOutTicket(this.panalyticsId,this.ticketId,this.tabId),this.init&&this.AdsManager&&this.AdsManager.PageRefreshed(this.pageUrl,this.ticketId)}},{key:"Init",value:function(){this.init||l.SendInitMes({ticketId:this.ticketId,url:this.pageUrl},this.onGetInitConfig.bind(this))}},{key:"onGetInitConfig",value:function(e){return e.activeStatus?this.init?null:(this.init=!0,this.tabId=e.tabId,this.id="mp_"+e.tabId,this.panalyticsId=e.panalyticsId,this.ticket.tabId=this.tabId,this.ticket[s.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId,this.Config=new h(this.id,e.configuration),this.IOManager=new l(this.id),this.IOManager.onTabUrlChanged=this.onTabUrlChanged.bind(this),this.IOManager.Init(),this.AdBlockerAgent=new d(this.id,this.IOManager),this.AdBlockerAgent.Init(e.adBlockerStatus,e.excludeList,e.tabId),this.AdsManager=new c(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.PanelsRegulator=new y(this.id),this.PanelsRegulator.Init(this.AdBlockerAgent,this.onGotRegulatorRespond.bind(this)),void(e.activeAdBlockInspectorAgent&&(this.AdBlockInspectorAgent=new f(this.id),this.AdBlockInspectorAgent.Init(this.Config.GetAdBlockInspectorConfig())))):null}},{key:"onGotRegulatorRespond",value:function(e){return!!this.init&&!!e&&(this.adsCandidatesDetectionInterval=setInterval(this.onAdsCandidatesDetected.bind(this),1e4),this.AdsManager.ActivateAdsdetectors(),l.SendNewPageCreatedTicket(a.ToJSON(this.ticket)),void l.SendPanelRegulatorResult(e))}},{key:"onTabUrlChanged",value:function(e){return!(null==e||!e.newUrl||null==e||!e.initedTicketId)&&(e.newUrl!==this.pageUrl||e.initedTicketId===this.ticketId)&&(this.RefreshTicket(),l.SendSinglePageReinitMes({ticketId:this.ticketId,url:this.pageUrl}),void l.SendNewPageCreatedTicket(a.ToJSON(this.ticket)))}},{key:"onAdsCandidatesDetected",value:function(){return!!this.init&&(a.IsOnChromeRuntime()?!!this.panalyticsId.length&&(this.cycleNumber=this.cycleNumber+1,this.ticket[s.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId,this.ticket.windowSize=a.GetWindowSize(),this.ticket.firstVisit=this.cycleNumber<=1,this.ticket.adCandidatesHtml5=this.AdsManager.GetHtml5CandidatesPrebuildInfo(),void this.IOManager.SendTicket(a.ToJSON(this.ticket))):(this.adsCandidatesDetectionInterval&&clearInterval(this.adsCandidatesDetectionInterval),!1))}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=E},6563:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2621),s=n(1453),u=n(2315),c=n(1645),l=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.init=!1,this.extensionId=""+chrome.runtime.id,this.AdBlockerAgent=null,this.onInitCallback=null},(t=[{key:"Init",value:function(e,t){!this.init&&e&&(this.onInitCallback=t,this.init=!0,this.AdBlockerAgent=e,document.readyState===s.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.ActivateRegulator.bind(this)):document.readyState!==s.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==s.DOCUMENT_READYSTATE_COMPLETE||this.ActivateRegulator())}},{key:"ActivateRegulator",value:function(){this.RegisterPanel(),setTimeout(this.Regulate.bind(this),500)}},{key:"Regulate",value:function(){var e=!0,t="",n=[];try{var r=document.body.getAttribute("bis_register");if(r&&r.length){n=JSON.parse(c.decode(r));for(var i=0;i<n.length&&0===t.length;i++)n[i].master&&(t=n[i].extensionId);t.length&&this.extensionId!==t&&(e=!1)}}catch(e){}this.onInitCallback&&this.onInitCallback(e)}},{key:"GetPanelScore",value:function(){var e=a.CONFIG_PANELOS_VERSION.split("."),t=1e4*parseInt(e[0])+100*parseInt(e[1])+parseInt(e[2]),n=this.AdBlockerAgent.GetStatus();return u.IsFacebookUrl(document.location.href)?n[s.ADBLOCKER_FOR_FACEBOOK]===s.ADBLOCKER_STATUS_ENABLED&&(t*=10):u.IsTwitterUrl(document.location.href)?n[s.ADBLOCKER_FOR_TWITTER]===s.ADBLOCKER_STATUS_ENABLED&&(t*=10):u.IsRedditUrl(document.location.href)?n[s.ADBLOCKER_FOR_REDDIT]===s.ADBLOCKER_STATUS_ENABLED&&(t*=10):n[s.ADBLOCKER_FOR_DISPLAY]===s.ADBLOCKER_STATUS_ENABLED&&(t*=10),t}},{key:"UpdateRegister",value:function(e){for(var t={master:!0,extensionId:this.extensionId,adblockerStatus:this.AdBlockerAgent.GetStatus(),version:a.CONFIG_PANELOS_VERSION,score:this.GetPanelScore()},n=!0,r=0;r<e.length&&n;r++)e[r].extensionId===this.extensionId&&(n=!1,e[r]=t);n&&e.push(t)}},{key:"ChooseWinner",value:function(e){if(e&&e.length)if(1===e.length);else{for(var t=0,n=e[t].score,r=0;r<e.length;r++)e[r].master=!1,e[r].score>n&&(n=e[r].score,t=r);e[t].master=!0}}},{key:"RegisterPanel",value:function(){try{var e=[],t=document.body.getAttribute("bis_register");t&&t.length&&(e=JSON.parse(c.decode(t))),this.UpdateRegister(e),this.ChooseWinner(e),document.body.setAttribute("bis_register",c.encode(JSON.stringify(e)))}catch(e){}}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=l},5784:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,n){return t=u(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var l=n(2315),d=n(2621),f=n(7769),h=n(5837),y=n(1453),E=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=a(this,t,[e])).Config=n,o.skinAdsConfig=n.config.skinAdsConfig,o.IOManager=r,o.IOManager.onGotSkinAdCandidatesExtractionStatusesCallback=o.onGotSkinAdCandidatesExtractionStatuses.bind(o),o.AdBlockerAgent=i,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,(r=[{key:"ActivateDetector",value:function(){var e=this;this.DetectCandidates(),setTimeout((function(){e.DetectCandidates()}),500),setInterval((function(){e.DetectCandidates()}),1e3)}},{key:"SendCandidatesToBackground",value:function(){this.Candidates.length&&(this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount),h.SendAdCandidates(this.id,this.Candidates,y.MESSAGE_TYPE_CANDIDATES_DATA_SKINADS,null))}},{key:"DetectCandidates",value:function(){this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter(),this.ClearCandidates(),this.GetSkinAdFromBodyBackground(),0==this.CandidatesCount&&this.GetSkinAdFromDivBackground(),this.SendCandidatesToBackground()}},{key:"GetSkinAdFromBodyBackground",value:function(){var e,t={source:[],targetUrl:[]},n=document.body;if(n&&!n.hasAttribute("bis_skin_checked")&&(e=l.GetUrlFromStyleStr(window.getComputedStyle(n).backgroundImage)),e&&l.isValidUrl(e)){n.setAttribute("bis_skin_checked","1");var r={type:"single",src:e,size:l.GetFullElementSize(n)};t.source.push(r);for(var i=l.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_HREF_COLLECTION),o=0;o<i.length;o++){var a=i[o];a.setAttribute&&a.setAttribute("bis_skin_checked","1");var s=a.getBoundingClientRect(),u=a.firstElementChild?a.firstElementChild.getBoundingClientRect():null;a.href&&(s.width>50&&s.height>=100&&0==s.left||u&&u.width>50&&u.height>=100&&0==u.left)&&l.isValidUrl(a.href)&&!t.targetUrl.includes(a.href)&&t.targetUrl.push(a.href),this.findElementsByHref(t.targetUrl,a)}}t.source.length&&t.targetUrl.length&&(this.hideSkinAdElement(document),this.AddCandidate(t))}},{key:"GetSkinAdFromDivBackground",value:function(){for(var e={source:[],targetUrl:[]},t=!1,n=l.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_DIV_COLLECTION),r=0;r<n.length&&!t;r++)if((u=n[r]).setAttribute&&u.setAttribute("bis_skin_checked","1"),(c=u.getBoundingClientRect()).width>50&&c.height>500&&0==c.left){var i=l.GetUrlFromStyleStr(window.getComputedStyle(u).backgroundImage);if(i&&l.isValidUrl(i)){var o={type:"single",src:i,size:l.GetFullElementSize(u)};e.source.push(o),t=!0,this.AdBlockerAgent.IsEnabled()&&u.style&&(u.style.backgroundImage="none",this.CandidateHidden())}}if(t)for(var a=l.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_HREF_COLLECTION),s=0;s<a.length;s++){var u;(u=a[s]).setAttribute&&u.setAttribute("bis_skin_checked","1");var c=u.getBoundingClientRect();u.href&&0==c.left&&(c.width>50&&c.height>500||c.width>500&&c.height>50)&&l.isValidUrl(u.href)&&!e.targetUrl.includes(u.href)&&e.targetUrl.push(u.href)}e.source.length&&e.targetUrl.length&&this.AddCandidate(e)}},{key:"findElementsByHref",value:function(e,t){var n=t.href;e.includes(n)&&(this.SetBorderToCandidate(t),this.hideSkinAdElement(t),t.setAttribute("bis_skin_element","1"))}},{key:"hideSkinAdElement",value:function(e){this.AdBlockerAgent.IsEnabled()&&(e&&e.style&&(e.style.visibility="hidden",e.style.backgroundImage="none",this.CandidateHidden()),e.body&&e.body.style&&(e.body.style.backgroundImage="none",this.CandidateHidden()))}},{key:"SetBorderToCandidate",value:function(e){var t=e.getBoundingClientRect();!this.AdBlockerAgent.IsEnabled()&&e&&(t.width>1&&t.height>1?e.style.cssText+="border: 6px solid red !important; display: block;":e.firstElementChild.style.cssText+="border: 6px solid red !important; display: block;")}},{key:"onGotSkinAdCandidatesExtractionStatuses",value:function(e){if(d.CONFIG_MARK_AD_CANDIDATES&&d.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&e&&e.length&&!this.AdBlockerAgent.IsEnabled())for(var t=function(t){var n=l.QuerySelectorAll(document,e[t].query);n&&n.forEach((function(n){n&&l.UpdateCandidateStatusBorderColor(n,e[t].extractionStatus)}))},n=0;n<e.length;n++)t(n)}}])&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(f);e.exports=E},2145:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2621),s=n(2315),u=n(1453),c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"GetSingleOutTicket",value:function(e,t,n){var r={tabId:n,ticketFormatVersion:3,partnerId:a.CONFIG_PARTNER_ID,distributorId:a.CONFIG_DISTRIBUTOR_ID,ticketId:t,firstVisit:!1,url:document.location.href,userAgent:navigator.userAgent,creationTime:s.GetCurrentDataTimeStr(),windowSize:s.GetWindowSize(),timeOnPage:0,adCandidatesSkinAd:[],adCandidatesBanner:[],adCandidatesHtml5:[],adsFacebook:[],adsTwitter:[],adsReddit:[],adsPinterest:[],adsInstagram:[],adsLinkedin:[],adCandidatePlacements:{skinAd:0,banner:0,html5:0,facebook:0,twitter:0,reddit:0,pinterest:0,tiktok:0,instagram:0,linkedin:0},videoTraffics:[],activeAdBlocker:!1};r[u.TICKET_ALIAS_PANALYTICSID]=e,r[u.TICKET_ALIAS_PINSTANCEID]=a.CONFIG_PINSTANCE_ID;var i=s.GetBaseHref();""!==i&&(r.base=i);var o=chrome.runtime.getManifest();return r.extensionVersion=o.version,r.panelosVersion=a.CONFIG_PANELOS_VERSION,r}}],(t=null)&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=c},7782:(e,t,n)=>{function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var u=n(1453),c=n(1645),l=n(2315),d=n(6269),f=n(4707),h=n(3791),y=n(5837),E=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.Config=n,this.IOManager=r,this.onDetectVideoHarCallback=null,this.VideoTrafficValidator=new h(this.id,this.Config),this.VideoTrafficDetector=new f(this.id),this.VideoTrafficDetector.InjectXhrDetector(this.Config),this.IOManager.onGotVideoXHRTrafficCallback=this.ProcessVideoXHRTraffic.bind(this)},(t=[{key:"ActivateDetector",value:function(){this.CheckVideoTrafficInHTML(),this.CheckVideoTrafficInJS()}},{key:"PageRefreshed",value:function(e,t){l.IsYouTubeUrl(e)||(this.CheckVideoTrafficInHTML(),this.CheckVideoTrafficInJS())}},{key:"CheckVideoTrafficInHTML",value:function(){var e=new d(u.VIDEO_TRAFFIC_SOURCE_HTML,"GET",window.location.href,"text/html",document.documentElement.outerHTML),t=this.VideoTrafficValidator.Validate(e);t&&this.SendVideoTraffic(e,t)}},{key:"CheckVideoTrafficInJS",value:function(){for(var e=l.QuerySelectorAll(document,"script"),t=0;t<e.length;t++){var n=new d(u.VIDEO_TRAFFIC_SOURCE_JS,"GET",e[t].src,"text/javascript",e[t].innerHTML),r=this.VideoTrafficValidator.Validate(n);if(r){if("JSON_TIKTOK_FEED"===r.alias){this.filterDataForTiktokJS(n);var i=JSON.parse(n.GetContent());if(!i.itemList.length)return;y.SendCandidatePlacementsCount(this.id,i.itemList.length,u.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TIKTOK,null)}this.SendVideoTraffic(n,r)}}}},{key:"ProcessVideoXHRTraffic",value:function(e){if(d.IsXHRvalid(e)){var t=new d(u.VIDEO_TRAFFIC_SOURCE_XHR,e.requestMethod,e.url,e.type,e.content,e.encodedPostBody),n=this.VideoTrafficValidator.Validate(t);if(n){if("JSON_TIKTOK_FEED"===n.alias){this.filterDataForTiktokXHR(t);var r=JSON.parse(t.GetContent());if(!r.itemList.length)return;y.SendCandidatePlacementsCount(this.id,r.itemList.length,u.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TIKTOK,null)}this.SendVideoTraffic(t,n)}}}},{key:"filterDataForTiktokJS",value:function(e){var t=JSON.parse(e.GetContent());if(e.SetUrl("https://www.tiktok.com/api/recommend/item_list/?this=data&from=script&in&dom"),t.ItemModule&&"object"===o(t.ItemModule)){for(var n={itemList:[]},r=0,i=Object.keys(t.ItemModule);r<i.length;r++){var a=i[r],s=t.ItemModule[a];s.adLabelVersion&&2===parseInt(s.adLabelVersion)&&n.itemList.push(s)}e.SetContent(JSON.stringify(n))}}},{key:"filterDataForTiktokXHR",value:function(e){var t=JSON.parse(e.GetContent());if(t.itemList){var n={itemList:t.itemList.filter((function(e){if(e.adLabelVersion&&2===parseInt(e.adLabelVersion))return e}))};n.itemList.length||(n.itemList=[]),e.SetContent(JSON.stringify(n))}}},{key:"SendVideoTraffic",value:function(e,t){if(e&&t){var n,i={requestMethod:e.GetRequestMethod(),url:e.GetUrl(),contentType:e.GetType(),mediaType:t.name,alias:t.alias};if(e.IsEncodedPostBodyExist()&&(i.encodedPostBody=e.GetEncodedPostBody()),t.reduceSizeFilter&&t.reduceSizeFilter.active){if(null!==(n=h.CreateRegExp(t.reduceSizeFilter.reducePattern).exec(e.GetContent()))&&n.length>0&&Math.max.apply(Math,r(t.reduceSizeFilter.regResIndexes))<n.length){var o=n.filter((function(e,n){return t.reduceSizeFilter.regResIndexes.includes(n)}));i.encodedText=c.encode(o.join(" "))}}else i.encodedText=c.encode(e.GetContent());y.SendVideoHar(this.id,i)}}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=E},6269:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(1645),s=function(){return e=function e(t,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trafficSource=t,this.requestMethod=n,this.url=r,this.type=i,this.content=o,this.SetEncodedPostBody(a)},n=[{key:"IsXHRvalid",value:function(e){return e&&e.hasOwnProperty("requestMethod")&&e.hasOwnProperty("url")&&""!==e.url}}],(t=[{key:"SetEncodedPostBody",value:function(e){e&&"string"==typeof e&&e.length>0&&(this.encodedPostBody=a.encode(e))}},{key:"GetEncodedPostBody",value:function(){return this.encodedPostBody?this.encodedPostBody:null}},{key:"IsEncodedPostBodyExist",value:function(){return!!this.encodedPostBody}},{key:"GetTrafficSource",value:function(){return this.trafficSource}},{key:"GetRequestMethod",value:function(){return this.requestMethod}},{key:"GetUrl",value:function(){return this.url}},{key:"GetType",value:function(){return this.type}},{key:"GetContent",value:function(){return this.content}},{key:"SetContent",value:function(e){this.content=e}},{key:"SetUrl",value:function(e){this.url=e}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=s},4707:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2315),s=n(1453),u=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t},(t=[{key:"InjectXhrDetector",value:function(e){if(document.head){var t=document.createElement("script");this.setAttributes(t,e),document.head.appendChild(t)}}},{key:"setAttributes",value:function(e,t){var n=a.getURL("../executers/".concat(s.VIDEO_TRAFFIC_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("data-bis-config",JSON.stringify(t.config.filterLists.blacklistIframeSrc)),e.src=n}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=u},3791:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var u=n(1453),c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.Config=n}return t=e,r=[{key:"CreateRegExp",value:function(e){var t=e.replace(/.*\/([gimy]*)$/,"$1"),n=e.replace(new RegExp("^/(.*?)/"+t+"$"),"$1");return new RegExp(n,t)}}],(n=[{key:"Validate",value:function(e){var t=[],n=!1;if(e&&(e.GetTrafficSource()===u.VIDEO_TRAFFIC_SOURCE_HTML?(t=this.Config.GetVideoValidatorsForHTML(),n=!0):e.GetTrafficSource()===u.VIDEO_TRAFFIC_SOURCE_XHR?(t=this.Config.GetVideoValidatorsForXHR(),n=!0):e.GetTrafficSource()===u.VIDEO_TRAFFIC_SOURCE_JS&&(t=this.Config.GetVideoValidatorsForJS(),n=!0),n)){var r,o=i(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(this.ValidateUseConfiguration(e,a))return this.specificFilterCandidate(e,a)}}catch(e){o.e(e)}finally{o.f()}}return!1}},{key:"ValidateUseConfiguration",value:function(t,n){for(var r=[],i=0,o=Object.keys(n);i<o.length;i++){var a=o[i];-1!==a.indexOf("Pattern")&&r.push(a)}for(var s=0,u={domainPattern:"GetUrl",mimePattern:"GetType",contentPattern:"GetContent"},c=0,l=r;c<l.length;c++){var d=l[c];try{var f=e.CreateRegExp(n[d]),h=u[d];s+=f.test(t[h]())?1:0}catch(e){}}return s===r.length}},{key:"specificFilterCandidate",value:function(e,t){return!(!e.IsEncodedPostBodyExist()&&"YT_FORCING_KEY"===t.alias)&&t}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();e.exports=c},2978:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2315),s=n(1453),u=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.options=n,this.AdBlockerAgent=r,this.active=!1,this.lastDetectTime=a.GetCurrentTimestampMs()-1e3,this.activateDetectorTime=a.GetCurrentTimestampMs(),this.detectorInterval=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.isObserverAlreadySet=!1,this.onScrollListenerHandler=null,this.onScrollListenerIsOn=!1,this.onScrollCallback=null},(t=[{key:"ActualizeDetector",value:function(){}},{key:"ActivateMutationObserver",value:function(){}},{key:"DeactivateMutationObserver",value:function(){}},{key:"Detector",value:function(){}},{key:"HideAd",value:function(e,t,n){}},{key:"CheckIfAd",value:function(e){}},{key:"CheckIfAdRendered",value:function(e){}},{key:"ExtractAd",value:function(e){}},{key:"ActivateDetector",value:function(){var e=this;this.active||(this.activateDetectorTime=a.GetCurrentTimestampMs(),this.active=!0,this.options.firstDetectionAfterActivationTimeoutMs&&this.options.firstDetectionAfterActivationTimeoutMs>0&&setTimeout((function(){e.DetectCandidates(s.AD_DETECTOR_INITIATOR_ACTIVATION)}),this.options.firstDetectionAfterActivationTimeoutMs),this.startIntervalDetectCandidates(s.AD_DETECTOR_INITIATOR_TIMER),this.options.useObserver&&this.IsActualByKeyWordInUrl&&(this.observerNodesListenerInterval=setInterval((function(){e.observerNodesChecksAmount=e.observerNodesChecksAmount+1,e.ActivateMutationObserver(),(e.isObserverAlreadySet||e.observerNodesChecksAmount>e.options.observerNodesChecksMaxAmount)&&(clearInterval(e.observerNodesListenerInterval),e.observerNodesListenerInterval=null,e.observerNodesChecksAmount=0,e.activateOnScrollEvent())}),this.options.observerNodesCheckIntervalMs)))}},{key:"DeactivateDetector",value:function(e){e===s.AD_DETECTOR_INITIATOR_URL&&(this.DeactivateMutationObserver(),(this.onScrollCallback||this.onScrollListenerIsOn)&&(window.removeEventListener("scroll",this.onScrollCallback),this.onScrollCallback=null,this.onScrollListenerIsOn=!1,this.onScrollListenerHandler&&(clearTimeout(this.onScrollListenerHandler),this.onScrollListenerHandler=null))),this.detectorInterval&&(clearInterval(this.detectorInterval),this.detectorInterval=null),this.observerNodesListenerInterval&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0),this.activateDetectorTime=a.GetCurrentTimestampMs(),this.lastDetectTime=a.GetCurrentTimestampMs()-1e3,this.active=!1}},{key:"DetectCandidates",value:function(e){if(this.ActualizeDetector()&&this.IsActualByKeyWordInUrl){var t=a.GetCurrentTimestampMs();a.GetCurrentTimestampMs()-this.activateDetectorTime>this.options.maxActualizeDetectorWaitTimeMs?this.checkLimits(e):t-this.lastDetectTime>this.options.minTimeAfterLastDetectionMs&&(this.lastDetectTime=t,this.Detector())}else this.checkLimits(e)}},{key:"IsActualByKeyWordInUrl",get:function(){var e=this.options.urlInvalidKeyWord,t=this.options.urlValidationByKeyWord;if(!e&&!t)return!0;var n=window.location.href,r=!!e&&e.some((function(e){return n.includes(e)})),i=!t||n.includes(t);return!r&&i}},{key:"checkLimits",value:function(e){return!(this.options.maxActualizeDetectorWaitTimeMs&&a.GetCurrentTimestampMs()-this.activateDetectorTime>this.options.maxActualizeDetectorWaitTimeMs&&(this.DeactivateDetector(e),1))}},{key:"activateOnScrollEvent",value:function(){this.options.useOnScroll&&!this.onScrollListenerIsOn&&this.IsActualByKeyWordInUrl&&this.ActualizeDetector()&&(this.onScrollCallback=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollCallback),this.onScrollListenerIsOn=!0)}},{key:"onScroll",value:function(e){var t=this;this.DetectCandidates(s.AD_DETECTOR_INITIATOR_SCROLL_EVENT),this.startIntervalDetectCandidates(s.AD_DETECTOR_INITIATOR_SCROLL_EVENT),window.removeEventListener("scroll",this.onScrollCallback),this.onScrollListenerIsOn=!1,this.onScrollListenerHandler=setTimeout((function(){window.addEventListener("scroll",t.onScrollCallback),t.onScrollListenerIsOn=!0,clearTimeout(t.onScrollListenerHandler),t.onScrollListenerHandler=null}),this.options.onScrollTimeout)}},{key:"startIntervalDetectCandidates",value:function(e){var t=this;this.detectorInterval||(this.detectorInterval=setInterval((function(){t.DetectCandidates(e)}),this.options.detectionIntervalMs))}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=u},4140:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2621),h=n(2315),y=n(1645),E=n(1453),A=n(7769),v=n(5837),m=n(7341),T=n(2252),b=n(2605),S=n(6070),_=n(5121),g=n(8967),p=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=u(this,t,[e])).available=!1,i.onPageRefreshed=i.onPageUrlChanged,i.fbConfig=n.FacebookConfig,i.AdBlockerAgent=r,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"onPageUrlChanged",value:function(e,t){var n=this;this.available&&setTimeout((function(){n.DeactivateDetectors(E.AD_DETECTOR_INITIATOR_URL),n.ActivateDetectors()}),50)}},{key:"ActivateDetector",value:function(e){e===E.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.fbContent=document.querySelector(this.fbConfig.FB_CONTENT),this.fbContent&&(this.VideoTrafficDetector=new g(this.id),this.VideoTrafficDetector.InjectDetector(),this.DetectorFeed=new T(this.id,this.fbConfig.FEED_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorFeed.HideAd=this.HideAd.bind(this),this.DetectorFeed.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorFeed.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorRightColumn=new S(this.id,this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorRightColumn.HideAd=this.HideAd.bind(this),this.DetectorRightColumn.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorRightColumn.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorWatch=new b(this.id,this.fbConfig.FEED_WATCH_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorWatch.HideAd=this.HideAd.bind(this),this.DetectorWatch.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorWatch.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorMarketplace=new _(this.id,this.fbConfig.MARKETPLACE_ADS_CONFIG.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorMarketplace.HideAd=this.HideAd.bind(this),this.DetectorMarketplace.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorMarketplace.ExtractAd=this.ProcessFbCreative.bind(this),this.ActivateDetectors())}},{key:"ActivateDetectors",value:function(){this.DetectorRightColumn.ActivateDetector(),this.DetectorFeed.ActivateDetector(),this.DetectorWatch.ActivateDetector(),this.DetectorMarketplace.ActivateDetector()}},{key:"DeactivateDetectors",value:function(e){this.DetectorRightColumn.DeactivateDetector(e),this.DetectorFeed.DeactivateDetector(e),this.DetectorWatch.DeactivateDetector(e),this.DetectorMarketplace.DeactivateDetector(e)}},{key:"ProcessFbCreative",value:function(e,t,n){try{var r=!1;if(e){var i=document.querySelector("[".concat(E.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));if(i)if(this.IsAdContentRendered(i,m.GetMinImgsSpacePercentag(this.fbConfig,n))){r=this.IsVideoCreative(i),v.SendCandidatePlacementsCount(this.id,1,E.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK,null);var o={x:0,y:0};if(m.IsPostHidden(i)){i.setAttribute(E.ATTRIBUTE_BIS_SIZE,h.ToJSON(m.GetPostContainerSize(i)));var a=i.getAttribute(E.ATTRIBUTE_BIS_HIDE_LEFT_OFFSET);a&&(o.x=parseInt(a))}else h.SetFullSizeToElement(i);for(var s=i.querySelectorAll("*"),u=0;u<s.length;u++)h.SetFullSizeToElement(s[u],null,o);var c=[];c.push(this.BuildCreative(i,r,t,n)),this.SendFacebookCandidates(c),f.CONFIG_MARK_AD_CANDIDATES&&f.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&(this.IsVideoCreative(i)?i.style.cssText+=E.STYLES_OUTLINE_VIDEO_AD:i.style.cssText+=E.STYLES_OUTLINE_SUCCESS_DETECT)}else i.removeAttribute&&i.removeAttribute(E.ATTRIBUTE_BIS_ID)}}catch(e){}}},{key:"BuildCreative",value:function(e,t,n,r){var o,a=m.GetPostContainerSize(e),s=Array.from(document.querySelectorAll("link")),u=Array.from(document.querySelector("head").querySelectorAll("style[nonce]")),c='<html><head><meta charset="utf-8">',l=i(s.concat(u));try{for(l.s();!(o=l.n()).done;)c+=o.value.outerHTML}catch(e){l.e(e)}finally{l.f()}c+="</head><body style='position:absolute; top:0px; left:0px; width:".concat(a.w,"px; height:").concat(a.h,"px;'>").concat(e.outerHTML,"</body></html>"),this.AdBlockerAgent.IsEnabledForFacebook()&&null!=n&&n.length&&c.includes(n)&&(c=c.replace(n,""));var d="",f=!1;this.fbConfig.ABOUT_SECTION_CONFIG&&this.fbConfig.ABOUT_SECTION_CONFIG.LOAD_ABOUT_PAGE&&(f=!0),this.fbConfig&&f&&(this.DetectorFeed&&r===E.FACEBOOK_AD_PLACEMENT_TYPE_FEED?d=this.DetectorFeed.GetAboutPageLink(e):this.DetectorMarketplace&&r===E.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE?d=this.DetectorMarketplace.GetAboutPageLink(e):this.DetectorWatch&&r===E.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH&&(d=this.DetectorWatch.GetAboutPageLink(e)));var h={content:y.encode(c),adPlacementType:r,designVersion:E.FACEBOOK_DESIGN_VERSION_NEW,aboutPageLink:d,aboutSectionContent:"",size:a};return t&&(h.videoData={videoId:"",videoUrl:"",audioUrl:""}),e.setAttribute(E.ATTRIBUTE_BIS_STATUS,"extracted"),h}},{key:"HideAd",value:function(e,t,n){var r="";return e&&t&&e&&e.style&&(r="position: absolute !important; width: ".concat(t.w,"px; overflow: hidden; height: 0px;"),m.IsPostHidden(e)||(e.style.cssText+=r,e.setAttribute(E.ATTRIBUTE_BIS_HIDE_HEIGHT,t.h),e.setAttribute(E.ATTRIBUTE_BIS_HIDE_WIDTH,t.w),e.setAttribute(E.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"))),e.style.cssText}},{key:"IsAdContentRendered",value:function(e,t){var n=m.GetPostContainerSize(e);if(h.GetImagesSpacePercentage(this.fbConfig.TAGS_FOR_LOADING_CHECK,e,n).some((function(e){return e>=t})))return!0;var r=e.querySelector("a[".concat(E.ATTRIBUTE_BIS_LABEL,"]"));return r&&r.removeAttribute(E.ATTRIBUTE_BIS_LABEL),!1}},{key:"IsVideoCreative",value:function(e){return 0!==e.querySelectorAll("video").length}},{key:"AddNeededStylesForElement",value:function(e,t){try{if(t.w<=3&&t.h<=3&&("SPAN"===e.nodeName||"DIV"===e.nodeName)){var n=e.getAttribute("class");if(n&&n.includes("accessible_elem")){var r=getComputedStyle(e);e.setAttribute(E.ATTRIBUTE_BIS_STYLE,"clip:".concat(r.getPropertyValue("clip"),"; height:").concat(r.getPropertyValue("height"),"; overflow:").concat(r.getPropertyValue("overflow"),"; position:").concat(r.getPropertyValue("position"),"; white-space:").concat(r.getPropertyValue("white-space"),"; width:").concat(r.getPropertyValue("width"),";"))}}}catch(e){}}},{key:"LoadAboutPageAndSendCandidates",value:function(e){var t=this;if(e&&e.length){var n=e[0].aboutPageLink;n&&n.length?fetch(n,{headers:this.fbConfig.ABOUT_SECTION_CONFIG.HEADERS,method:"GET"}).then((function(n){try{if(200===n.status)return n.text();t.SendFacebookCandidates(e)}catch(e){}})).then((function(n){var r="",i=n.split(/\r?\n/);if(i.length)for(var o=0;o<i.length;o++)!new RegExp(t.fbConfig.ABOUT_SECTION_CONFIG.CONTENT_CHECK_STRING).test(i[o])||r.includes("delegate_page_id")&&r.includes("about_app_sections")||(r+=i[o]);e[0].aboutSectionContent=y.encode(r),t.SendFacebookCandidates(e)})).catch((function(n){t.SendFacebookCandidates(e)})):this.SendFacebookCandidates(e)}}},{key:"SendFacebookCandidates",value:function(e){v.SendAdCandidates(this.id,e,E.MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK,null),this.AdBlockerAgent.IsEnabledForFacebook()&&this.AdBlockerAgent.SetHiddenAmount(e.length)}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(A);e.exports=p},7341:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(1453),s=n(2315),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"GetVisibleText",value:function(t){var n=t.querySelectorAll(":scope > *");if(0!==n.length)return Array.prototype.slice.call(n).map(e.GetVisibleText).flat();if("none"!==getComputedStyle(t).display){var r=t.innerText;try{if(0===r.length&&t.getAttribute){var i=t.getAttribute("data-content");i&&i.length&&(r=i)}}catch(t){}return r}return""}},{key:"GetVisibleSpansText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e.hasAttribute&&e.hasAttribute("bis_sponsor_checked")&&3==e.getAttribute("bis_sponsor_checked"))return"";var r=e.querySelectorAll(t),i="",o=parseInt(e.getAttribute("bis_sponsor_checked"))||0;return r.forEach((function(e){var t=getComputedStyle(e);if("none"!==t.display&&"absolute"!==t.position)try{var n=Array.from(e.childNodes).filter((function(e){return 3===e.nodeType})).map((function(e){return e.nodeValue.trim()})).reduce((function(e,t){return e+t}),"");if(0===n.length&&e.getAttribute){var r=e.getAttribute("data-content");r&&r.length&&(n=r)}i+=n}catch(e){}})),e.setAttribute("bis_sponsor_checked",parseInt(o)+1),i&&n.length&&!n.includes(i)&&(i=this.checkLettersOfAlly(i,n)),i}},{key:"checkLettersOfAlly",value:function(e,t){for(var n=e.split(""),r=n.length-1,i=t.length,o=1,a=!1,s=0,u="";!a&&o<=i;){var c=t[o-1],l=n[s];-1!==c.indexOf(l)&&c.length===n.length?r!==s?s+=1:r===s&&e.length===c.length?(a=!0,u=c):(o+=1,s=0):(o+=1,s=0)}return u}},{key:"HideSateliteSponsoredString",value:function(e,t){try{t&&t.forEach((function(t){if(t.innerText){var n=t.innerText;e.SPONSORED_TEXTS.some((function(e){return-1!==n.indexOf(e)}))&&(t.style="display:none")}}))}catch(e){}}},{key:"GetMinImgsSpacePercentag",value:function(e,t){return t===a.FACEBOOK_AD_PLACEMENT_TYPE_FEED?e.FEED_PAGE.MIN_IMGS_SPACE_PERCENTAGE:t===a.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE?e.MARKETPLACE_ADS_CONFIG.MIN_IMGS_SPACE_PERCENTAGE:t===a.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN?e.RIGHT_COLUMN_ADS_CONFIG.MIN_IMGS_SPACE_PERCENTAGE:t===a.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH?e.FEED_WATCH_PAGE.MIN_IMGS_SPACE_PERCENTAGE:0}},{key:"IsInitiallyRendered",value:function(t,n){return!!e.IsPostHidden(t)||n.w>0&&n.h>10}},{key:"IsPostHidden",value:function(e){return"hidden"===e.getAttribute(a.ATTRIBUTE_BIS_HIDE_STATUS)}},{key:"GetPostContainerSize",value:function(t){var n=s.GetFullElementSize(t);if(e.IsPostHidden(t)){var r=t.getAttribute(a.ATTRIBUTE_BIS_HIDE_HEIGHT);r&&(n.h=parseInt(r));var i=t.getAttribute(a.ATTRIBUTE_BIS_HIDE_WIDTH);i&&(n.w=parseInt(i));var o=t.getAttribute(a.ATTRIBUTE_BIS_HIDE_LEFT_OFFSET);o&&(n.x=n.x+parseInt(o),n.abs_x=n.abs_x+parseInt(o))}return n}}],(n=null)&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();e.exports=u},2252:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2978),h=n(7341),y=n(2315),E=n(1453),A=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,r])).fbConfig=i,o.fbFeed=null,o.fbFeedObserver=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"ActualizeDetector",value:function(){return!!this.isValidUrl&&(this.fbFeed=this.FeedContainer,!!this.fbFeed)}},{key:"ActivateMutationObserver",value:function(){var e=this;this.fbFeed?(this.fbFeedObserver||(this.fbFeedObserver=new MutationObserver(this.DetectCandidates.bind(this,E.AD_DETECTOR_INITIATOR_MUTATION)),this.fbFeedObserver.observe(this.fbFeed,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.fbFeedObserver&&(e.fbFeedObserver.disconnect(),e.fbFeedObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"FeedContainer",get:function(){for(var e=this.fbConfig.FEED_PAGE.MIN_HEIGHT,t=this.fbConfig.FEED_PAGE.FEED_QUERIES,n=t.length,r=!1,i=null,o=0;o<n&&!r;o++){var a=t[o],s=document.querySelector(a);if(s){var u=s.offsetHeight;if(s.children.length>2&&u>e)i=s,r=!0;else if(s.nodeName.search(/span/i)>-1){var c=s.nextElementSibling;if(c&&c.children){var l=c.offsetHeight;1===c.children.length&&c.querySelector("h3")?(i=c.querySelector("h3").parentElement,r=!0):2===c.children.length?(s=c.querySelector("div:not([class])"))&&s.offsetHeight>e&&(i=s,r=!0):c.children.length>1&&l>e&&(i=c,r=!0)}}}}return i}},{key:"DeactivateMutationObserver",value:function(){this.fbFeedObserver&&(this.fbFeedObserver.disconnect(),this.fbFeedObserver=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){var e=this.FeedContainer;if(e){var t=Array.from(e.children);if(t.length&&1!==t.length||(t=document.querySelectorAll(this.fbConfig.FEED_PAGE.POSTS_QUERY)),!t)return;for(var n=0;n<t.length;n++){var r=t[n],i=y.GetElementSize(r);if(!r.hasAttribute(E.ATTRIBUTE_BIS_ID)&&h.IsInitiallyRendered(r,i)&&this.CheckIfAdRendered(r,h.GetMinImgsSpacePercentag(this.fbConfig,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED))&&this.CheckIfAd(r)){var o="";this.AdBlockerAgent.IsEnabledForFacebook()&&(o=this.HideAd(t[n],i,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED)),this.addCoverImageSrcAttribute(r);var a=y.GenerateAndSetBisIdToFBAds(r),s=this.options.extractAdStaticPartTimeoutMs+y.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.AddHiddenTextTags(r),setTimeout(this.ReadyToExtractAd.bind(this,a,o),s)}}}}},{key:"ReadyToExtractAd",value:function(e,t){try{if(e){var n=document.querySelector("[".concat(E.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));if(!n)return;var r=n.querySelector("[".concat(E.ATTRIBUTE_BIS_LABEL,'="fb_feed_ad"]'));r?this.ExtractAd(e,t,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED):null!==r&&(r.removeAttribute(E.ATTRIBUTE_BIS_ID),n.removeAttribute(E.ATTRIBUTE_BIS_ID))}}catch(e){}}},{key:"CheckIfAd",value:function(e){for(var t=this.fbConfig.POSSIBLE_SPONSORED_TEXT_QUERIES,n=!1,r=0;r<t.length&&!n;r++){var i=t[r],o=e.querySelectorAll(i);if((n=this.GetTextCustom(o))||(n=this.GetTextFromXlink(o)),n||(n=this.GetTextIfUseCanvas(o)),n){e.firstElementChild.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_feed_ad");break}}return!!n}},{key:"GetTextCustom",value:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.innerText,i=n.getAttribute(this.options.attributeWithSponsorAlly),o=i?[r,i]:r;if("string"==typeof r&&r.length&&this.isTagSponsored(o))return!0;if(r&&r.length>=2&&!n.hasAttribute(E.ATTRIBUTE_BIS_LABEL)){var a=h.GetVisibleSpansText(n,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(a!==r&&a!==i&&"string"==typeof a&&a.length&&this.isTagSponsored(a))return!0}}return!1}},{key:"GetTextFromXlink",value:function(e){var t,n=this,r="",o=i(e);try{var a,s=function(){var e=t.value;if(!e.hasAttribute(n.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG))return 0;var i=e.parentElement,o="";if(null!=i&&i.hasAttribute("bis_processed")&&null!=i&&i.hasAttribute(E.ATTRIBUTE_BIS_LABEL))return 0;var a=Array.from(i.children);if(a&&a.forEach((function(e){var t=e.getAttribute(n.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG),r=document.querySelector(t);r&&("text"===r.nodeName.toLowerCase()?o+=r.textContent:"svg"===r.nodeName.toLowerCase()&&(o=n.GetTextFromXlink([r.firstElementChild])))})),i.setAttribute("bis_processed",""),n.isTagSponsored(o))return r=o,i.removeAttribute("bis_processed"),{v:r};r=""};for(o.s();!(t=o.n()).done;)if(0!==(a=s())&&a)return a.v}catch(e){o.e(e)}finally{o.f()}return r}},{key:"GetTextIfUseCanvas",value:function(e){var t,n="",r=i(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if("canvas"===o.nodeName.toLowerCase()&&!o.hasAttribute(E.ATTRIBUTE_BIS_LABEL)){var a=this.CheckAndGetFieldName(o);if("string"==typeof a&&this.isTagSponsored(a)){n=a;break}}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"CheckAndGetFieldName",value:function(e){if(e.hasAttribute("bis-text"))return e.getAttribute("bis-text");window.postMessage({attribute:"bis-text"},window.location.origin)}},{key:"AddHiddenTextTags",value:function(e){var t=e.querySelectorAll("svg>use");if(t)for(var n=0;n<t.length;n++){var r=t[n],i=r.parentElement,o=r.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG),a=document.querySelector(o).cloneNode(!0);a.style.display="none",a.id=a.id+"_bis",i&&i.appendChild(a)}}},{key:"isTagSponsored",value:function(e){var t=this,n=!1;if(!e)return n;if("string"==typeof e)n=this.fbConfig.SPONSORED_TEXTS.some((function(t){return t===e}));else{var r,o=i(e);try{var a=function(){var e=r.value;if(n=t.fbConfig.SPONSORED_TEXTS.some((function(t){return t===e})))return 1};for(o.s();!(r=o.n()).done&&!a(););}catch(e){o.e(e)}finally{o.f()}}return n}},{key:"GetAboutPageLink",value:function(e){var t="",n=this.fbConfig.ABOUT_SECTION_CONFIG,r=e.querySelectorAll(n.QUERY_ABOUT_PAGE_HREF);if(null==r||!r.length)return t;for(var i="",o=function(){var t=r[a];if(!t.href)return 0;if(!n.ABOUT_PAGE_BAD_WORDS_MATCHES.every((function(e){return-1===t.href.indexOf(e)})))return 0;var o=e.getBoundingClientRect().top,s=t.getBoundingClientRect();s.top>o&&s.top-o<=n.MAX_DISTANCE_FROM_POST_TOP&&(i=t.href)},a=0;a<r.length;a++)o();if(!i.length)return t;var s=i.substring(n.HREF_PREFIX.length,i.length),u=s.substring(0,s.search(/(\/|\?)/));if("profile.php"===u&&s.includes("id=")){var c=new RegExp(n.QUERY_GET_USER_ID_FROM_HREF);(u=s.match(c))&&u.length&&u[1]&&(u=u[1])}return t=n.ABOUT_PAGE_TEMPLATE.replace("%1",u)}},{key:"isValidUrl",get:function(){return!this.fbConfig.FEED_PAGE.INVALID_URL_PATHS.some((function(e){return window.location.href.includes(e)}))}},{key:"addCoverImageSrcAttribute",value:function(e){var t=e.querySelector(this.fbConfig.FEED_PAGE.COVER_IMAGE_QUERY);if(t&&t.hasAttribute("src")){var n=t.getAttribute("src");e.setAttribute("data-cover-image-src",n)}}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(f);e.exports=A},5121:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2978),h=n(2315),y=n(7341),E=n(1453),A=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,r])).fbConfig=i,o.fbMarketplace=null,o.fbMarketplaceObserver=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"ActualizeDetector",value:function(){return this.fbMarketplace=this.MainContainer,!!this.fbMarketplace}},{key:"MainContainer",get:function(){return document.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.CONTAINER)}},{key:"ActivateMutationObserver",value:function(){var e=this;this.fbMarketplace?(this.fbMarketplaceObserver||(this.fbMarketplaceObserver=new MutationObserver(this.DetectCandidates.bind(this,E.AD_DETECTOR_INITIATOR_MUTATION)),this.fbMarketplaceObserver.observe(this.fbMarketplace,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.fbMarketplaceObserver&&(e.fbMarketplaceObserver.disconnect(),e.fbMarketplaceObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.fbMarketplaceObserver&&(this.fbMarketplaceObserver.disconnect(),this.fbMarketplaceObserver=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){var e=this.MainContainer.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.CARDS);if(e&&e.length)for(var t=0;t<e.length;t++){var n=e[t],r=h.GetElementSize(n);if(this.addCoverImageSrcAttribute(n),!n.hasAttribute(E.ATTRIBUTE_BIS_ID)&&y.IsInitiallyRendered(n,r)&&(this.addCoverImageSrcAttribute(n),this.CheckIfAd(n))){if(this.AdBlockerAgent.IsEnabledForFacebook()){y.HideSateliteSponsoredString(this.fbConfig,document.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.SATELITE_SPONSORED_STRING));var i=this.HideAd(n,r,E.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE)}if(this.CheckIfAdRendered(n,y.GetMinImgsSpacePercentag(this.fbConfig,E.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE))){var o=h.GenerateAndSetBisIdToFBAds(n),a=this.options.extractAdStaticPartTimeoutMs+h.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.addCoverImageSrcAttribute(n),setTimeout(this.ExtractAd.bind(this,o,i,E.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE),a)}}}}},{key:"addCoverImageSrcAttribute",value:function(e){var t=e.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.COVER_IMAGE_QUERY);if(t&&t.hasAttribute("src")&&!e.hasAttribute("data-cover-image-src")){var n=t.getAttribute("src");e.setAttribute("data-cover-image-src",n)}}},{key:"ReadyToExtractAd",value:function(e,t){try{if(e){var n=document.querySelector("[".concat(E.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));n&&(y.IsPostHidden(n)&&n.setAttribute(E.ATTRIBUTE_BIS_LABEL,"style"),this.ExtractAd(e,t,E.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE))}}catch(e){}}},{key:"CheckIfAd",value:function(e){var t=this,n=!1;if(e&&this.MainContainer){var r=e.getBoundingClientRect(),o=Array.from(this.MainContainer.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.SPONSOR_BLOCKS));if(o&&o.length){var a,s=i(o);try{var u=function(){var o=a.value;if(o.getBoundingClientRect().x===r.x){var s=y.GetVisibleSpansText(o,t.fbConfig.VISIBLE_SPANS_TEXT,t.fbConfig.SPONSORED_TEXTS);if(t.fbConfig.SPONSORED_TEXTS.some((function(e){return-1!==s.indexOf(e)})))return e.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_marketplace_ad"),n=!0,0}else if(t.fbConfig.MARKETPLACE_ADS_CONFIG.PREV_SIBLING_SPONSOR_BLOCK_QUERY_PATH){var u,c=e,l=i(t.fbConfig.MARKETPLACE_ADS_CONFIG.PREV_SIBLING_SPONSOR_BLOCK_QUERY_PATH);try{for(l.s();!(u=l.n()).done;){var d=u.value;if(c[d])c=c[d];else if(d.includes(",")){var f=d.split(",");c=c[f[0]](f[1])}}}catch(e){l.e(e)}finally{l.f()}if(c){var h=y.GetVisibleSpansText(c,t.fbConfig.VISIBLE_SPANS_TEXT,t.fbConfig.SPONSORED_TEXTS);if(t.fbConfig.SPONSORED_TEXTS.some((function(e){return-1!==h.indexOf(e)})))return e.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_marketplace_ad"),n=!0,0}}};for(s.s();!(a=s.n()).done&&0!==u(););}catch(e){s.e(e)}finally{s.f()}}}return n}},{key:"GetAboutPageLink",value:function(e){var t="",n=this.fbConfig.ABOUT_SECTION_CONFIG,r=e.querySelector("*[".concat(E.ATTRIBUTE_BIS_LABEL,"='fb_marketplace_ad']")),i=e.querySelectorAll("a[href^='".concat(n.HREF_PREFIX,"'"));if(r&&i&&i.length){for(var o="",a=r.getBoundingClientRect().top,s=a-e.getBoundingClientRect().top,u=0;u<i.length;u++){var c=i[u].getBoundingClientRect();i[u].href&&c.top<a&&a-c.top<s&&(s=a-c.top,o=i[u].href)}if(o.length){var l=o.substring(n.HREF_PREFIX.length,o.length),d=l.substring(0,l.search(/(\/|\?)/));if("profile.php"===d&&l.includes("id=")){var f=new RegExp(n.QUERY_GET_USER_ID_FROM_HREF);(d=l.match(f))&&d.length&&d[1]&&(d=d[1])}t=n.ABOUT_PAGE_TEMPLATE.replace("%1",d)}}return t}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(f);e.exports=A},6070:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2978),h=n(2315),y=n(7341),E=n(1453),A=n(2621),v=(n(1453),function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,r])).fbConfig=i,o.fbRightColumn=null,o.fbRightColumnObserver=null,o.options=n,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"ActualizeDetector",value:function(){return this.fbRightColumn=this.getRightColumnContainer(),!!this.fbRightColumn}},{key:"ActivateMutationObserver",value:function(){var e=this;this.fbRightColumn?(this.fbRightColumnObserver||(this.fbRightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,E.AD_DETECTOR_INITIATOR_MUTATION)),this.fbRightColumnObserver.observe(this.fbRightColumn,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.fbRightColumnObserver&&(e.fbRightColumnObserver.disconnect(),e.fbRightColumnObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.fbRightColumnObserver&&(this.fbRightColumnObserver.disconnect(),this.fbRightColumnObserver=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){var e=this.fbRightColumn.querySelectorAll(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.CARDS);if(e&&e.length)for(var t=0;t<e.length;t++){var n=null,r=Array.from(this.fbRightColumn.querySelectorAll(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.SATELITE_SPONSORED_STRING)),i=h.GetElementSize(e[t]);if(y.IsInitiallyRendered(e[t],i))if(e[t].hasAttribute(E.ATTRIBUTE_BIS_ID))this.CheckIfAdRotated(e[t])&&e[t].removeAttribute&&(e[t].removeAttribute(E.ATTRIBUTE_BIS_ID),e[t].removeAttribute(E.ATTRIBUTE_BIS_SIZE),e[t].removeAttribute(E.ATTRIBUTE_BIS_STATUS),A.CONFIG_MARK_AD_CANDIDATES&&A.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&"border: 6px solid green !important;"===e[t].style.cssText&&(e[t].style.cssText=""));else if(this.CheckIfAd(e[t],r)&&(this.AdBlockerAgent.IsEnabledForFacebook()&&(y.HideSateliteSponsoredString(this.fbConfig,r),n=this.HideAd(e[t],i,E.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN)),this.CheckIfAdRendered(e[t],y.GetMinImgsSpacePercentag(this.fbConfig,E.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN)))){var o=h.GenerateAndSetBisIdToFBAds(e[t]),a=this.options.extractAdStaticPartTimeoutMs+h.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);setTimeout(this.ExtractAd.bind(this,o,n,E.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN),a)}}}},{key:"CheckIfAd",value:function(e,t){var n=this,r=this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.IMPOSSIBLE_HREF_REG_FOR_AD,o=this.fbConfig.SPONSORED_TEXTS;if(null!=t&&t.length){var a,s=i(t);try{var u,c=function(){var e=a.value.innerText;if(o.some((function(t){return t===e})))return{v:!0}};for(s.s();!(a=s.n()).done;)if(u=c())return u.v}catch(e){s.e(e)}finally{s.f()}}var l=Array.from(e.querySelectorAll("".concat(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.IF_AD,", [").concat(this.options.attributeWithSponsorAlly,"]")));return!!l.length&&l.some((function(e){var t=e.href;if(-1===(null==t?void 0:t.indexOf(r)))return!0;var i=e.getAttribute(n.options.attributeWithSponsorAlly);return!!i&&o.some((function(e){return i===e}))}))}},{key:"CheckIfAdRotated",value:function(e){var t=!1;if(e&&"extracted"===e.getAttribute(E.ATTRIBUTE_BIS_STATUS)){var n=0,r=0,i=e.querySelectorAll("*");i&&i.length&&(i.forEach((function(e){e.getAttribute(E.ATTRIBUTE_BIS_SIZE)?n+=1:r+=1})),(0===n&&r>0||n>0&&r>0&&(r/i.length*100|0)>50)&&(t=!0))}return t}},{key:"getRightColumnContainer",value:function(){return document.querySelector(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.CONTAINER)}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(f));e.exports=v},8967:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(1453),s=n(2315),u=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t},(t=[{key:"InjectDetector",value:function(){if(document.head){var e=document.createElement("script");this.setAttributes(e),document.head.appendChild(e)}}},{key:"setAttributes",value:function(e){var t=s.getURL("../executers/".concat(a.FACEBOOK_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("nonce",""),e.src=t}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=u},2605:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2978),h=n(7341),y=n(2315),E=n(1453),A=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,r])).fbConfig=i,o.fbWatch=null,o.fbWatchObserver=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"ActualizeDetector",value:function(){return this.fbWatch=this.FeedWatchContainer,!!this.fbWatch}},{key:"ActivateMutationObserver",value:function(){var e=this;this.fbWatch?(this.fbWatchObserver||(this.fbWatchObserver=new MutationObserver(this.DetectCandidates.bind(this,E.AD_DETECTOR_INITIATOR_MUTATION)),this.fbWatchObserver.observe(this.fbWatch,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.fbWatchObserver&&(e.fbWatchObserver.disconnect(),e.fbWatchObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"FeedWatchContainer",get:function(){for(var e=this.fbConfig.FEED_WATCH_PAGE.FEED_WATCH_QUERIES,t=e.length,n=!1,r=null,i=0;i<t&&!n;i++){var o=e[i],a=Array.from(document.querySelectorAll(o));if(a.length){var s=a.filter((function(e){return e.children&&e.children.length>2}));s.length&&1===s.length&&(r=s[0],n=!0)}}return r}},{key:"DeactivateMutationObserver",value:function(){this.fbWatchObserver&&(this.fbWatchObserver.disconnect(),this.fbWatchObserver=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){var e=this.fbWatch;if(e)for(var t=Array.from(e.children),n=0;n<t.length;n++){var r=t[n],i=y.GetElementSize(r);if(!r.hasAttribute(E.ATTRIBUTE_BIS_ID)&&h.IsInitiallyRendered(r,i)&&this.CheckIfAd(r)){var o="";if(this.AdBlockerAgent.IsEnabledForFacebook()&&(o=this.HideAd(r,i,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH)),this.CheckIfAdRendered(r,h.GetMinImgsSpacePercentag(this.fbConfig,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH))){var a=y.GenerateAndSetBisIdToFBAds(r),s=this.options.extractAdStaticPartTimeoutMs+y.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.AddHiddenTextTags(r),setTimeout(this.ReadyToExtractAd.bind(this,a,o),s)}}}}},{key:"ReadyToExtractAd",value:function(e,t){try{if(e){var n=document.querySelector("[".concat(E.ATTRIBUTE_BIS_ID,"=").concat(e,"]")),r=n.querySelector("[".concat(E.ATTRIBUTE_BIS_LABEL,'="fb_watch_ad"]'));n&&r?this.ExtractAd(e,t,E.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH):(r.removeAttribute(E.ATTRIBUTE_BIS_ID),n.removeAttribute(E.ATTRIBUTE_BIS_ID))}}catch(e){}}},{key:"CheckIfAd",value:function(e){for(var t=this.fbConfig.POSSIBLE_SPONSORED_TEXT_QUERIES,n=!1,r=0;r<t.length&&!n;r++){var i=t[r],o=e.querySelectorAll(i);if((n=this.GetTextCustom(o))||(n=this.GetTextFromXlink(o)),n||(n=this.GetTextIfUseCanvas(o)),n){e.firstElementChild.setAttribute(E.ATTRIBUTE_BIS_LABEL,"fb_watch_ad");break}}return!!n}},{key:"GetTextCustom",value:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.innerText,i=n.getAttribute(this.options.attributeWithSponsorAlly),o=i?[r,i]:r;if("string"==typeof r&&r.length&&this.isTagSponsored(o))return!0;if(r&&r.length>=2&&!n.hasAttribute(E.ATTRIBUTE_BIS_LABEL)){var a=h.GetVisibleSpansText(n,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(a!==r&&a!==i&&"string"==typeof a&&a.length&&this.isTagSponsored(a))return!0}}return!1}},{key:"GetTextFromXlink",value:function(e){var t,n=this,r="",o=i(e);try{var a,s=function(){var e=t.value;if(!e.hasAttribute(n.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG))return 0;var i=e.parentElement,o="";if(null!=i&&i.hasAttribute("bis_processed")&&null!=i&&i.hasAttribute(E.ATTRIBUTE_BIS_LABEL))return 0;var a=Array.from(i.children);if(a&&a.forEach((function(e){var t=e.getAttribute(n.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG),r=document.querySelector(t);r&&("text"===r.nodeName.toLowerCase()?o+=r.textContent:"svg"===r.nodeName.toLowerCase()&&(o=n.GetTextFromXlink([r.firstElementChild])))})),i.setAttribute("bis_processed",""),n.isTagSponsored(o))return r=o,i.removeAttribute("bis_processed"),{v:r};r=""};for(o.s();!(t=o.n()).done;)if(0!==(a=s())&&a)return a.v}catch(e){o.e(e)}finally{o.f()}return r}},{key:"GetTextIfUseCanvas",value:function(e){var t,n="",r=i(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if("canvas"===o.nodeName.toLowerCase()&&!o.hasAttribute(E.ATTRIBUTE_BIS_LABEL)){var a=this.CheckAndGetFieldName(o);if("string"==typeof a&&this.isTagSponsored(a)){n=a;break}}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"AddHiddenTextTags",value:function(e){var t=e.querySelectorAll("svg>use");if(t)for(var n=0;n<t.length;n++){var r=t[n],i=r.parentElement,o=r.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG),a=document.querySelector(o).cloneNode(!0);a.style.display="none",i&&i.appendChild(a)}}},{key:"isTagSponsored",value:function(e){var t=this,n=!1;if(!e)return n;if("string"==typeof e)n=this.fbConfig.SPONSORED_TEXTS.some((function(t){return t===e}));else{var r,o=i(e);try{var a=function(){var e=r.value;if(n=t.fbConfig.SPONSORED_TEXTS.some((function(t){return t===e})))return 1};for(o.s();!(r=o.n()).done&&!a(););}catch(e){o.e(e)}finally{o.f()}}return n}},{key:"GetAboutPageLink",value:function(e){var t="",n=this.fbConfig.ABOUT_SECTION_CONFIG,r=e.querySelectorAll(n.HREF_PREFIX_WATCH);if(null==r||!r.length)return t;for(var i="",o=function(){var t=r[a];if(!t.href)return 0;if(!n.ABOUT_PAGE_BAD_WORDS_MATCHES.every((function(e){return-1===t.href.indexOf(e)})))return 0;var o=e.getBoundingClientRect().top,s=t.getBoundingClientRect();s.top>o&&s.top-o<=n.MAX_DISTANCE_FROM_POST_TOP&&(i=t.href)},a=0;a<r.length;a++)o();if(!i.length)return t;var s=i.substring(n.HREF_TEMPLATE_WATCH.length,i.length),u=s.substring(0,s.search(/(\/|\?)/));if("profile.php"===u&&s.includes("id=")){var c=new RegExp(n.QUERY_GET_USER_ID_FROM_HREF);(u=s.match(c))&&u.length&&u[1]&&(u=u[1])}return t=n.ABOUT_PAGE_TEMPLATE.replace("%1",u)}},{key:"addCoverImageSrcAttribute",value:function(e){var t=e.querySelector(this.fbConfig.FEED_WATCH_PAGE.COVER_IMAGE_QUERY);if(t&&t.hasAttribute("src")){var n=t.getAttribute("src");e.setAttribute("data-cover-image-src",n)}}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(f);e.exports=A},7013:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var u=n(2315),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,o=[{key:"GetHyperlinkEmbeddedTargetUrlDataList",value:function(e,t,n){for(var r,i,o,a=u.QuerySelectorAll(t,"A[href]"),s=[],c=0;c<a.length;c++)if(r=a[c],!u.IsInFilterList(n,r.href)){o=(i=u.GetElementSize(r)).w*i.h;var l=r.querySelectorAll("img, canvas");if(l.length)for(var d=void 0,f=void 0,h=0;h<l.length;h++)(f=(d=u.GetElementSize(l[h])).w*d.h)>o&&(o=f,i.w=d.w,i.h=d.h);o>=100&&u.isValidUrl(r.href)&&s.push({href:r.href,square:o})}return s&&s.length,s}},{key:"GetDocumentEmbeddedTargetUrlDataList",value:function(e,t,n){var r=[this.strategyStrictFinalUrl,this.strategyScriptClickTag,this.strategyAppnexus,this.strategyNoscriptAnchors,this.strategyScriptAndMetaContentJsonKeyWords,this.strategyLookingForPropertyInsideWindow],i=this.processStrategyList(t,r,n);return i&&i.length,i}},{key:"processStrategyList",value:function(e,t,n){var r,o=[],a=i(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;try{var u=s(e,n);u&&u.href&&o.push(u)}catch(e){}}}catch(e){a.e(e)}finally{a.f()}return o}},{key:"strategyStrictFinalUrl",value:function(e,t){for(var n=u.QuerySelectorAll(e,'script[type="application/json"]'),r=0;r<n.length;r++){var i=n[r].outerText;if(i.length>1&&"{"===i[0]&&"}"===i[i.length-1]&&-1!=i.indexOf("targets")&&-1!=i.indexOf("redirectUrl")&&-1!=i.indexOf("finalUrl")){var o=JSON.parse(i);if(void 0!==o.targets&&void 0!==o.targets.redirectUrl&&void 0!==o.targets.redirectUrl.finalUrl){var a=o.targets.redirectUrl.finalUrl;if(u.isValidUrl(a))return{href:a,square:1e6}}}}}},{key:"strategyScriptClickTag",value:function(e,t){for(var n=u.QuerySelectorAll(e,"script"),r=0;r<n.length;r++){var i=n[r].outerText;if(i.length>1&&-1!==i.indexOf("clickTag")&&(i=i.replace(/\s/g,"")).startsWith('varclickTag="')&&i.endsWith('";')){var o=i.indexOf('"'),a=i.lastIndexOf('"'),s=i.substring(o+1,a);if(u.isValidUrl(s))return{href:s,square:1e6}}}}},{key:"strategyAppnexus",value:function(e,t){for(var n=u.QuerySelectorAll(e,".GoogleActiveViewElement script"),r=Array.from(n).map((function(e){return e.innerHTML})).filter((function(e){return e.indexOf("APPNEXUS.placement")>=0})),i=0;i<r.length;i++){var o=a(r[i]);if(u.isValidUrl(o))return{href:o,square:1e6}}function a(e){var t=(e=e.replace(/(\r\n|\n|\r|\s)/gm,"")).match(/APPNEXUS.placement\(".+","(.+)",.+/);return t&&t.length>1?t[1]:null}}},{key:"strategyNoscriptAnchors",value:function(e,t){for(var n=u.QuerySelectorAll(e,"noscript"),r=0;r<n.length;r++){var i=e.createElement("div");i.innerHTML=n[r].innerText;var o=i.querySelector("a[href]");if(o){var a=o.getAttribute("href");if(u.isValidUrl(a))return{href:a,square:1}}}}},{key:"strategyScriptAndMetaContentJsonKeyWords",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n){var o=f(n,t);return u.isValidUrl(o)?{href:o,square:999999}:void 0}var a,s=i(u.QuerySelectorAll(e,"script, meta[content]"));try{for(s.s();!(a=s.n()).done;){var c=a.value,l="script"===c.nodeName.toLowerCase()?c.outerText:c.getAttribute("content");if(l.length>1&&"{"===l[0]&&"}"===l[l.length-1]){var d=f(JSON.parse(l),t);if(u.isValidUrl(d))return{href:d,square:999999}}}}catch(e){s.e(e)}finally{s.f()}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=t.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(n.length>o)return null;var a,s=i(Object.getOwnPropertyNames(e));try{for(s.s();!(a=s.n()).done;){var c=a.value;try{var l=e[c];if(!l)return null;var d=n.concat(c);if("string"==typeof l&&l.length>1&&"{"===l[0]&&"}"===l[l.length-1]){var y=f(JSON.parse(l),t,d);if(y)return y}if("object"===r(l)){var E=f(l,t,d);if(E)return E}else if("string"==typeof l&&h(c,t)&&u.isValidUrl(l))return l}catch(e){}}}catch(e){s.e(e)}finally{s.f()}return null}function h(e,t){var n,r=function(e){var t=e.toLowerCase();return t.replace(/[^a-zA-Z]+/g,"")}(e),o=i(t.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS);try{for(o.s();!(n=o.n()).done;)if(r===n.value)return!0}catch(e){o.e(e)}finally{o.f()}return!1}}},{key:"strategyLookingForPropertyInsideWindow",value:function(t,n){var o,a=t.defaultView,s=i(n.WINDOW_PROPERTY_NAMES);try{for(s.s();!(o=s.n()).done;){var u=a[o.value];if(u){if("string"==typeof u)return!u.search(/^http/)>-1&&(u=c(u)),{href:u,square:1e6};if("object"===r(u))return e.strategyScriptAndMetaContentJsonKeyWords(t,n,u)}}}catch(e){s.e(e)}finally{s.f()}function c(r){try{var i=PosdBase64.decode(r);if(i){if("string"==typeof i&&"{"===i[0]){var o=JSON.parse(i);return e.strategyScriptAndMetaContentJsonKeyWords(t,n,o).href}return""}}catch(e){}}}}],(n=null)&&a(t.prototype,n),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();e.exports=c},8322:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2315),s=n(922),u=n(7013),c=function(){function e(t,n,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=r,this.fullIdStr=a.GetFullIdStr(t,n,r),this.init=!1,this.targetUrlDataList=[],this.targetUrlDetected=!1,this.IframesIO=null,this.activationTargetUrlCandidates=i,this.html5TargetUrlDetectionConfig=o.GetHtml5TargetUrlDetectionConfig(),this.blacklistedTargetUrls=o.BlacklistTargetUrl,this.detectionTimerId=null,this.onDetectTargetUrlCallBack=null}return t=e,r=[{key:"filterTargetUrlDataList",value:function(e,t){return e&&0!==e.length?e.filter((function(e){if(e.href&&0===e.href.search(/^http/)&&!a.IsInFilterList(t,e.href))return!0})):[]}},{key:"DetectTargetUrlFromWindowObj",value:function(e,t,n){var r=[],i=n.GetHtml5TargetUrlDetectionConfig(),o=n.BlacklistTargetUrl;try{var a=u.GetHyperlinkEmbeddedTargetUrlDataList(e,t.document,i);r=r.concat(a)}catch(e){}try{var c=u.GetDocumentEmbeddedTargetUrlDataList(e,t.document,i);c=this.filterTargetUrlDataList(c,o),r=r.concat(c)}catch(e){}try{var l=s.GetWindowEmbeddedTargetUrlDataList(e,t,i,this.defaultWindowProps);l=this.filterTargetUrlDataList(l,o),r=r.concat(l)}catch(e){}return r&&r.length,r}}],(n=[{key:"FrameTargetUrl",get:function(){return this.targetUrlDataList}},{key:"Init",value:function(e){return e&&(this.IframesIO=e,this.init=!0),this.init}},{key:"DetectTargetUrl",value:function(t,n){if(this.init&&!this.targetUrlDetected&&this.html5TargetUrlDetectionConfig)if(this.onDetectTargetUrlCallBack=n,this.detectionTimerId=setTimeout(this.onTargetUrlDetectionTimout.bind(this),t),this.activationTargetUrlCandidates&&this.activationTargetUrlCandidates.length)this.targetUrlDataList=this.activationTargetUrlCandidates,this.TargetUrlDetected();else{var r=u.GetHyperlinkEmbeddedTargetUrlDataList(this.id,document,this.blacklistedTargetUrls);this.targetUrlDataList=this.targetUrlDataList.concat(r);var i=u.GetDocumentEmbeddedTargetUrlDataList(this.id,document,this.html5TargetUrlDetectionConfig);i=e.filterTargetUrlDataList(i,this.blacklistedTargetUrls),this.targetUrlDataList=this.targetUrlDataList.concat(i),this.targetUrlDataList&&this.targetUrlDataList.length?this.TargetUrlDetected():this.IframesIO.ActivateWindowEmbeddedTargetUrlDetection(this.onGetWindowEmbeddedTargetUrlData.bind(this))}}},{key:"onGetWindowEmbeddedTargetUrlData",value:function(t){var n=e.filterTargetUrlDataList(t,this.blacklistedTargetUrls);this.targetUrlDataList.push(n),this.concatTargetUrlsDataIfNeed(),!n||n.length,this.TargetUrlDetected()}},{key:"concatTargetUrlsDataIfNeed",value:function(){this.targetUrlDataList[0].length&&(this.targetUrlDataList=this.targetUrlDataList.flat(1))}},{key:"onTargetUrlDetectionTimout",value:function(){this.targetUrlDetected||this.TargetUrlDetected()}},{key:"TargetUrlDetected",value:function(){this.targetUrlDetected=!0,this.detectionTimerId&&(clearTimeout(this.detectionTimerId),this.detectionTimerId=null),this.onDetectTargetUrlCallBack&&this.onDetectTargetUrlCallBack()}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();e.exports=c},922:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},o=[{key:"GetWindowEmbeddedTargetUrlDataList",value:function(e,r,i){var o=[function(e,t){if(void 0!==e.clickTag&&s(e.clickTag))return{href:e.clickTag,square:1000001}},function(e,t){if(void 0!==e.adData){if(void 0!==e.adData.destination_url&&s(e.adData.destination_url))return{href:e.adData.destination_url,square:1000001};if(void 0!==e.adData.redirect_url&&s(e.adData.redirect_url))return{href:e.adData.redirect_url,square:1000001}}},function(e,t){if(void 0!==e.BF&&void 0!==e.BF.Parameters&&void 0!==e.BF.Parameters.targeturl&&s(e.BF.Parameters.targeturl))return{href:e.BF.Parameters.targeturl,square:1000001}},function(e,t){if(void 0!==e.ADAPT&&void 0!==e.ADAPT.symbols&&void 0!==e.ADAPT.symbols.stage&&void 0!==e.ADAPT.symbols.stage.clickUrl&&s(e.ADAPT.symbols.stage.clickUrl))return{href:e.ADAPT.symbols.stage.clickUrl,square:1000001}},function(e,t){if(void 0!==e.admixAPI&&void 0!==e.admixAPI.ownerBanner&&void 0!==e.admixAPI.ownerBanner.clickUrl&&s(e.admixAPI.ownerBanner.clickUrl))return{href:e.admixAPI.ownerBanner.clickUrl,square:1000001}},function(e,t){var n=function(e,t,n){var r=function(e,t){var n=Object.getOwnPropertyNames(e);return n.filter((function(e){return t.WINDOW_PROPERTY_NAMES.indexOf(e)<0}))}(t,n);return r&&0!==r.length?u(t,r,n):null}(0,e,t);if(s(n))return{href:n,square:999999}}],a=function(e,t,r){var i,o=[],a=n(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;try{var u=s(e,r);u&&u.href&&o.push(u)}catch(e){}}}catch(e){a.e(e)}finally{a.f()}return o}(r,o,i);return a&&a.length,a;function s(e){return"string"==typeof e&&e.length>0&&(-1!==e.indexOf("http")||-1!==e.indexOf("//"))}function u(e,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=i.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(o.length>a)return null;var l,d=n(r);try{for(d.s();!(l=d.n()).done;){var f=l.value;try{var h=e[f];if(!h)return null;var y=o.concat(f);if("object"===t(h)){var E=u(h,Object.getOwnPropertyNames(h),i,y);if(E)return E}else if("string"==typeof h&&c(f,i)&&s(h))return h}catch(e){}}}catch(e){d.e(e)}finally{d.f()}return null}function c(e,t){var r,i=function(e){var t=e.toLowerCase();return t.replace(/[^a-zA-Z]+/g,"")}(e),o=n(t.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS);try{for(o.s();!(r=o.n()).done;)if(i===r.value)return!0}catch(e){o.e(e)}finally{o.f()}return!1}}}],(r=null)&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,o}();e.exports=a},3970:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2621),h=n(1453),y=n(5837),E=n(862),A=n(9317),v=n(1661),m=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=u(this,t,[e])).id=e,i.available=!1,i.onPageRefreshed=i.onPageUrlChanged,i.instaConfig=n.GetInstagramConfig,i.AdBlockerAgent=r,i.DetectorFeed=null,i.DetectorStories=null,i.headersEntries=[],i.ActivateVideoTrafficDetector(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"onPageUrlChanged",value:function(e,t){var n=this;this.available&&setTimeout((function(){n.DeactivateDetectors(h.AD_DETECTOR_INITIATOR_URL),n.ActivateDetectors()}),0)}},{key:"ActivateDetector",value:function(e){e===h.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.DetectorFeed=new E(this.id,this.instaConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.instaConfig),this.DetectorStories=new v(this.id,this.instaConfig.STORIES.DETECTOR_OPTIONS,this.AdBlockerAgent,this.instaConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}},{key:"AddNecessaryMethods",value:function(){this.DetectorFeed.isVideo=this.isVideo.bind(this),this.DetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.DetectorFeed.getAdInstagramObject=this.getAdInstagramObject.bind(this),this.DetectorFeed.ExtractAd=this.processAndSendInstagramAd.bind(this),this.DetectorFeed.HideElement=this.HideElementForInstagramFeedOnly.bind(this),this.DetectorFeed.isCarousel=this.isCarousel.bind(this),this.DetectorFeed.removeCloneElement=this.removeCloneElement.bind(this),this.DetectorStories.HideElement=this.HideElement.bind(this),this.DetectorStories.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.DetectorStories.ExtractAd=this.processAndSendInstagramAd.bind(this),this.DetectorStories.getAdInstagramObject=this.getAdInstagramObject.bind(this),this.DetectorFeed.removeCloneElement=this.removeCloneElement.bind(this)}},{key:"ActivateVideoTrafficDetector",value:function(){this.VideoTrafficDetector=new A(this.id,this.AdBlockerAgent),this.VideoTrafficDetector.InjectDetector(this.id+"_w",JSON.stringify(this.instaConfig.TRAFFIC_LISTENER_CONFIG))}},{key:"ActivateDetectors",value:function(){this.GetHeadersDataForLoader(),this.DetectorFeed.ActivateDetector(),this.DetectorStories.ActivateDetector()}},{key:"DeactivateDetectors",value:function(e){this.DetectorFeed.DeactivateDetector(e),this.DetectorStories.DeactivateDetector(e)}},{key:"processAndSendInstagramAd",value:function(e,t,n){var r=document.querySelector("[".concat(h.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));r&&(this.addFieldsToCandidateAboutHeaders(t),y.SendCandidatePlacementsCount(this.id,1,h.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM,null),y.SendAdCandidates(this.id,[t],h.MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM,null),f.CONFIG_MARK_AD_CANDIDATES&&f.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&(r.style.cssText+=n?h.STYLES_OUTLINE_VIDEO_AD:h.STYLES_OUTLINE_SUCCESS_DETECT))}},{key:"GetHeadersDataForLoader",value:function(){var e,t=this,n=i(this.instaConfig.LOAD_USER_DATA.HEADERS_VALUES_QUERIES);try{var r,o=function(){var n=e.value,r=new RegExp(n[1]),i=n[0],o=new RegExp(i,"i"),a=Array.from(document.querySelectorAll("script")).filter((function(e){return e.innerHTML.search(o)>-1}));if(!a.length)return{v:void 0};var s=a[0].innerHTML.match(r)[1];t.headersEntries.push([i,s])};for(n.s();!(e=n.n()).done;)if(r=o())return r.v}catch(e){n.e(e)}finally{n.f()}}},{key:"addFieldsToCandidateAboutHeaders",value:function(e){this.headersEntries.length&&e.aboutPageUrl&&(e.headers=Object.fromEntries(this.headersEntries))}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(n(7769));e.exports=m},862:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2315),h=n(1453),y=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,r])).instaConfig=i,o.timeOptions=o.instaConfig.FEED.TIMEOUT_OPTIONS,o.id=e,o.adBlockerAgent=r,o.feedContainer=null,o.feedObserver=null,o.observerNodesListenerInterval=null,o.observerNodesChecksAmount=0,o.processInstagramAdsInterval=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"HideElement",value:function(e){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdInstagramObject",value:function(e,t,n,r,i,o){}},{key:"isCarousel",value:function(e){}},{key:"isVideo",value:function(e,t){}},{key:"removeCloneElement",value:function(e){}},{key:"ActualizeDetector",value:function(){return this.feedContainer=this.FeedContainer,!!this.feedContainer}},{key:"ActivateMutationObserver",value:function(){var e=this;this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,h.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.feedObserver&&(e.feedObserver.disconnect(),e.feedObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){this.processFeedAds()}},{key:"FeedContainer",get:function(){var e,t=this.instaConfig.FEED.CONTAINER_QUERIES,n=this.instaConfig.FEED.CONTAINER_MIN_HEIGHT,r=i(t);try{for(r.s();!(e=r.n()).done;){var o=e.value,a=document.querySelector(o);if(a&&a.offsetHeight>=n)return a}}catch(e){r.e(e)}finally{r.f()}}},{key:"checkAdBlockerAndHide",value:function(e){this.adBlockerAgent.IsEnabledForInstagram()&&!this.adBlockerAgent.IsElementHidden(e)&&(this.HideElement(e),this.adBlockerAgent.SetHiddenAmount(1))}},{key:"processFeedAds",value:function(){var e=this,t=this.detectPromotedPosts();if(t&&t.length){var n,r=i(t);try{var o=function(){var t=n.value;if(f.GetElementSize(t),!t.hasAttribute(h.ATTRIBUTE_BIS_ID)){e.setSizesAndIdForAllElements(t);var r=f.GenerateAndSetBisIdToInstagramAds(t),i=e.createHTML(t),o=e.getAdvertiserName(t),a=e.getTargetUrl(t),s=e.getAboutPageUrl(t);e.AddHiddenTextTags(i);var u=e.isCarousel(t),c=e.isVideo(t,e.instaConfig.TAGS_FOR_VIDEO_CHECK),l=e.getAdInstagramObject(t,i,o,a,s,h.INSTAGRAM_AD_PLACEMENT_TYPE_FEED);c&&!u&&(l.videoData={}),u&&(l.carouselSlidesSources=[]),e.removeCloneElement(i),e.checkAdBlockerAndHide(t);var d=setTimeout((function(){e.ExtractAd.call(e,r,l,c),clearTimeout(d)}),100)}};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}}},{key:"AddHiddenTextTags",value:function(e){var t=e.querySelectorAll("svg>use");if(t)for(var n=0;n<t.length;n++){var r=t[n],i=r.parentElement,o=r.getAttribute("xlink:href"),a=document.querySelector(o).cloneNode(!0);a.style.display="none",a.id=a.id+"_bis",i&&i.appendChild(a)}}},{key:"RemoveHideStylesFromClone",value:function(e){var t=e.querySelector("div"),n=t?t.firstElementChild:null,r=n?n.firstElementChild:null;return r?(n.style.cssText=n.style.cssText.replace(h.STYLES_HIDE_INSTAGRAM_FEED_AD[1],""),r.style.cssText=r.style.cssText.replace(h.STYLES_HIDE_INSTAGRAM_FEED_AD[0],""),e):e}},{key:"detectPromotedPosts",value:function(){var e=this;if(!this.feedContainer)return[];for(var t=this.instaConfig.FEED.IMG_SPACE_PERCENTAGE,n=this.instaConfig.PROMOTED_ALIASES,r=Array.from(this.feedContainer.children),o=[],a=0,s=r;a<s.length;a++){var u=s[a];if(this.IsPostContentRendered(u,t)){var c,l=i(u.querySelectorAll(this.instaConfig.FEED.PROMOTED_QUERY));try{var d,f=function(){var t=c.value;if(!t)return 0;var r=t.hasAttribute("xlink:href")?e.GetTextFromXlink(t):t.innerText;return r.includes("#")?0:n.some((function(e){return r.search(e)>=0}))?(o.push(u),1):void 0};for(l.s();!(c=l.n()).done&&(0===(d=f())||1!==d););}catch(e){l.e(e)}finally{l.f()}}}return o}},{key:"GetTextFromXlink",value:function(e){var t=e.getAttribute("xlink:href");return t?document.querySelector(t).textContent:""}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=f.GetFullElementSize(e);r.w>0&&f.GetImagesSpacePercentage(this.instaConfig.TAGS_FOR_LOADING_CHECK,e,r).some((function(e){return e>=t}))&&(n=!0)}return n}},{key:"createHTML",value:function(e){var t=document.createElement("html"),n=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,i=e.cloneNode(!0),o=this.feedContainer,a=o.cloneNode();return this.styleFixes(a),this.setWrapperStyles(o,a),a.appendChild(i),n.appendChild(a),t.appendChild(r),t.appendChild(n),t}},{key:"setWrapperStyles",value:function(e,t){t.style.cssText=t.style.cssText+" max-width: ".concat(this.maxWidthContainer(e))}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"styleFixes",value:function(e){e.style.paddingBottom=0}},{key:"cloneBodyWithStyles",get:function(){var e=document.createElement("body"),t=document.querySelectorAll('body style, body link[rel="stylesheet"]');return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"cloneHeadWithStyles",get:function(){var e=document.createElement("head"),t=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style');return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"getAboutPageUrl",value:function(e){var t=this.instaConfig.FEED.ABOUT_PAGE_URL_QUERY,n=e.querySelector(t);return n&&n.href?n.href:""}},{key:"getAdvertiserName",value:function(e){var t=this.instaConfig.FEED.ADVERTISER_NAME_QUERY,n=e.querySelector(t),r="";if(n){if(r=n.innerText)return r;if(-1===(r=n.innerHTML).search(/\<\//))return r}return""}},{key:"getTargetUrl",value:function(e){var t=this.instaConfig.FEED.TARGET_URL_QUERY,n=e.querySelector(t),r="";return n&&n.href&&(r=n.href),r}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(n(2978));e.exports=y},1661:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2315),h=n(1453),y=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,r])).instaConfig=i,o.id=e,o.adBlockerAgent=r,o.storyContainer=null,o.storiesObserver=null,o.processInstagramAdsInterval=null,o.observerNodesListenerInterval=null,o.observerNodesChecksAmount=0,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"HideElement",value:function(e){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdInstagramObject",value:function(e,t,n,r,i,o){}},{key:"removeCloneElement",value:function(e){}},{key:"ActualizeDetector",value:function(){return this.storyContainer=this.StoryContainer,!!this.storyContainer}},{key:"ActivateMutationObserver",value:function(){var e=this;this.storyContainer?(this.storiesObserver||(this.storiesObserver=new MutationObserver(this.DetectCandidates.bind(this,h.AD_DETECTOR_INITIATOR_MUTATION)),this.storiesObserver.observe(this.storyContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.storiesObserver&&(e.storiesObserver.disconnect(),e.storiesObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.storiesObserver&&(this.storiesObserver.disconnect(),this.storiesObserver=null,this.storyContainer=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){this.processStoriesAds()}},{key:"processStoriesAds",value:function(){var e=this,t=this.detectPromotedMarkedStory();if(t&&(f.GetElementSize(t),!t.hasAttribute(h.ATTRIBUTE_BIS_ID))){var n=f.GenerateAndSetBisIdToInstagramAds(t);this.setSizesAndIdForAllElements(t);var r=this.createHTML(t),i=this.getAdvertiserName(t),o=this.getTargetUrl(t),a=this.getAboutPageUrl(t);this.AddHiddenTextTags(r);var s=this.getAdInstagramObject(t,r,i,o,a,h.INSTAGRAM_AD_PLACEMENT_TYPE_STORY);this.adBlockerAgent.IsEnabledForInstagram(),this.removeCloneElement(r);var u=setTimeout((function(){e.ExtractAd.call(e,n,s),clearTimeout(u)}),100)}}},{key:"AddHiddenTextTags",value:function(e){var t=e.querySelectorAll("svg>use");if(t)for(var n=0;n<t.length;n++){var r=t[n],i=r.parentElement,o=r.getAttribute("xlink:href"),a=document.querySelector(o).cloneNode(!0);a.style.display="none",a.id=a.id+"_bis",i&&i.appendChild(a)}}},{key:"createHTML",value:function(e){var t=document.createElement("html"),n=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,i=e.cloneNode(!0),o=document.createElement("div");return this.styleFixes(i),this.setWrapperStyles(e,o),o.appendChild(i),n.appendChild(o),t.appendChild(r),t.appendChild(n),t}},{key:"cloneBodyWithStyles",get:function(){var e=document.createElement("body"),t=document.querySelectorAll('body style, body link[rel="stylesheet"]');return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"cloneHeadWithStyles",get:function(){var e=document.createElement("head"),t=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style');return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"detectPromotedMarkedStory",value:function(){var e=this;if(!this.storyContainer)return null;var t=this.instaConfig.STORIES.IMG_SPACE_PERCENTAGE,n=this.instaConfig.PROMOTED_ALIASES,r=this.storyContainer;if(this.IsStoryContentRendered(r,t)){var o,a=i(r.querySelectorAll(this.instaConfig.STORIES.PROMOTED_QUERY));try{var s,u=function(){var t=o.value;if(!t)return 0;var i=t.hasAttribute("xlink:href")?e.GetTextFromXlink(t):t.innerText;return i.includes("#")?0:n.some((function(e){return i.search(e)>=0}))?{v:r}:void 0};for(a.s();!(o=a.n()).done;)if(0!==(s=u())&&s)return s.v}catch(e){a.e(e)}finally{a.f()}}return null}},{key:"GetTextFromXlink",value:function(e){var t=e.getAttribute("xlink:href");return t?document.querySelector(t).textContent:""}},{key:"getAdvertiserName",value:function(e){var t=this.instaConfig.STORIES.ADVERTISER_NAME_QUERY,n=e.querySelector(t);return n?n.innerText:""}},{key:"getTargetUrl",value:function(e){var t=this.instaConfig.STORIES.TARGET_URL_QUERY,n=e.querySelector(t),r="";return n&&n.href&&(r=n.href),r}},{key:"getAboutPageUrl",value:function(e){var t=this.instaConfig.STORIES.ABOUT_PAGE_URL_QUERY,n=e.querySelector(t);return n&&n.href?n.href:""}},{key:"IsStoryContentRendered",value:function(e,t){var n=!1;if(e){var r=f.GetFullElementSize(e);r.w>0&&f.GetImagesSpacePercentage(this.instaConfig.TAGS_FOR_LOADING_CHECK,e,r).some((function(e){return e>=t}))&&(n=!0)}return n}},{key:"setWrapperStyles",value:function(e,t){t.style.cssText=t.style.cssText+" max-width: ".concat(this.maxWidthContainer(e))}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"styleFixes",value:function(e){e.style.transform=""}},{key:"StoryContainer",get:function(){return document.querySelector(this.instaConfig.STORIES.STORY_QUERY)}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(n(2978));e.exports=y},9317:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2315),s=n(1453),u=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.AdBlockerAgent=n},(t=[{key:"InjectDetector",value:function(e,t){if(document.head){var n=document.createElement("script");this.setAttributes(n),document.head.appendChild(n)}}},{key:"setAttributes",value:function(e){var t=a.getURL("../executers/".concat(s.INSTAGRAM_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("nonce",""),this.AdBlockerAgent.IsEnabledForInstagram()&&e.setAttribute("ad-opt-on",""),e.src=t}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=u},5172:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,n){return t=u(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var l=n(7769),d=n(1391),f=n(1453),h=n(2621),y=n(5837),E=n(2315),A=n(5220),v=n(5326),m=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=a(this,t,[e])).id=e,i.VideoTrafficDetector=null,i.onPageRefreshed=i.onPageUrlChanged,i.AdBlockerAgent=r,i.linkedinConfig=n.LinkedinConfig,i.LinkedinDetectorFeed=null,i.LinkedinDetectorRightColumn=null,i.ActivateTrafficDetector(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,r=[{key:"onPageUrlChanged",value:function(e,t){var n=this;this.available&&setTimeout((function(){n.DeactivateDetectors(f.AD_DETECTOR_INITIATOR_URL),n.ActivateDetectors()}),50)}},{key:"ActivateDetectors",value:function(){this.LinkedinDetectorFeed.ActivateDetector(),this.LinkedinDetectorRightColumn.ActivateDetector()}},{key:"DeactivateDetectors",value:function(e){this.LinkedinDetectorFeed.DeactivateDetector(e),this.LinkedinDetectorRightColumn.DeactivateDetector(e)}},{key:"ActivateDetector",value:function(e){e===f.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.LinkedinDetectorFeed=new A(this.id,this.linkedinConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.linkedinConfig),this.LinkedinDetectorRightColumn=new v(this.id,this.linkedinConfig.RIGHT_COLUMN.DETECTOR_OPTIONS,this.AdBlockerAgent,this.linkedinConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}},{key:"AddNecessaryMethods",value:function(){this.LinkedinDetectorFeed.isVideo=this.isVideo.bind(this),this.LinkedinDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.LinkedinDetectorFeed.getAdLinkedinObject=this.getAdLinkedinObject.bind(this),this.LinkedinDetectorFeed.ExtractAd=this.processAndSendLinkedinAd.bind(this),this.LinkedinDetectorFeed.HideElement=this.HideElement.bind(this),this.LinkedinDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.LinkedinDetectorFeed.isCarousel=this.isCarousel.bind(this),this.LinkedinDetectorFeed.IsAdContentRendered=this.IsAdContentRendered.bind(this),this.LinkedinDetectorRightColumn.HideElement=this.HideElement.bind(this),this.LinkedinDetectorRightColumn.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.LinkedinDetectorRightColumn.doesElementExists=this.doesElementExists.bind(this),this.LinkedinDetectorRightColumn.ExtractAd=this.processAndSendLinkedinAd.bind(this),this.LinkedinDetectorRightColumn.getAdLinkedinObject=this.getAdLinkedinObject.bind(this)}},{key:"ActivateTrafficDetector",value:function(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new d(this.id),this.VideoTrafficDetector.InjectDetector(this.id+"_l",JSON.stringify(this.linkedinConfig)))}},{key:"IsAdContentRendered",value:function(e,t){var n=E.GetFullElementSize(e);return E.GetImagesSpacePercentage(this.linkedinConfig.TAGS_FOR_LOADING_CHECK,e,n).some((function(e){return e>=t}))}},{key:"processAndSendLinkedinAd",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:document).querySelector("[".concat(f.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));r&&(y.SendCandidatePlacementsCount(this.id,1,f.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_LINKEDIN,null),y.SendAdCandidates(this.id,[t],f.MESSAGE_TYPE_CANDIDATES_DATA_LINKEDIN,null),h.CONFIG_MARK_AD_CANDIDATES&&h.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&(r.style.cssText+=n?f.STYLES_OUTLINE_VIDEO_AD:f.STYLES_OUTLINE_SUCCESS_DETECT))}}],r&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(l);e.exports=m},5220:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2978),h=n(1453),y=n(2315),E=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,r])).id=e,o.feedObserver=null,o.linkedinConfig=i,o.feedContainer=null,o.AdBlockerAgent=r,o.adPlacementType=h.LINKEDIN_AD_PLACEMENT_TYPE_FEED,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"HideElement",value:function(){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdLinkedinObject",value:function(e,t,n,r,i,o){}},{key:"doesElementExists",value:function(e){}},{key:"isCarousel",value:function(e){}},{key:"isVideo",value:function(e,t){}},{key:"IsAdContentRendered",value:function(e,t){}},{key:"ActualizeDetector",value:function(){return this.feedContainer=this.getFeedContainer,!!this.feedContainer}},{key:"ActivateMutationObserver",value:function(){var e=this;this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,h.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.feedObserver&&(e.feedObserver.disconnect(),e.feedObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processFeedAds()}},{key:"processFeedAds",value:function(){this.extractOccurrences()}},{key:"getFeedContainer",get:function(){var e=this.linkedinConfig.FEED.QUERY_CONTAINER,t=document.querySelector(e);return!t||t.children.length<3?null:t}},{key:"extractOccurrences",value:function(){var e=this.allCellsAndMinImgSpace(),t=e.allCells,n=e.minImgSquarePercentage;if(t.length){var r,o=i(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(y.GetElementSize(a),!a.hasAttribute(h.ATTRIBUTE_BIS_ID)&&this.IsAdContentRendered(a,n)){var s=y.GenerateAndSetBisIdToLinkedinAds(a);this.setSizesAndIdForAllElements(a);var u=this.createHTML(a),c=this.getTargetUrl(a),l=this.getSocialAdvertiserUrl(a),d=this.getAdvertiserName(a),f=this.isCarousel(a),E=this.isVideo(a,this.linkedinConfig.TAGS_FOR_VIDEO_CHECK),A=this.getUniqueDataId(a);this.removeBisAttribute(u);var v=this.getAdLinkedinObject(a,u,this.adPlacementType,c,l,d,A);if(this.AdBlockerAgent.IsEnabledForLinkedin()&&!this.AdBlockerAgent.IsElementHidden(a)&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),f&&(v.carouselSlidesData=this.getCarouselSlidesFromDOM(l,a)),a.querySelector("iframe")&&(v.doesHaveIframe=!0),E&&!f){var m=this.getVideoIdAndThumbnail(a);v.videoData=m||{}}setTimeout(this.ExtractAd.bind(this,s,v,E),100)}}}catch(e){o.e(e)}finally{o.f()}}}},{key:"allCellsAndMinImgSpace",value:function(){var e=this,t=[],n=0;return this.feedContainer&&(t=Array.from(this.feedContainer.children),n=this.linkedinConfig.FEED.IMG_SPACE_PERCENTAGE),{allCells:t=t.filter((function(t){return e.linkedinConfig.FEED.COLLECT_AD_TYPE_EVENT?e.isPromoted(t):e.isPromoted(t)&&!t.querySelector(e.linkedinConfig.FEED.QUERY_CHECK_AD_TYPE_EVENT)})),minImgSquarePercentage:n}}},{key:"isPromoted",value:function(e){var t,n=this.linkedinConfig.FEED.QUERIES_IS_PROMOTED,r=this.linkedinConfig.PROMOTED_ALIASES,o=!1,a=i(n);try{for(a.s();!(t=a.n()).done;){var s=t.value,u=Array.from(e.querySelectorAll(s));u.length&&(o=u.some((function(e){var t=e.textContent.trim().toLowerCase();if(t)return r.some((function(e){return t.indexOf(e)>=0}))})))}}catch(e){a.e(e)}finally{a.f()}return o}},{key:"createHTML",value:function(e){var t=document.createElement("html"),n=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,i=e.cloneNode(!0),o=this.feedContainer,a=o.cloneNode();return this.styleFixes(a),this.setWrapperStyles(o,a,e),a.appendChild(i),n.appendChild(a),t.appendChild(r),t.appendChild(n),t}},{key:"setWrapperStyles",value:function(e,t,n){t.style.cssText=t.style.cssText+" max-width: ".concat(this.maxWidthContainer(e)),t.style.cssText=t.style.cssText+" max-height: ".concat(this.maxHeightContainer(n))}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"maxHeightContainer",value:function(e){return e?e.offsetHeight+"px":"auto"}},{key:"styleFixes",value:function(e){e.style.overflow="hidden"}},{key:"cloneBodyWithStyles",get:function(){var e=document.createElement("body"),t=document.querySelectorAll('body style, body link[rel="stylesheet"]');return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"cloneHeadWithStyles",get:function(){var e=document.createElement("head"),t=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style'),n=document.createElement("meta");return n.setAttribute("charset","UTF-8"),e.append(n),t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"getTargetUrl",value:function(e){var t=this.linkedinConfig.FEED.QUERY_TARGET_URL,n=e.querySelector(t);return n&&n.href?n.href:""}},{key:"getSocialAdvertiserUrl",value:function(e){var t=this.linkedinConfig.FEED.QUERY_ADVERTISER_URL,n=e.querySelector(t),r="";return n&&n.href?r=n.href:r}},{key:"getAdvertiserName",value:function(e){var t=e.querySelector(this.linkedinConfig.FEED.QUERY_ADVERTISER_NAME);return t?t.innerText.trim():""}},{key:"getVideoIdAndThumbnail",value:function(e){var t,n=this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.QUERY_VIDEO_TAG_GET_VIDEO_ID,r=new RegExp(this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.REGEXP_VIDEO_ID),i=e.querySelector(n);if(!i)return null;var o=this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.ATTRIBUTE_NAME_WITH_VIDEO_ID,a=i.getAttribute(o);if(!a)return null;var s=a.match(r);return{videoId:null!=s&&null!==(t=s.groups)&&void 0!==t&&t.videoId?s.groups.videoId:null,previewImageUrl:a}}},{key:"getCarouselSlidesFromDOM",value:function(e,t){var n=this.searchFirstImage(t);if(!n)return[];var r=this.searchMatchedImgId(n);if(!r)return[];var i=this.getAllCodeElements();if(!i.length)return[];var o=this.filterCodeElements(i,r);if(!o.length)return[];var a=this.getSlidesDatas(o,e);return a.length?this.getSlidesImagesSources(a):[]}},{key:"searchFirstImage",value:function(e){return e.querySelector(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.QUERY_FIRST_IMG)}},{key:"searchMatchedImgId",value:function(e){var t=new RegExp(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.REGEXP_IMG_ID),n=e.src.match(t);return n.length&&1!==n.length?n[1]:null}},{key:"getAllCodeElements",value:function(){return Array.from(document.querySelectorAll(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.QUERY_CODE_ELEMENTS))}},{key:"filterCodeElements",value:function(e,t){return e.filter((function(e){return e.innerHTML.includes(t)})).map((function(e){return"{"===e.innerHTML.trim()[0]?JSON.parse(e.innerHTML):{}}))}},{key:"getSlidesDatas",value:function(e,t){var n=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_SOCIAL_ADV_URL,r=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_DATA,o=e.map((function(e){if(!e.included)return{};var o=e.included.filter((function(e){var r,o=e,a=i(n);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(o[s]&&(o=o[s]),t===o)return!0}}catch(e){a.e(e)}finally{a.f()}}));if(!o.length)return!1;var a,s=o[0],u=i(r);try{for(u.s();!(a=u.n()).done;){var c=a.value;s[c]&&(s=s[c])}}catch(e){u.e(e)}finally{u.f()}return s}));return o.length?o[0]:[]}},{key:"getSlidesImagesSources",value:function(e){var t,n=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_ROOT_URL,r=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_PATH_URL,o=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_SLIDE_TEXT,a=[],s=i(e);try{for(s.s();!(t=s.n()).done;){var u,c=t.value,l=c,d=c,f=c,h=i(n);try{for(h.s();!(u=h.n()).done;){var y=u.value;l[y]&&(l=l[y])}}catch(e){h.e(e)}finally{h.f()}if(!l||"string"!=typeof l)break;var E,A=i(r);try{for(A.s();!(E=A.n()).done;){var v=E.value;d[v]&&(d=d[v])}}catch(e){A.e(e)}finally{A.f()}if(!d||"string"!=typeof d)break;var m,T=i(o);try{for(T.s();!(m=T.n()).done;){var b=m.value;f[b]&&(f=f[b])}}catch(e){T.e(e)}finally{T.f()}if(!f||"string"!=typeof f)break;var S=l+d,_={source:this.transformToValidUrl(S),text:f};a.push(_)}}catch(e){s.e(e)}finally{s.f()}return a}},{key:"transformToValidUrl",value:function(e){return e.replace(/amp\;/g,"")}},{key:"removeBisAttribute",value:function(e){var t=e.querySelectorAll("*[".concat(h.ATTRIBUTE_BIS_ID,"]"));t.length&&t.forEach((function(e){e.removeAttribute(h.ATTRIBUTE_BIS_ID)}))}},{key:"getUniqueDataId",value:function(e){var t;return null===(t=e.querySelector(this.linkedinConfig.FEED.QUERY_GET_UNIQUE_ID))||void 0===t?void 0:t.getAttribute("data-id")}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(f);e.exports=E},5326:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2978),h=n(2315),y=n(1453),E=(n(1645),function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,r])).rightColumnContainer=null,o.rightColumnObserver=null,o.linkedinConfig=i,o.adPlacementType=y.LINKEDIN_AD_PLACEMENT_TYPE_RIGHT_COLUMN,o.promotedHeaderHeaderHeight=0,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"HideElement",value:function(){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdLinkedinObject",value:function(e,t,n,r,i,o){}},{key:"doesElementExists",value:function(e){}},{key:"ActualizeDetector",value:function(){return this.rightColumnContainer=this.getRightColumnContainer(),!!this.rightColumnContainer}},{key:"ActivateMutationObserver",value:function(){var e=this;this.getRightColumnContainer()?(this.rightColumnObserver||(this.rightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,y.AD_DETECTOR_INITIATOR_MUTATION)),this.rightColumnObserver.observe(this.rightColumnContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.rightColumnObserver&&(e.rightColumnObserver.disconnect(),e.rightColumnObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.rightColumnContainer=null,this.isObserverAlreadySet=!1)}},{key:"getRightColumnContainer",value:function(){var e=document.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_CONTAINER);return e&&e.children.length?e:null}},{key:"isPromoted",value:function(e){var t=null==e?void 0:e.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_PROMOTED),n=this.linkedinConfig.PROMOTED_ALIASES,r=!1;if(t){this.promotedHeaderHeaderHeight=t.parentElement.offsetHeight;var i=t.textContent.trim().toLowerCase();r=n.includes(i)}return r}},{key:"Detector",value:function(){this.rightColumnContainer=this.doesElementExists(this.rightColumnContainer)?this.rightColumnContainer:this.getRightColumnContainer(),this.rightColumnContainer&&this.processRightColumnAds()}},{key:"processRightColumnAds",value:function(){var e=this;this.rightColumnContainer.querySelectorAll(this.linkedinConfig.RIGHT_COLUMN.QUERY_AD_CONTAINER).forEach((function(t){e.isIframe(t)&&e.processIFrame(t)}))}},{key:"isIframe",value:function(e){return!(null==e||!e.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_IFRAME))}},{key:"processIFrame",value:function(e){var t=e.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_IFRAME),n=null==t?void 0:t.contentDocument;if(this.isPromoted(n)){var r=[];this.linkedinConfig.RIGHT_COLUMN.QUERIES_IFRAME_AD.forEach((function(e){return r.push.apply(r,i(n.querySelectorAll(e)))})),this.AdBlockerAgent.IsEnabledForLinkedin()&&!this.AdBlockerAgent.IsElementHidden(e)&&(this.HideElement(e),this.AdBlockerAgent.SetHiddenAmount(r.length)),this.extractOccurrences(r,n)}}},{key:"extractOccurrences",value:function(e,t){var n=this;e.length&&e.forEach((function(e){if(h.GetElementSize(e),!e.hasAttribute(y.ATTRIBUTE_BIS_ID)){var r=h.GenerateAndSetBisIdToLinkedinAds(e);n.setSizesAndIdForAllElements(e);var i=n.cloneIframeWithAd(t,e),o=n.getTargetUrl(e);n.removeBisAttribute(i);var a=n.getAdLinkedinObject(e,i,n.adPlacementType,o,"","");setTimeout(n.ExtractAd.bind(n,r,a,!1,t),100)}}))}},{key:"cloneIframeWithAd",value:function(e,t){var n=document.createElement("html"),r=this.cloneHeadWithStyles(e),i=e.querySelector("body").cloneNode(!0),o=this.linkedinConfig.RIGHT_COLUMN.QUERIES_IFRAME_AD_WRAPPER.find((function(e){return!!i.querySelector(e)})),a=i.querySelector(o),s=i.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IFRAME_STYLES_CONTAINER),u=i.querySelector("script");return u&&u.remove(),s.style.height="auto",s.style.width="".concat(t.offsetWidth,"px"),a.parentNode.style.height="auto",a.replaceChildren(),a.appendChild(t.cloneNode(!0)),n.appendChild(r),n.appendChild(i),n}},{key:"cloneHeadWithStyles",value:function(e){var t=e||document,n=document.createElement("head"),r=t.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style'),i=document.createElement("meta");return i.setAttribute("charset","UTF-8"),n.append(i),r&&r.forEach((function(e){var t=e.cloneNode(!0);n.appendChild(t)})),n}},{key:"getTargetUrl",value:function(e){return(e.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_TARGET_URL)||e).href||""}},{key:"removeBisAttribute",value:function(e){var t=e.querySelectorAll("*[".concat(y.ATTRIBUTE_BIS_ID,"]"));t.length&&t.forEach((function(e){e.removeAttribute(y.ATTRIBUTE_BIS_ID)}))}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(f));e.exports=E},1391:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(1453),s=n(2315),u=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t},(t=[{key:"InjectDetector",value:function(e,t){if(document.head){var n=document.createElement("script");this.setAttributes(n),document.head.appendChild(n)}}},{key:"setAttributes",value:function(e){var t=s.getURL("../executers/".concat(a.LINKEDIN_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("nonce",""),e.src=t}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=u},8102:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,n){return t=u(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var l=n(7074),d=n(2455),f=n(9038),h=n(1453),y=n(5837),E=n(2621),A=n(6561),v=n(7769),m=n(2315),T=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=a(this,t,[e])).id=e,i.AdBlockerAgent=r,i.pinterestConfig=n.PinterestConfig,i.onPageRefreshed=i.onPageUrlChanged,i.available=!1,i.pinterestFeedDetector=null,i.pinterestPinDetector=null,i.pinterestSearchDetector=null,i.VideoTrafficDetector=null,i.ActivateVideoTrafficDetector(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,(r=[{key:"onPageUrlChanged",value:function(e,t){var n=this;this.available&&setTimeout((function(){n.DeactivateDetectors(h.AD_DETECTOR_INITIATOR_URL),n.ActivateDetectors()}),100)}},{key:"PageRefreshed",value:function(e,t){this.pageUrl=e,this.ticketId=t,this.onPageUrlChanged&&this.onPageUrlChanged(e,t)}},{key:"ActivateDetector",value:function(e){e===h.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.pinterestFeedDetector=new l(this.id,this.pinterestConfig.FEED_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.pinterestSearchDetector=new f(this.id,this.pinterestConfig.SEARCH_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.pinterestPinDetector=new d(this.id,this.pinterestConfig.PIN_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.AddNecessaryMethods(),this.ActivateDetectors()}},{key:"AddNecessaryMethods",value:function(){this.pinterestFeedDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestFeedDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestFeedDetector.isCarousel=this.isCarousel.bind(this),this.pinterestFeedDetector.HideElement=this.HideElement.bind(this),this.pinterestFeedDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestFeedDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestFeedDetector.isVideo=this.isVideo.bind(this),this.pinterestFeedDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestFeedDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this),this.pinterestPinDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestPinDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestPinDetector.isCarousel=this.isCarousel.bind(this),this.pinterestPinDetector.HideElement=this.HideElement.bind(this),this.pinterestPinDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestPinDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestPinDetector.isVideo=this.isVideo.bind(this),this.pinterestPinDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestPinDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this),this.pinterestSearchDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestSearchDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestSearchDetector.isCarousel=this.isCarousel.bind(this),this.pinterestSearchDetector.HideElement=this.HideElement.bind(this),this.pinterestSearchDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestSearchDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestSearchDetector.isVideo=this.isVideo.bind(this),this.pinterestSearchDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestSearchDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this)}},{key:"ActivateDetectors",value:function(){this.pinterestFeedDetector.ActivateDetector(),this.pinterestSearchDetector.ActivateDetector(),this.pinterestPinDetector.ActivateDetector()}},{key:"DeactivateDetectors",value:function(e){this.pinterestFeedDetector.DeactivateDetector(e),this.pinterestSearchDetector.DeactivateDetector(e),this.pinterestPinDetector.DeactivateDetector(e)}},{key:"ActivateVideoTrafficDetector",value:function(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new A(this.id),this.VideoTrafficDetector.InjectDetector(this.id+"_p",JSON.stringify(this.pinterestConfig)))}},{key:"GetGlobalContainer",value:function(){return document.querySelector(this.pinterestConfig.MAIN_CONTAINER_QUERY)}},{key:"getUniqueContentId",value:function(e){var t=e.querySelector("div[".concat(this.pinterestConfig.UNIQUE_ATTRIBUTE,"]"));return t?t.getAttribute(this.pinterestConfig.UNIQUE_ATTRIBUTE):""}},{key:"IsPostContentRendered",value:function(e,t,n){var r=!1;if(e){var i=m.GetFullElementSize(e);i.w>0&&i.h>0&&m.GetImagesSpacePercentage(n,e,i).some((function(e){return e>=t}))&&(r=!0)}return r}},{key:"sendPinterestAd",value:function(e,t){var n=document.querySelector("[".concat(h.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));n&&(y.SendCandidatePlacementsCount(this.id,1,h.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_PINTEREST,null),y.SendAdCandidates(this.id,[t],h.MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST,null),E.CONFIG_MARK_AD_CANDIDATES&&E.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&(t.videoData?n.style.cssText+=h.STYLES_OUTLINE_VIDEO_AD:n.style.cssText+=h.STYLES_OUTLINE_SUCCESS_DETECT))}}])&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(v);e.exports=T},7074:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}n(7769);var f=n(1453),h=n(2315),y=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,i])).id=e,o.pinterestConfig=r,o.adBlockerAgent=i,o.adPlacementType=f.PINTEREST_AD_PLACEMENT_TYPE_FEED,o.feedContainer=null,o.lastFeedAdsCheckTime=0,o.feedObserver=null,o.observerNodesListenerInterval=null,o.observerNodesChecksAmount=0,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"isCarousel",value:function(){}},{key:"HideElement",value:function(){}},{key:"getGlobalContainer",value:function(){}},{key:"sendAdCandidatesToBackground",value:function(e,t){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdPinterestObject",value:function(e,t,n,r,i,o,a){}},{key:"isVideo",value:function(e,t){}},{key:"removeCloneElement",value:function(e){}},{key:"IsPostContentRendered",value:function(e,t,n){}},{key:"ActualizeDetector",value:function(){return!!this.isFeedPageURL()&&(this.feedContainer=this.getFeedContainer(),!!this.feedContainer)}},{key:"ActivateMutationObserver",value:function(){var e=this;this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,f.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.feedObserver&&(e.feedObserver.disconnect(),e.feedObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!0)}},{key:"Detector",value:function(){var e=this,t=this.detectPromotedPins();if(t&&t.length){var n,r=i(t);try{var o=function(){var t=n.value;if(h.GetElementSize(t),!t.hasAttribute(f.ATTRIBUTE_BIS_ID)){var r=h.GenerateAndSetBisIdToPinterestAds(t);e.setSizesAndIdForAllElements(t);var i=e.createHTML(t),o=e.getAdvertiserName(t),a=e.getTargetUrl(t),s=e.getTitleText(t),u=e.getAdvertiserUrl(t),c=e.getAdPinterestObject(t,i,o,a,s,u,f.PINTEREST_AD_PLACEMENT_TYPE_FEED);e.isVideo(t,e.pinterestConfig.FEED_PAGE.TAGS_FOR_VIDEO_CHECK)&&(c.videoData={}),e.adBlockerAgent.IsEnabledForPinterest()&&!e.adBlockerAgent.IsElementHidden(t)&&(e.HideElement(t),e.adBlockerAgent.SetHiddenAmount(1)),e.removeCloneElement(i);var l=setTimeout((function(){e.sendAdCandidatesToBackground.call(e,r,c),clearTimeout(l)}),100)}};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}}},{key:"detectPromotedPins",value:function(){var e=this;if(!this.feedContainer)return[];for(var t=[],n=this.pinterestConfig.FEED_PAGE.IMG_SPACE_PERCENTAGE,r=this.pinterestConfig.FEED_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,o=Array.from(this.feedContainer.childNodes),a=this.pinterestConfig.PROMOTED_ALIASES,s=function(){var o=c[u];if(e.IsPostContentRendered(o,n,e.pinterestConfig.FEED_PAGE.TAGS_FOR_LOADING_CHECK)){var s=o.querySelector(e.pinterestConfig.FEED_PAGE.PROMOTED_PINS_QUERY);if(!s)return 1;var l=s.innerText;if(!l||"style"===s.nodeName.toLowerCase()){var d=window.getComputedStyle(s,":before");l=s.textContent,d&&d.content&&!l&&(l=d.content);var f,h=i(r);try{for(h.s();!(f=h.n()).done;){var y=f.value;if(!l){l="";break}var E=y[0],A=y[1],v="join"!==E?new RegExp(A,"g"):"";l="join"!==E||1!==l.length?"replace"===E?l[E](v,""):l[E](v):l[0]}}catch(e){h.e(e)}finally{h.f()}}a.some((function(e){return l.search(e)>=0}))&&t.push(o)}},u=0,c=o;u<c.length;u++)s();return t}},{key:"getFeedContainer",value:function(){var e=this.getGlobalContainer(),t=null;return e?t=e.querySelector(this.pinterestConfig.FEED_PAGE.CONTAINER_QUERY):t}},{key:"cloneBodyWithStyles",get:function(){var e=document.createElement("body"),t=document.querySelectorAll("body style");return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"cloneHeadWithStyles",get:function(){var e=document.createElement("head"),t=document.querySelectorAll('head link[rel="stylesheet"], head script');return t&&t.forEach((function(t){var n=t.cloneNode();e.appendChild(n)})),e}},{key:"createHTML",value:function(e){var t=document.createElement("html"),n=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,i=e.cloneNode(!0);return this.styleFixes(i),n.appendChild(i),t.appendChild(r),t.appendChild(n),t}},{key:"getAdvertiserName",value:function(e){for(var t=this.pinterestConfig.FEED_PAGE.ADVERTISER_NAME_QUERY,n=0,r=Array.from(e.querySelectorAll(t));n<r.length;n++){var i=r[n];if(i&&i.innerText)return i.innerText}return""}},{key:"getAdvertiserUrl",value:function(e){var t=this.pinterestConfig.FEED_PAGE.ADVERTISER_PINTEREST_URL_QUERY,n=e.querySelector(t);return n?n.href:""}},{key:"styleFixes",value:function(e){e.style.cssText=e.style.cssText.replace(/transform.[^;]*;/,"");var t,n=i(this.pinterestConfig.FEED_PAGE.STYLE_FIXES);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=e.querySelector(r.ELEMENT_QUERY),a=r.NEW_RULES;if(o){if(r.NEW_RULES.includes("${")){var s=JSON.parse(o.getAttribute(f.ATTRIBUTE_BIS_SIZE)).h;a=r.NEW_RULES.replace(/\$\{.[^}]*\}/,s)}o.style.cssText+=a}}}catch(e){n.e(e)}finally{n.f()}}},{key:"getTargetUrl",value:function(e){var t=this.pinterestConfig.FEED_PAGE.TARGET_URL_QUERY,n=e.querySelector(t),r="";return n&&n.href&&(r=n.href),r}},{key:"getTitleText",value:function(e){var t=this.pinterestConfig.FEED_PAGE.TITLE_TEXT_QUERY,n=e.querySelector(t),r="";return n&&n.textContent.length&&(r=n.textContent),r}},{key:"isFeedPageURL",value:function(){return-1===document.location.href.search(/\.pinterest\..{1,6}\/(pin|search)\//)}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(n(2978));e.exports=y},2455:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(1453),h=n(2315),y=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,i])).id=e,o.pinterestConfig=r,o.adBlockerAgent=i,o.pinContainer=null,o.adPlacementType=f.PINTEREST_AD_PLACEMENT_TYPE_PIN,o.lastPinAdsCheckTime=0,o.pinObserver=null,o.observerNodesListenerInterval=null,o.observerNodesChecksAmount=0,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"isCarousel",value:function(){}},{key:"HideElement",value:function(){}},{key:"getGlobalContainer",value:function(){}},{key:"sendAdCandidatesToBackground",value:function(e,t){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdPinterestObject",value:function(e,t,n,r,i,o,a){}},{key:"isVideo",value:function(e,t){}},{key:"removeCloneElement",value:function(e){}},{key:"IsPostContentRendered",value:function(e,t,n){}},{key:"ActualizeDetector",value:function(){return this.pinContainer=this.getPinContainer(),!!this.pinContainer}},{key:"ActivateMutationObserver",value:function(){var e=this;this.pinContainer?(this.pinObserver||(this.pinObserver=new MutationObserver(this.DetectCandidates.bind(this,f.AD_DETECTOR_INITIATOR_MUTATION)),this.pinObserver.observe(this.pinContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.pinObserver&&(e.pinObserver.disconnect(),e.pinObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.pinObserver&&(this.pinObserver.disconnect(),this.pinObserver=null,this.pinContainer=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){var e=this,t=this.detectPromotedPins();if(t&&t.length){var n,r=i(t);try{var o=function(){var t=n.value;if(h.GetElementSize(t),!t.hasAttribute(f.ATTRIBUTE_BIS_ID)){var r=h.GenerateAndSetBisIdToPinterestAds(t);e.setSizesAndIdForAllElements(t);var i=e.createHTML(t),o=e.getAdvertiserName(t),a=e.getTargetUrl(t),s=e.getTitleText(t),u=e.getAdvertiserUrl(t),c=e.getAdPinterestObject(t,i,o,a,s,u,e.adPlacementType);e.isVideo(t,e.pinterestConfig.PIN_PAGE.TAGS_FOR_VIDEO_CHECK)&&(c.videoData={}),e.adBlockerAgent.IsEnabledForPinterest()&&!e.adBlockerAgent.IsElementHidden(t)&&(e.HideElement(t),e.adBlockerAgent.SetHiddenAmount(1)),e.removeCloneElement(i);var l=setTimeout((function(){e.sendAdCandidatesToBackground.call(e,r,c),clearTimeout(l)}),100)}};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}}},{key:"detectPromotedPins",value:function(){var e=this;if(!this.pinContainer)return[];for(var t=[],n=this.pinterestConfig.PIN_PAGE.IMG_SPACE_PERCENTAGE,r=this.pinterestConfig.PIN_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,o=Array.from(this.pinContainer.childNodes),a=this.pinterestConfig.PROMOTED_ALIASES,s=function(){var o=c[u];if(e.IsPostContentRendered(o,n,e.pinterestConfig.PIN_PAGE.TAGS_FOR_LOADING_CHECK)){var s=o.querySelector(e.pinterestConfig.PIN_PAGE.PROMOTED_PINS_QUERY);if(!s)return 1;var l=s.innerText;if(!l||"style"===s.nodeName.toLowerCase()){var d=window.getComputedStyle(s,":before");l=s.textContent,d&&d.content&&!l&&(l=d.content);var f,h=i(r);try{for(h.s();!(f=h.n()).done;){var y=f.value;if(!l){l="";break}var E=y[0],A=y[1],v="join"!==E?new RegExp(A,"g"):"";l="join"!==E||1!==l.length?"replace"===E?l[E](v,""):l[E](v):l[0]}}catch(e){h.e(e)}finally{h.f()}}a.some((function(e){return l.search(e)>=0}))&&t.push(o)}},u=0,c=o;u<c.length;u++)s();return t}},{key:"getPinContainer",value:function(){var e=this.getGlobalContainer(),t=null;return e?t=e.querySelector(this.pinterestConfig.PIN_PAGE.CONTAINER_QUERY):t}},{key:"cloneBodyWithStyles",get:function(){var e=document.createElement("body"),t=document.querySelectorAll("body style");return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"cloneHeadWithStyles",get:function(){var e=document.createElement("head"),t=document.querySelectorAll('head link[rel="stylesheet"], head script');return t&&t.forEach((function(t){var n=t.cloneNode();e.appendChild(n)})),e}},{key:"createHTML",value:function(e){var t=document.createElement("html"),n=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,i=e.cloneNode(!0);return this.styleFixes(i),n.appendChild(i),t.appendChild(r),t.appendChild(n),t}},{key:"getAdvertiserName",value:function(e){for(var t=this.pinterestConfig.PIN_PAGE.ADVERTISER_NAME_QUERY,n=0,r=Array.from(e.querySelectorAll(t));n<r.length;n++){var i=r[n];if(i&&i.innerText)return i.innerText}return""}},{key:"getAdvertiserUrl",value:function(e){var t=this.pinterestConfig.PIN_PAGE.ADVERTISER_PINTEREST_URL_QUERY,n=e.querySelector(t);return n?n.href:""}},{key:"getTitleText",value:function(e){var t=this.pinterestConfig.PIN_PAGE.TITLE_TEXT_QUERY,n=e.querySelector(t),r="";return n&&n.textContent.length&&(r=n.textContent),r}},{key:"styleFixes",value:function(e){e.style.cssText=e.style.cssText.replace(/transform.[^;]*;/,"");var t,n=i(this.pinterestConfig.PIN_PAGE.STYLE_FIXES);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=e.querySelector(r.ELEMENT_QUERY),a=r.NEW_RULES;if(o){if(r.NEW_RULES.includes("${")){var s=JSON.parse(o.getAttribute(f.ATTRIBUTE_BIS_SIZE)).h;a=r.NEW_RULES.replace(/\$\{.[^}]*\}/,s)}o.style.cssText+=a}}}catch(e){n.e(e)}finally{n.f()}}},{key:"getTargetUrl",value:function(e){var t=this.pinterestConfig.PIN_PAGE.TARGET_URL_QUERY,n=e.querySelector(t),r="";return n&&n.href&&(r=n.href),r}},{key:"isPinPageURL",value:function(){return!(-1===document.location.href.search(/\.pinterest\..{1,6}\/(pin)\//))}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(n(2978));e.exports=y},9038:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(1453),h=n(2315),y=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,i])).id=e,o.pinterestConfig=r,o.adBlockerAgent=i,o.searchContainer=null,o.lastSearchPageAdsCheckTime=0,o.searchPageObserver=null,o.observerNodesListenerInterval=null,o.observerNodesChecksAmount=0,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"isCarousel",value:function(){}},{key:"HideElement",value:function(){}},{key:"getGlobalContainer",value:function(){}},{key:"sendAdCandidatesToBackground",value:function(e,t){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdPinterestObject",value:function(e,t,n,r,i,o,a){}},{key:"isVideo",value:function(e,t){}},{key:"removeCloneElement",value:function(e){}},{key:"IsPostContentRendered",value:function(e,t,n){}},{key:"ActualizeDetector",value:function(){return this.searchContainer=this.getSearchContainer(),!!this.searchContainer}},{key:"ActivateMutationObserver",value:function(){var e=this;this.searchContainer?(this.searchPageObserver||(this.searchPageObserver=new MutationObserver(this.DetectCandidates.bind(this,f.AD_DETECTOR_INITIATOR_MUTATION)),this.searchPageObserver.observe(this.searchContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.searchPageObserver&&(e.searchPageObserver.disconnect(),e.searchPageObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.searchPageObserver&&(this.searchPageObserver.disconnect(),this.searchPageObserver=null,this.searchContainer=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){var e=this,t=this.detectPromotedPins();if(t&&t.length){var n,r=i(t);try{var o=function(){var t=n.value;if(h.GetElementSize(t),!t.hasAttribute(f.ATTRIBUTE_BIS_ID)){var r=h.GenerateAndSetBisIdToPinterestAds(t);e.setSizesAndIdForAllElements(t);var i=e.createHTML(t),o=e.getAdvertiserName(t),a=e.getTargetUrl(t),s=e.getTitleText(t),u=e.getAdvertiserUrl(t),c=e.getAdPinterestObject(t,i,o,a,s,u,f.PINTEREST_AD_PLACEMENT_TYPE_SEARCH);e.isVideo(t,e.pinterestConfig.SEARCH_PAGE.TAGS_FOR_VIDEO_CHECK)&&(c.videoData={}),e.adBlockerAgent.IsEnabledForPinterest()&&!e.AdBlockerAgent.IsElementHidden(t)&&(e.HideElement(t),e.adBlockerAgent.SetHiddenAmount(1)),e.removeCloneElement(i);var l=setTimeout((function(){e.sendAdCandidatesToBackground.call(e,r,c),clearTimeout(l)}),100)}};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}}},{key:"detectPromotedPins",value:function(){var e=this;if(!this.searchContainer)return[];for(var t=[],n=this.pinterestConfig.SEARCH_PAGE.IMG_SPACE_PERCENTAGE,r=this.pinterestConfig.SEARCH_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,o=Array.from(this.searchContainer.childNodes),a=this.pinterestConfig.PROMOTED_ALIASES,s=function(){var o=c[u];if(e.IsPostContentRendered(o,n,e.pinterestConfig.SEARCH_PAGE.TAGS_FOR_LOADING_CHECK)){var s=o.querySelector(e.pinterestConfig.SEARCH_PAGE.PROMOTED_PINS_QUERY);if(!s)return 1;var l=s.innerText;if(!l||"style"===s.nodeName.toLowerCase()){var d=window.getComputedStyle(s,":before");l=s.textContent,d&&d.content&&!l&&(l=d.content);var f,h=i(r);try{for(h.s();!(f=h.n()).done;){var y=f.value;if(!l){l="";break}var E=y[0],A=y[1],v="join"!==E?new RegExp(A,"g"):"";l="join"!==E||1!==l.length?"replace"===E?l[E](v,""):l[E](v):l[0]}}catch(e){h.e(e)}finally{h.f()}}a.some((function(e){return l.search(e)>=0}))&&t.push(o)}},u=0,c=o;u<c.length;u++)s();return t}},{key:"getSearchContainer",value:function(){var e=this.getGlobalContainer(),t=null;return e?t=e.querySelector(this.pinterestConfig.SEARCH_PAGE.CONTAINER_QUERY):t}},{key:"cloneBodyWithStyles",get:function(){var e=document.createElement("body"),t=document.querySelectorAll("body style");return t&&t.forEach((function(t){var n=t.cloneNode(!0);e.appendChild(n)})),e}},{key:"cloneHeadWithStyles",get:function(){var e=document.createElement("head"),t=document.querySelectorAll('head link[rel="stylesheet"], head script');return t&&t.forEach((function(t){var n=t.cloneNode();e.appendChild(n)})),e}},{key:"createHTML",value:function(e){var t=document.createElement("html"),n=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,i=e.cloneNode(!0);return this.styleFixes(i),n.appendChild(i),t.appendChild(r),t.appendChild(n),t}},{key:"getAdvertiserName",value:function(e){for(var t=this.pinterestConfig.SEARCH_PAGE.ADVERTISER_NAME_QUERY,n=0,r=Array.from(e.querySelectorAll(t));n<r.length;n++){var i=r[n];if(i&&i.innerText)return i.innerText}return""}},{key:"getAdvertiserUrl",value:function(e){var t=this.pinterestConfig.SEARCH_PAGE.ADVERTISER_PINTEREST_URL_QUERY,n=e.querySelector(t);return n?n.href:""}},{key:"styleFixes",value:function(e){e.style.cssText=e.style.cssText.replace(/transform.[^;]*;/,"");var t,n=i(this.pinterestConfig.SEARCH_PAGE.STYLE_FIXES);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=e.querySelector(r.ELEMENT_QUERY),a=r.NEW_RULES;if(o){if(r.NEW_RULES.includes("${")){var s=JSON.parse(o.getAttribute(f.ATTRIBUTE_BIS_SIZE)).h;a=r.NEW_RULES.replace(/\$\{.[^}]*\}/,s)}o.style.cssText+=a}}}catch(e){n.e(e)}finally{n.f()}}},{key:"getTargetUrl",value:function(e){var t=this.pinterestConfig.SEARCH_PAGE.TARGET_URL_QUERY,n=e.querySelector(t),r="";return n&&n.href&&(r=n.href),r}},{key:"getTitleText",value:function(e){var t=this.pinterestConfig.SEARCH_PAGE.TITLE_TEXT_QUERY,n=e.querySelector(t),r="";return n&&n.textContent.length&&(r=n.textContent),r}},{key:"isSearchPageURL",value:function(){return!(-1===document.location.href.search(/\.pinterest\..{1,6}\/(search)\//))}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(n(2978));e.exports=y},6561:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2315),s=n(1453),u=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t},(t=[{key:"InjectDetector",value:function(e,t){if(document.head){var n=document.createElement("script");this.setAttributes(n),document.head.appendChild(n)}}},{key:"setAttributes",value:function(e){var t=a.getURL("../executers/".concat(s.PINTEREST_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("nonce",""),e.src=t}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=u},1072:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,n){return t=u(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var l=n(7769),d=n(7788),f=n(1453),h=n(2621),y=n(5837),E=n(368),A=n(4138),v=n(8186),m=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=a(this,t,[e])).id=e,i.RedditVideoTrafficDetector=null,i.onPageRefreshed=i.onPageUrlChanged,i.AdBlockerAgent=r,i.redditConfig=n.RedditConfig,i.RedditDetectorFeed=null,i.RedditDetectorComments=null,i.RedditDetectorRightColumn=null,i.ActivateTrafficDetector(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,r=[{key:"onPageUrlChanged",value:function(e,t){var n=this;this.available&&setTimeout((function(){n.DeactivateDetectors(f.AD_DETECTOR_INITIATOR_URL),n.ActivateDetectors()}),50)}},{key:"ActivateDetectors",value:function(){this.RedditDetectorFeed.ActivateDetector(),this.RedditDetectorComments.ActivateDetector(),this.RedditDetectorRightColumn.ActivateDetector()}},{key:"DeactivateDetectors",value:function(e){this.RedditDetectorFeed.DeactivateDetector(e),this.RedditDetectorComments.DeactivateDetector(e),this.RedditDetectorRightColumn.DeactivateDetector(e)}},{key:"ActivateDetector",value:function(e){e===f.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.RedditDetectorFeed=new E(this.id,this.redditConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.RedditDetectorComments=new A(this.id,this.redditConfig.COMMENT_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.RedditDetectorRightColumn=new v(this.id,this.redditConfig.RIGHT_COLUMN.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}},{key:"AddNecessaryMethods",value:function(){this.RedditDetectorFeed.isCarousel=this.isCarousel.bind(this),this.RedditDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorFeed.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorFeed.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorFeed.HideElement=this.HideElement.bind(this),this.RedditDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.RedditDetectorComments.HideElement=this.HideElement.bind(this),this.RedditDetectorComments.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorComments.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorComments.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorComments.doesElementExists=this.doesElementExists.bind(this),this.RedditDetectorRightColumn.HideElement=this.HideElement.bind(this),this.RedditDetectorRightColumn.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorRightColumn.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorRightColumn.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorRightColumn.doesElementExists=this.doesElementExists.bind(this)}},{key:"ActivateTrafficDetector",value:function(){this.RedditVideoTrafficDetector||(this.RedditVideoTrafficDetector=new d(this.id),this.RedditVideoTrafficDetector.InjectDetector(this.id+"_r",JSON.stringify(this.redditConfig)))}},{key:"processAndSendRedditAd",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.querySelector("[".concat(f.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));if(r){var i=!!r.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK);y.SendCandidatePlacementsCount(this.id,1,f.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT,null),y.SendAdCandidates(this.id,[t],f.MESSAGE_TYPE_CANDIDATES_DATA_REDDIT,null),h.CONFIG_MARK_AD_CANDIDATES&&h.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&(r.style.cssText+=n?f.STYLES_OUTLINE_VIDEO_AD:i?f.STYLES_OUTLINE_TEXT_AD:f.STYLES_OUTLINE_SUCCESS_DETECT)}}}],r&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(l);e.exports=m},4138:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2978),h=n(1453),y=n(2315),E=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,r])).id=e,o.redditConfig=i,o.commentPageContainer=null,o.AdBlockerAgent=r,o.commentPageObserver=null,o.adPlacementType=h.REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"HideElement",value:function(){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdRedditObject",value:function(e,t,n,r){}},{key:"doesElementExists",value:function(e){}},{key:"ActualizeDetector",value:function(){return this.commentPageContainer=this.getCommentPageContainer,!!this.commentPageContainer}},{key:"ActivateMutationObserver",value:function(){var e=this;this.commentPageContainer?(this.commentPageObserver||(this.commentPageObserver=new MutationObserver(this.DetectCandidates.bind(this,h.AD_DETECTOR_INITIATOR_MUTATION)),this.commentPageObserver.observe(this.commentPageContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.commentPageObserver&&(e.commentPageObserver.disconnect(),e.commentPageObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.commentPageObserver&&(this.commentPageObserver.disconnect(),this.commentPageObserver=null,this.isObserverAlreadySet=!1)}},{key:"getCommentPageContainer",get:function(){var e,t=this.redditConfig.COMMENT_PAGE.QUERIES,n=this.redditConfig.COMMENT_PAGE.MIN_HEIGHT,r=window.innerWidth,o=this.redditConfig.COMMENT_PAGE.QUERY_TO_EXCLUDE,a=this.redditConfig.COMMENT_PAGE.TOP_DISTANCE,s=i(t);try{for(s.s();!(e=s.n()).done;)for(var u=e.value,c=Array.from(document.querySelectorAll(u)),l=0,d=c;l<d.length;l++){var f=d[l],h=f.getBoundingClientRect(),y=(r-parseInt(f.offsetWidth))/r*100,E=Array.from(f.children);if(parseInt(f.offsetHeight)>n&&y>2&&(parseInt(h.top)>a||parseInt(h.top)<0)&&E.length>=3&&!f.querySelector(o))return f}}catch(e){s.e(e)}finally{s.f()}return null}},{key:"Detector",value:function(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processCommentPageAds(!0),this.isCommentPage&&this.commentPageContainer&&this.processCommentPageAds()}},{key:"processCommentPageAds",value:function(){this.extractOccurrences()}},{key:"allCellsAndMinImgSpace",value:function(){var e=this,t=[],n=0;return this.commentPageContainer&&(t=Array.from(this.commentPageContainer.children),n=this.redditConfig.COMMENT_PAGE.IMG_SPACE_PERCENTAGE),{allCells:t=t.filter((function(t){return e.isPromoted(t)})),minImgSquarePercentage:n}}},{key:"extractOccurrences",value:function(){var e=this.allCellsAndMinImgSpace(),t=e.allCells,n=e.minImgSquarePercentage;if(t.length){var r,o=i(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!a.hasAttribute(h.ATTRIBUTE_BIS_ID)&&!a.hasAttribute(h.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(a,n)&&this.isAvatarImgReady(a)){var s=y.GenerateAndSetBisIdToRedditAds(a),u=this.isVideoPost(a);if(this.isShadowRootExist(a)){var c=this.deepClone(a),l=this.buildBannerHtml(c,this.adPlacementType),d=this.lookingTargetUrl(l),f=this.getAdRedditObject(a,l,d,this.adPlacementType);u&&(f.videoData=this.lookingForVideoDataInContent(a)),this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(a)&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),c.remove(),setTimeout(this.ExtractAd.bind(this,s,f,u),100)}else{this.setSizesAndIdForAllElements(a);var E=a.cloneNode(!0),A=this.buildBannerHtml(E,this.adPlacementType),v=this.lookingTargetUrl(A),m=this.getAdRedditObject(a,A,v,this.adPlacementType);u&&(m.videoData=this.lookingForVideoDataInContent(a)),this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),E.remove(),setTimeout(this.ExtractAd.bind(this,s,m,u),100)}}}}catch(e){o.e(e)}finally{o.f()}}}},{key:"isShadowRootExist",value:function(e){return!!e.shadowRoot||Array.from(e.querySelectorAll("*")).some((function(e){return e.shadowRoot}))}},{key:"deepClone",value:function(e){var t=this,n=1,r=document.createElement("div");return function e(r,i){var o=function(t,n){for(;t;)e(t,n),t=t.nextSibling};if(r){var a=r.cloneNode(!1);"SLOT"===r.nodeName&&(r.setAttribute("data-assigning-slot-id",n),a.setAttribute("data-assigning-slot-id",n)),r.assignedSlot&&r instanceof Element&&r.assignedSlot.hasAttribute("data-assigning-slot-id")&&a.setAttribute("data-assigned-to",r.assignedSlot.getAttribute("data-assigning-slot-id")),n+=1,i.appendChild(a),r.shadowRoot&&(t.setSizesAndIdForAllElements(r.shadowRoot),r.shadowRoot&&r.shadowRoot.firstChild.setAttribute&&y.SetFullSizeToElement(r.shadowRoot.firstChild),o(r.shadowRoot.firstChild,a)),t.setSizesAndIdForAllElements(r),r&&r.setAttribute&&y.SetFullSizeToElement(r),o(r.firstChild,a)}}(e,r),this.replaceElementsToRightSlots(r.firstElementChild),r.firstElementChild}},{key:"replaceElementsToRightSlots",value:function(e){var t,n=e.querySelectorAll("*[data-assigned-to]"),r=e.querySelectorAll("*[data-assigning-slot-id]"),o=i(n);try{for(o.s();!(t=o.n()).done;){var a,s=t.value,u=s.getAttribute("data-assigned-to"),c=i(r);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(u===l.getAttribute("data-assigning-slot-id")){l.appendChild(s);break}}}catch(e){c.e(e)}finally{c.f()}}}catch(e){o.e(e)}finally{o.f()}}},{key:"buildBannerHtml",value:function(e,t){var n=this.commentPageContainer;this.setWrapperClass(n);var r=this.headCopyWithStyles,i=document.createElement("html"),o=this.bodyCopyWithStyles,a=document.createElement("div"),s=n.cloneNode();return a.appendChild(s),this.setWrapperStyles(n,a),r.appendChild(this.getClassNameForStyles(e)),i.appendChild(r),s.appendChild(e),o.appendChild(a),i.appendChild(o),i}},{key:"setWrapperClass",value:function(e){var t=e.parentElement,n=!1;if(t)for(var r=0;r<50&&!n&&t;r++)if(t.nextSibling&&-1!==t.nextSibling.nodeName.search(/style/i)&&t.previousSibling&&-1!==t.previousSibling.nodeName.search(/style/i)){var i=t.getAttribute("class");e.className+=e.className.length?" "+i:i,n=!0}else t=t.parentElement}},{key:"headCopyWithStyles",get:function(){var e=this,t=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((function(n){for(var r=n.KEY,i=n.ALL_STYLES_FROM,o=n.COMMENT_PAGE,a=function(){var t=u[s];if(-1===t.nodeName.search(/^(style|link)$/gi))return t.remove(),1;if(t.dataset[r]){var n=i.some((function(e){return t.dataset[r].includes(e)}));!n&&e.isCommentPage&&(n=o.some((function(e){return t.dataset[r].includes(e)}))),n||t.remove()}},s=0,u=Array.from(t.children);s<u.length;s++)a()})),this.neccesaryStyleRules){var n=document.createElement("style");n.innerHTML=this.neccesaryStyleRules,t.appendChild(n)}return this.getStylesByTagName(t),t}},{key:"neccesaryStyleRules",get:function(){var e=null,t=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((function(e){var t,n=new RegExp(e,"gi"),r=document.querySelector("head").outerHTML.match(n);return r&&r.length&&(t=r.join("")),t})).filter((function(e){return e}));return t&&t.length&&(e=t.join("")),e}},{key:"getClassNameForStyles",value:function(e){var t=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((function(n){for(var r=e.querySelector(n.CLASS_NAME_CHILD),i=r&&r.parentElement?r.parentElement:null,o="",a=1;a<n.DEEP_LEVEL;a++)i&&(i=i.parentElement);i&&(o=i.classList[0],t.innerHTML+="."+o+n.STYLES)})),t}},{key:"getStylesByTagName",value:function(e){var t=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((function(t){var n=new RegExp(t.ATTRIBUTE_REGEX_VALUE);return Array.from(e.querySelectorAll(t.TAG_NAME)).filter((function(e){if(e&&e[t.ATTRIBUTE_NAME]&&-1!==e[t.ATTRIBUTE_NAME].search(n))return e;e.remove()}))})).filter((function(e){return e})).forEach((function(e){t=t.concat(e)})),t.forEach((function(t){e.appendChild(t)}))}},{key:"bodyCopyWithStyles",get:function(){var e,t=document.createElement("body"),n=null===(e=document.querySelector("body style"))||void 0===e?void 0:e.cloneNode(!0);return n&&t.appendChild(n),t}},{key:"isPromoted",value:function(e){var t=this;if(e){var n=e,r=null;1===n.childElementCount&&n.firstElementChild.shadowRoot&&n.firstElementChild.shadowRoot.firstElementChild?r=n.firstElementChild.shadowRoot.firstElementChild:n.shadowRoot&&(r=n.shadowRoot.firstElementChild);var i=[];r&&(i=Array.from(r.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)));var o=Array.from(n.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)).concat(i);if(o.length)return o.some((function(e){var n=e.textContent.trim().toLowerCase();return n?t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0})):e.dataset.beforeContent?(n=e.dataset.beforeContent,t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0}))):void 0}))}return!1}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=e.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(r&&0===r.length){var i=y.GetFullElementSize(e);i.w>0&&y.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,e,i).some((function(e){return e>=t}))&&(n=!0)}e.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(n=!0)}return n}},{key:"lookingTargetUrl",value:function(e){var t="",n=Array.from(e.querySelectorAll('a[target="_blank"]')).filter((function(e){return!(!e||!e.href||e.href.includes("reddit.com/user/"))}));return n.length&&(t=n[0].href),t}},{key:"isAvatarImgReady",value:function(e){if(!e)return!1;var t=[e],n=null;1===e.childElementCount&&e.firstElementChild.shadowRoot&&(n=e.firstElementChild.shadowRoot.firstElementChild),e.shadowRoot&&(n=e.shadowRoot.firstElementChild),n&&t.push(n);for(var r=!1,i=0,o=t;i<o.length;i++){var a=o[i].querySelector(this.redditConfig.QUERY_CHECK_READY_AD_CELLS);if(a){if(!a.shadowRoot)return!0;if(r=!!a.shadowRoot&&!!a.shadowRoot.querySelector("img"))break}}return r}},{key:"isVideoPost",value:function(e){var t=this,n=!1;return e&&(n=Array.from(e.querySelectorAll("*")).some((function(e){var n=!!e.querySelectorAll(t.redditConfig.TAGS_FOR_VIDEO_CHECK).length;return!n&&e.shadowRoot&&(n=!!e.shadowRoot.querySelectorAll(t.redditConfig.TAGS_FOR_VIDEO_CHECK).length),n}))),n}},{key:"lookingForVideoDataInContent",value:function(e){var t=this.redditConfig.VIDEO_TRAFFIC_DETECTOR.QUERY_VIDEO_DATA_FROM_CONTENT,n=e.querySelector(t);if(n){var r=n.getAttribute("src");if(n.getAttribute("poster"),r&&!r.includes("blob:")){var i,o=new RegExp(this.redditConfig.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX),a=r.match(o);if(null!=a&&null!==(i=a.groups)&&void 0!==i&&i.videoId)return{videoId:a.groups.videoId,url:r}}}return{}}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"setWrapperStyles",value:function(e,t){t.style.cssText=t.style.cssText+"max-width: ".concat(this.maxWidthContainer(e))}},{key:"isCommentPage",get:function(){return-1!==window.location.href.indexOf(this.redditConfig.COMMENT_PAGE.TEXT_FROM_HREF)}},{key:"isCommentPopup",get:function(){return!!document.querySelector(this.redditConfig.COMMENT_PAGE.QUERY_IS_POPUP)}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(f);e.exports=E},368:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2978),h=n(1453),y=n(2315),E=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,r])).id=e,o.feedObserver=null,o.redditConfig=i,o.feedContainer=null,o.AdBlockerAgent=r,o.lastTopPosition=null,o.adPlacementType=h.REDDIT_AD_PLACEMENT_TYPE_FEED,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"isCarousel",value:function(){}},{key:"HideElement",value:function(){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdRedditObject",value:function(e,t,n,r){}},{key:"doesElementExists",value:function(e){}},{key:"ActualizeDetector",value:function(){return!!this.isValidUrl&&(this.feedContainer=this.getFeedContainer,!!this.feedContainer)}},{key:"ActivateMutationObserver",value:function(){var e=this;this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,h.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.feedObserver&&(e.feedObserver.disconnect(),e.feedObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.feedObserver&&(this.lastTopPosition=parseInt(this.feedContainer.getBoundingClientRect().top),this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processFeedAds(),this.isCommentPage||this.isCommentPopup||(this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processFeedAds())}},{key:"processFeedAds",value:function(){this.extractOccurrences()}},{key:"allCellsAndMinImgSpace",value:function(){var e=this,t=[],n=0;if(this.feedContainer){var r=Array.from(this.feedContainer.children),i=Array.from(document.querySelectorAll(this.redditConfig.FEED.QUERY_POSTS));t=r,i&&i.length&&(t=r.concat(i)),n=this.redditConfig.FEED.IMG_SPACE_PERCENTAGE}return{allCells:t=t.filter((function(t){return e.isPromoted(t)&&t.offsetHeight<e.redditConfig.FEED.MAX_CHILD_HEIGHT})),minImgSquarePercentage:n}}},{key:"extractOccurrences",value:function(){var e=this.allCellsAndMinImgSpace(),t=e.allCells,n=e.minImgSquarePercentage;if(t.length){var r,o=i(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!a.hasAttribute(h.ATTRIBUTE_BIS_ID)&&!a.hasAttribute(h.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(a,n)&&this.isAvatarImgReady(a)){this.isCarousel(a)&&this.redditConfig.IS_ACTIVE_GET_SLIDES_SRC&&this.getSlidesSrc(a);var s=y.GenerateAndSetBisIdToRedditAds(a),u=this.isVideoPost(a);if(this.isShadowRootExist(a)){var c=this.deepClone(a),l=this.buildBannerHtml(c,this.adPlacementType),d=this.getAdRedditObject(a,l,"",this.adPlacementType);u&&(d.videoData=this.lookingForVideoDataInContent(a)),this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(a)&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),c.remove(),setTimeout(this.ExtractAd.bind(this,s,d,u),100)}else{this.setSizesAndIdForAllElements(a);var f=a.cloneNode(!0),E=this.buildBannerHtml(f,this.adPlacementType),A=this.getAdRedditObject(a,E,"",this.adPlacementType);A.size.h<300&&(A.size=y.SetFullSizeToElement(a)),u&&(A.videoData=this.lookingForVideoDataInContent(a)),this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),f.remove(),setTimeout(this.ExtractAd.bind(this,s,A,u),100)}}}}catch(e){o.e(e)}finally{o.f()}}}},{key:"isShadowRootExist",value:function(e){return!!e.shadowRoot||Array.from(e.querySelectorAll("*")).some((function(e){return e.shadowRoot}))}},{key:"deepClone",value:function(e){var t=this,n=1,r=document.createElement("div");return function e(r,i){var o=function(t,n){for(;t;)e(t,n),t=t.nextSibling};if(r){var a=r.cloneNode(!1);"SLOT"===r.nodeName&&(r.setAttribute("data-assigning-slot-id",n),a.setAttribute("data-assigning-slot-id",n)),r.assignedSlot&&r instanceof Element&&r.assignedSlot.hasAttribute("data-assigning-slot-id")&&a.setAttribute("data-assigned-to",r.assignedSlot.getAttribute("data-assigning-slot-id")),n+=1,i.appendChild(a),r.shadowRoot&&(t.setSizesAndIdForAllElements(r.shadowRoot),r.shadowRoot&&r.shadowRoot.firstChild.setAttribute&&y.SetFullSizeToElement(r.shadowRoot.firstChild),o(r.shadowRoot.firstChild,a)),t.setSizesAndIdForAllElements(r),r&&r.setAttribute&&y.SetFullSizeToElement(r),o(r.firstChild,a)}}(e,r),this.replaceElementsToRightSlots(r.firstElementChild),r.firstElementChild}},{key:"replaceElementsToRightSlots",value:function(e){var t,n=e.querySelectorAll("*[data-assigned-to]"),r=e.querySelectorAll("*[data-assigning-slot-id]"),o=i(n);try{for(o.s();!(t=o.n()).done;){var a,s=t.value,u=s.getAttribute("data-assigned-to"),c=i(r);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(u===l.getAttribute("data-assigning-slot-id")){l.appendChild(s);break}}}catch(e){c.e(e)}finally{c.f()}}}catch(e){o.e(e)}finally{o.f()}}},{key:"getSlidesSrc",value:function(e){var t=e.querySelector("ul").parentElement,n=t.querySelector(this.redditConfig.CAROUSEL_BUTTON_NEXT),r=t.querySelector(this.redditConfig.CAROUSEL_BUTTON_PREVIUOS);n&&r&&(n.click(),r.click())}},{key:"buildBannerHtml",value:function(e,t){var n=this.feedContainer;this.setWrapperClass(n);var r=this.headCopyWithStyles,i=document.createElement("html"),o=this.bodyCopyWithStyles,a=document.createElement("div"),s=n.cloneNode();return a.appendChild(s),this.setWrapperStyles(n,a),r.appendChild(this.getClassNameForStyles(e)),i.appendChild(r),s.appendChild(e),o.appendChild(a),i.appendChild(o),i}},{key:"setWrapperClass",value:function(e){var t=e.parentElement,n=!1;if(t)for(var r=0;r<50&&!n&&t;r++)if(t.nextSibling&&-1!==t.nextSibling.nodeName.search(/style/i)&&t.previousSibling&&-1!==t.previousSibling.nodeName.search(/style/i)){var i=t.getAttribute("class");e.className+=e.className.length?" "+i:i,n=!0}else t=t.parentElement}},{key:"setWrapperStyles",value:function(e,t){t.style.cssText=t.style.cssText+"max-width: ".concat(this.maxWidthContainer(e))}},{key:"getFeedContainer",get:function(){var e,t=this.redditConfig.FEED.QUERIES,n=window.innerWidth,r=this.redditConfig.FEED.SECONDARY_CHECK_QUERY,o=this.redditConfig.FEED.QUERY_TO_EXCLUDE,a=i(t);try{for(a.s();!(e=a.n()).done;)for(var s=e.value,u=Array.from(document.querySelectorAll(s)),c=0,l=u;c<l.length;c++){var d=l[c],f=getComputedStyle(d),h=(n-parseInt(f.width))/n*100;if(parseInt(f.height)>1e3&&h>2&&!d.querySelector(o))return d.querySelector(r)?d.querySelector(r):d}}catch(e){a.e(e)}finally{a.f()}return null}},{key:"headCopyWithStyles",get:function(){var e=this,t=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((function(n){for(var r=n.KEY,i=n.ALL_STYLES_FROM,o=n.FEED_PAGE,a=function(){var t=u[s];if(-1===t.nodeName.search(/^(style|link)$/gi))return t.remove(),1;if(t.dataset[r]){var n=i.some((function(e){return t.dataset[r].includes(e)}));n||e.isCommentPage||(n=o.some((function(e){return t.dataset[r].includes(e)}))),n||t.remove()}},s=0,u=Array.from(t.children);s<u.length;s++)a()})),this.neccesaryStyleRules){var n=document.createElement("style");n.innerHTML=this.neccesaryStyleRules,t.appendChild(n)}return this.getStylesByTagName(t),t}},{key:"neccesaryStyleRules",get:function(){var e=null,t=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((function(e){var t,n=new RegExp(e,"gi"),r=document.querySelector("head").outerHTML.match(n);return r&&r.length&&(t=r.join("")),t})).filter((function(e){return e}));return t&&t.length&&(e=t.join("")),e}},{key:"getClassNameForStyles",value:function(e){var t=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((function(n){for(var r=e.querySelector(n.CLASS_NAME_CHILD),i=r&&r.parentElement?r.parentElement:null,o="",a=1;a<n.DEEP_LEVEL;a++)i&&(i=i.parentElement);i&&(o=i.classList[0],t.innerHTML+="."+o+n.STYLES)})),t}},{key:"getStylesByTagName",value:function(e){var t=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((function(t){var n=new RegExp(t.ATTRIBUTE_REGEX_VALUE);return Array.from(e.querySelectorAll(t.TAG_NAME)).filter((function(e){if(e&&e[t.ATTRIBUTE_NAME]&&-1!==e[t.ATTRIBUTE_NAME].search(n))return e;e.remove()}))})).filter((function(e){return e})).forEach((function(e){t=t.concat(e)})),t.forEach((function(t){e.appendChild(t)}))}},{key:"bodyCopyWithStyles",get:function(){var e=document.createElement("body"),t=Array.from(document.querySelectorAll("body style")).map((function(e){if(e)return e.cloneNode(!0)}));return t&&t.forEach((function(t){e.appendChild(t)})),e}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"isVideoPost",value:function(e){var t=this,n=!1;return e&&(n=Array.from(e.querySelectorAll("*")).some((function(e){var n=!!e.querySelectorAll(t.redditConfig.TAGS_FOR_VIDEO_CHECK).length;return!n&&e.shadowRoot&&(n=!!e.shadowRoot.querySelectorAll(t.redditConfig.TAGS_FOR_VIDEO_CHECK).length),n}))),n}},{key:"lookingForVideoDataInContent",value:function(e){var t=this.redditConfig.VIDEO_TRAFFIC_DETECTOR.QUERY_VIDEO_DATA_FROM_CONTENT,n=e.querySelector(t);if(n){var r=n.getAttribute("src");if(n.getAttribute("poster"),r&&!r.includes("blob:")){var i,o=new RegExp(this.redditConfig.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX),a=r.match(o);if(null!=a&&null!==(i=a.groups)&&void 0!==i&&i.videoId)return{videoId:a.groups.videoId,url:r}}}return{}}},{key:"isPromoted",value:function(e){var t=this;if(e){var n=e;1===n.childElementCount&&n.firstElementChild.shadowRoot&&n.firstElementChild.shadowRoot.firstElementChild&&(n=n.firstElementChild.shadowRoot.firstElementChild);var r=Array.from(n.querySelectorAll(this.redditConfig.FEED.PROMOTED_SELECTOR)),i=Array.from(n.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)),o=Array.from(e.querySelectorAll(this.redditConfig.RIGHT_COLUMN.PROMOTED_SELECTOR)),a=r.concat(o).concat(i);if(a.length)return a.some((function(e){var n=e.textContent.trim().toLowerCase();return n?t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0})):e.dataset.beforeContent?(n=e.dataset.beforeContent,t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0}))):void 0}))}return!1}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=e.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(r&&0===r.length){var i=y.GetFullElementSize(e);i.w>0&&y.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,e,i).some((function(e){return e>=t}))&&(n=!0)}e.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(n=!0)}return n}},{key:"isAvatarImgReady",value:function(e){if(!e)return!1;var t=[e],n=null;1===e.childElementCount&&e.firstElementChild.shadowRoot&&(n=e.firstElementChild.shadowRoot.firstElementChild),e.shadowRoot&&(n=e.shadowRoot.firstElementChild),n&&t.push(n);for(var r=!1,i=0,o=t;i<o.length;i++){var a=o[i].querySelector(this.redditConfig.QUERY_CHECK_READY_AD_CELLS);if(a){if(!a.shadowRoot)return!0;if(r=!!a.shadowRoot&&!!a.shadowRoot.querySelector("img"))break}}return r}},{key:"isValidUrl",get:function(){return!this.redditConfig.FEED.INVALID_URL_PATHS.some((function(e){return window.location.href.includes(e)}))}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(f);e.exports=E},8186:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2978),h=n(1453),y=n(2315),E=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,r])).id=e,o.rightColumnObserver=null,o.redditConfig=i,o.rightColumnContainer=null,o.AdBlockerAgent=r,o.lastTopPosition=null,o.adPlacementType=h.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"HideElement",value:function(){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdRedditObject",value:function(e,t,n,r){}},{key:"doesElementExists",value:function(e){}},{key:"ActualizeDetector",value:function(){return this.rightColumnContainer=this.getRightColumnContainer,!!this.rightColumnContainer}},{key:"ActivateMutationObserver",value:function(){var e=this;this.rightColumnContainer?(this.rightColumnObserver||(this.rightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,h.AD_DETECTOR_INITIATOR_MUTATION)),this.rightColumnObserver.observe(this.rightColumnContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.rightColumnObserver&&(e.rightColumnObserver.disconnect(),e.rightColumnObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processRightColumnAds(!0),this.rightColumnContainer=this.doesElementExists(this.rightColumnContainer)?this.rightColumnContainer:this.getRightColumnContainer,this.rightColumnContainer&&this.processRightColumnAds()}},{key:"processRightColumnAds",value:function(e){this.extractOccurrences(h.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN)}},{key:"allCellsAndMinImgSpace",value:function(){var e=this,t=[],n=0;return this.rightColumnContainer&&this.rightColumnContainer.children&&(t=Array.from(this.rightColumnContainer.children).map((function(e){return e.querySelector("div ~ div > button")?e.querySelector("div:nth-child(1)"):"HR"===e.nodeName||0===e.getBoundingClientRect().height?null:e})).filter((function(e){return e})),n=this.redditConfig.RIGHT_COLUMN.IMG_SPACE_PERCENTAGE),{allCells:t=t.filter((function(t){return e.isPromoted(t)})),minImgSquarePercentage:n}}},{key:"extractOccurrences",value:function(){var e=this.allCellsAndMinImgSpace(),t=e.allCells,n=e.minImgSquarePercentage;if(t.length){var r,o=i(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!a.hasAttribute(h.ATTRIBUTE_BIS_ID)&&!a.hasAttribute(h.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(a,n)){var s=y.GenerateAndSetBisIdToRedditAds(a);if(this.isShadowRootExist(a)){var u=this.deepClone(a),c=this.buildBannerHtml(u),l=this.lookingTargetUrl(c),d=this.getAdRedditObject(a,c,l,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(a)&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),u.remove(),setTimeout(this.ExtractAd.bind(this,s,d),100)}else{this.setSizesAndIdForAllElements(a);var f=a.cloneNode(!0),E=this.buildBannerHtml(f),A=this.lookingTargetUrl(E),v=this.getAdRedditObject(a,E,A,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(a)&&(this.HideElement(a),this.AdBlockerAgent.SetHiddenAmount(1)),f.remove(),setTimeout(this.ExtractAd.bind(this,s,v),100)}}}}catch(e){o.e(e)}finally{o.f()}}}},{key:"isShadowRootExist",value:function(e){return!!e.shadowRoot||Array.from(e.querySelectorAll("*")).some((function(e){return e.shadowRoot}))}},{key:"deepClone",value:function(e){var t=this,n=1,r=document.createElement("div");return function e(r,i){var o=function(t,n){for(;t;)e(t,n),t=t.nextSibling};if(r){var a=r.cloneNode(!1);"SLOT"===r.nodeName&&(r.setAttribute("data-assigning-slot-id",n),a.setAttribute("data-assigning-slot-id",n)),r.assignedSlot&&r instanceof Element&&r.assignedSlot.hasAttribute("data-assigning-slot-id")&&a.setAttribute("data-assigned-to",r.assignedSlot.getAttribute("data-assigning-slot-id")),n+=1,i.appendChild(a),r.shadowRoot&&(t.setSizesAndIdForAllElements(r.shadowRoot),r.shadowRoot&&r.shadowRoot.firstChild.setAttribute&&y.SetFullSizeToElement(r.shadowRoot.firstChild),o(r.shadowRoot.firstChild,a)),t.setSizesAndIdForAllElements(r),r&&r.setAttribute&&y.SetFullSizeToElement(r),o(r.firstChild,a)}}(e,r),this.replaceElementsToRightSlots(r.firstElementChild),r.firstElementChild}},{key:"buildBannerHtml",value:function(e){var t=this.rightColumnContainer;this.setWrapperClass(t);var n=this.headCopyWithStyles,r=document.createElement("html"),i=this.bodyCopyWithStyles,o=document.createElement("div"),a=t.cloneNode();return o.appendChild(a),this.setWrapperStyles(t,o),n.appendChild(this.getClassNameForStyles(e)),r.appendChild(n),a.appendChild(e),i.appendChild(o),r.appendChild(i),r}},{key:"setWrapperClass",value:function(e){var t=e.parentElement,n=!1;if(t)for(var r=0;r<50&&!n&&t;r++)if(t.nextSibling&&-1!==t.nextSibling.nodeName.search(/style/i)&&t.previousSibling&&-1!==t.previousSibling.nodeName.search(/style/i)){var i=t.getAttribute("class");e.className+=e.className.length?" "+i:i,n=!0}else t=t.parentElement}},{key:"setWrapperStyles",value:function(e,t){t.style.cssText=t.style.cssText+"max-width: ".concat(this.maxWidthContainer(e))}},{key:"replaceElementsToRightSlots",value:function(e){var t,n=e.querySelectorAll("*[data-assigned-to]"),r=e.querySelectorAll("*[data-assigning-slot-id]"),o=i(n);try{for(o.s();!(t=o.n()).done;){var a,s=t.value,u=s.getAttribute("data-assigned-to"),c=i(r);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(u===l.getAttribute("data-assigning-slot-id")){l.appendChild(s);break}}}catch(e){c.e(e)}finally{c.f()}}}catch(e){o.e(e)}finally{o.f()}}},{key:"isPromoted",value:function(e){var t=this;if(e){var n=e,r=Array.from(n.querySelectorAll(this.redditConfig.RIGHT_COLUMN.PROMOTED_SELECTOR));if(r.length)return r.some((function(e){var n=e.textContent.trim().toLowerCase();return n?t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0})):e.dataset.beforeContent?(n=e.dataset.beforeContent,t.redditConfig.PROMOTED_ALIASES.some((function(e){return n.indexOf(e)>=0}))):void 0}))}return!1}},{key:"IsPostContentRendered",value:function(e,t){var n=!1;if(e){var r=e.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(r&&0===r.length){var i=y.GetFullElementSize(e);i.w>0&&i.h>0&&y.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,e,i).some((function(e){return e>=t}))&&(n=!0)}e.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(n=!0)}return n}},{key:"lookingTargetUrl",value:function(e){var t="",n=Array.from(e.querySelectorAll('a[target="_blank"]')).filter((function(e){return!(!e||!e.href||e.href.includes("reddit.com/user/"))}));return n.length&&(t=n[0].href),t}},{key:"headCopyWithStyles",get:function(){var e=this,t=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((function(n){for(var r=n.KEY,i=n.ALL_STYLES_FROM,o=n.FEED_PAGE,a=function(){var t=u[s];if(-1===t.nodeName.search(/^(style|link)$/gi))return t.remove(),1;if(t.dataset[r]){var n=i.some((function(e){return t.dataset[r].includes(e)}));n||e.isCommentPage||(n=o.some((function(e){return t.dataset[r].includes(e)}))),n||t.remove()}},s=0,u=Array.from(t.children);s<u.length;s++)a()})),this.neccesaryStyleRules){var n=document.createElement("style");n.innerHTML=this.neccesaryStyleRules,t.appendChild(n)}return this.getStylesByTagName(t),t}},{key:"neccesaryStyleRules",get:function(){var e=null,t=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((function(e){var t,n=new RegExp(e,"gi"),r=document.querySelector("head").outerHTML.match(n);return r&&r.length&&(t=r.join("")),t})).filter((function(e){return e}));return t&&t.length&&(e=t.join("")),e}},{key:"getClassNameForStyles",value:function(e){var t=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((function(n){for(var r=e.querySelector(n.CLASS_NAME_CHILD),i=r&&r.parentElement?r.parentElement:null,o="",a=1;a<n.DEEP_LEVEL;a++)i&&(i=i.parentElement);i&&(o=i.classList[0],t.innerHTML+="."+o+n.STYLES)})),t}},{key:"getStylesByTagName",value:function(e){var t=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((function(t){var n=new RegExp(t.ATTRIBUTE_REGEX_VALUE);return Array.from(e.querySelectorAll(t.TAG_NAME)).filter((function(e){if(e&&e[t.ATTRIBUTE_NAME]&&-1!==e[t.ATTRIBUTE_NAME].search(n))return e;e.remove()}))})).filter((function(e){return e})).forEach((function(e){t=t.concat(e)})),t.forEach((function(t){e.appendChild(t)}))}},{key:"bodyCopyWithStyles",get:function(){var e,t=document.createElement("body"),n=null===(e=document.querySelector("body style"))||void 0===e?void 0:e.cloneNode(!0);return n&&t.appendChild(n),t}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"getRightColumnContainer",get:function(){var e,t=null,n=i(this.redditConfig.RIGHT_COLUMN.QUERIES);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=Array.from(document.querySelectorAll(r));if(o.length){var a=o.filter((function(e){return e.children.length>2}));if(a&&a.length){t=a[0];break}}}}catch(e){n.e(e)}finally{n.f()}return t}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(f);e.exports=E},7788:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2315),s=n(1453),u=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t},(t=[{key:"setAttributes",value:function(e){var t=a.getURL("../executers/".concat(s.REDDIT_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("nonce",""),e.src=t}},{key:"InjectDetector",value:function(){if(document.head){var e=document.createElement("script");this.setAttributes(e),window.addEventListener("DOMContentLoaded",(function t(){document.head.appendChild(e),window.removeEventListener("DOMContentLoaded",t)}))}}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=u},7602:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,n){return t=u(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var l=n(2621),d=n(2315),f=n(1453),h=n(7769),y=n(5837),E=n(3215),A=n(1374),v=(n(7628),function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=a(this,t,[e])).id=e,i.onPageRefreshed=i.onPageUrlChanged,i.twConfig=n.TwitterConfig,i.TwitterDetectorFeed=null,i.TwitterDetectorRightColumn=null,i.VideoTrafficDetector=null,i.AdBlockerAgent=r,i.ActivateVideoTrafficDetector(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),n=t,r=[{key:"onPageUrlChanged",value:function(e,t){var n=this;this.available&&setTimeout((function(){n.DeactivateDetectors(f.AD_DETECTOR_INITIATOR_URL),n.ActivateDetectors()}),50)}},{key:"ActivateVideoTrafficDetector",value:function(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new E(this.id),this.VideoTrafficDetector.InjectDetector())}},{key:"ActivateDetector",value:function(e){e===f.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.TwitterDetectorFeed=new A(this.id,this.twConfig.FEED.DETECTOR_OPTIONS,this.twConfig,this.AdBlockerAgent),this.AddNecessaryMethods(),this.ActivateDetectors()}},{key:"ActivateDetectors",value:function(){this.TwitterDetectorFeed.ActivateDetector()}},{key:"AddNecessaryMethods",value:function(){this.TwitterDetectorFeed.ExtractAd=this.processAndSendTwitterAd.bind(this),this.TwitterDetectorFeed.isVideo=this.isVideo.bind(this),this.TwitterDetectorFeed.HideElement=this.HideElement.bind(this),this.TwitterDetectorFeed.IsAdContentRendered=this.IsAdContentRendered.bind(this),this.TwitterDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.TwitterDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.TwitterDetectorFeed.getAdTwitterObject=this.getAdTwitterObject.bind(this)}},{key:"DeactivateDetectors",value:function(e){this.TwitterDetectorFeed.DeactivateDetector(e)}},{key:"IsAdContentRendered",value:function(e,t){var n=!1;if(e){var r=e.querySelectorAll(this.twConfig.PROGRESS_SELECTOR);if(r&&0===r.length){var i=d.GetFullElementSize(e);i.w>0&&d.GetImagesSpacePercentage(this.twConfig.TAGS_FOR_LOADING_CHECK,e,i).some((function(e){return e>=t}))&&(n=!0)}}return n}},{key:"processAndSendTwitterAd",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:document).querySelector("[".concat(f.ATTRIBUTE_BIS_ID,"=").concat(e,"]"));r&&(y.SendCandidatePlacementsCount(this.id,1,f.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER,null),y.SendAdCandidates(this.id,[t],f.MESSAGE_TYPE_CANDIDATES_DATA_TWITTER,null),l.CONFIG_MARK_AD_CANDIDATES&&l.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&(r.style.cssText+=n?f.STYLES_OUTLINE_VIDEO_AD:f.STYLES_OUTLINE_SUCCESS_DETECT))}}],r&&i(n.prototype,r),o&&i(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(h));e.exports=v},1374:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=l(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var f=n(2315),h=n(1453),y=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t,[e,n,i])).available=!1,o.twConfig=r,o.AdBlockerAgent=i,o.feedObserver=null,o.activated=!1,o.observerNodesListenerInterval=null,o.observerNodesChecksAmount=0,o.lastFeedPostAdsCheckTime=f.GetCurrentTimestampMs(),o.lastFeedWhoToFollowAdsCheckTime=f.GetCurrentTimestampMs(),o.feedContainer=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"isVideo",value:function(e,t){}},{key:"HideElement",value:function(){}},{key:"IsAdContentRendered",value:function(e,t){}},{key:"doesElementExists",value:function(e){}},{key:"setSizesAndIdForAllElements",value:function(e){}},{key:"getAdTwitterObject",value:function(e,t,n){}},{key:"ActualizeDetector",value:function(){return this.feedContainer=this.getFeedContainer,!!this.feedContainer}},{key:"getFeedContainer",get:function(){var e=this.twConfig.FEED.CONTAINER,t=Array.from(document.querySelectorAll(e)).filter((function(e){return e&&e.children.length>2}));return t&&t.length?t[0]:null}},{key:"ActivateMutationObserver",value:function(){var e=this;this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.startIntervalDetectCandidates.bind(this,h.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(function(){e.feedObserver&&(e.feedObserver.disconnect(),e.feedObserver=null,e.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}},{key:"DeactivateMutationObserver",value:function(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}},{key:"Detector",value:function(){this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processAdsFromFeed()}},{key:"processAdsFromFeed",value:function(){this.processFeedAds(),this.processFeedWhoToFollowAds()}},{key:"processFeedAds",value:function(){this.extractOccurrences(h.TWITTER_AD_PLACEMENT_TYPE_FEED)}},{key:"processFeedWhoToFollowAds",value:function(){this.extractOccurrences(h.TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW)}},{key:"allCellsAndMinImgSpace",value:function(e){var t=this,n=[],r=0;return e===h.TWITTER_AD_PLACEMENT_TYPE_FEED?(this.feedContainer&&(n=Array.from(this.feedContainer.children)),r=this.twConfig.FEED.MIN_IMGS_SPACE_PERCENTAGE):e===h.TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW&&(n=Array.from(document.querySelectorAll(this.twConfig.FEED.WHO_TO_FOLLOW_SELECTOR)),r=this.twConfig.FEED.WHO_TO_FOLLOW_MIN_IMGS_SPACE_PERCENTAGE),{allCells:n=n.filter((function(e){return t.isPromoted(e)})),minImgSquarePercentage:r}}},{key:"extractOccurrences",value:function(e){var t=this.allCellsAndMinImgSpace(e),n=t.allCells,r=t.minImgSquarePercentage;if(n.length){var o,a=i(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(!s.hasAttribute(h.ATTRIBUTE_BIS_ID)&&!s.hasAttribute(h.ATTRIBUTE_BIS_SIZE)&&this.IsAdContentRendered(s,r)){var u=f.GenerateAndSetBisIdToTwitterAds(s);this.setSizesAndIdForAllElements(s);var c=void 0,l=this.isVideo(s,this.twConfig.FEED.TAGS_FOR_VIDEO_TWEET_CHECK),d=s.cloneNode(!0),y=this.buildBannerHtml(d,e),E=this.chooseContent(s,y);c=this.getAdTwitterObject(E,e,this.twConfig.COLLECT_ALTERNATIVE_HTML_CONTENT),e===h.TWITTER_AD_PLACEMENT_TYPE_FEED&&(l&&!this.isCarouselCandidate(s)?c.videoData={}:!l&&this.isCarouselCandidate(s)&&this.twConfig.COLLECT_CAROUSEL_DATA&&(c.carouselData={})),this.AdBlockerAgent.IsEnabledForTwitter()&&!this.AdBlockerAgent.IsElementHidden(s)&&(this.HideElement(s),this.AdBlockerAgent.SetHiddenAmount(1)),setTimeout(this.ExtractAd.bind(this,u,c,l),100)}}}catch(e){a.e(e)}finally{a.f()}}}},{key:"chooseContent",value:function(e,t){return this.twConfig.COLLECT_ALTERNATIVE_HTML_CONTENT?t:e.querySelector(this.twConfig.FEED.TWEETS_SELECTOR)?e.querySelector(this.twConfig.FEED.TWEETS_SELECTOR):e}},{key:"buildBannerHtml",value:function(e,t){var n=this.feedContainer;this.setWrapperClass(n),e.style.transform="none",e.style.position="relative";var r=this.headCopyWithStyles,i=document.createElement("html"),o=this.bodyCopyWithStyles,a=document.createElement("div"),s=n.cloneNode();return a.appendChild(s),this.setWrapperStyles(n,a),i.appendChild(r),s.appendChild(e),o.appendChild(a),i.appendChild(o),i}},{key:"setWrapperClass",value:function(e){var t=e.parentElement,n=!1;if(e.style.minHeight="auto",t)for(var r=0;r<50&&!n&&t;r++)if(t.nextSibling&&-1!==t.nextSibling.nodeName.search(/style/i)&&t.previousSibling&&-1!==t.previousSibling.nodeName.search(/style/i)){var i=t.getAttribute("class");e.className+=e.className.length?" "+i:i,n=!0}else t=t.parentElement}},{key:"setWrapperStyles",value:function(e,t){t.style.cssText=t.style.cssText+"max-width: ".concat(this.maxWidthContainer(e))}},{key:"maxWidthContainer",value:function(e){return e?e.offsetWidth+"px":"auto"}},{key:"bodyCopyWithStyles",get:function(){var e=document.createElement("body"),t=Array.from(document.querySelectorAll("body style")).map((function(e){if(e)return e.cloneNode(!0)}));return t&&t.forEach((function(t){e.appendChild(t)})),e}},{key:"headCopyWithStyles",get:function(){var e=document.createElement("head"),t=Array.from(document.querySelectorAll("head style, head meta")).map((function(e){if(e)return e.cloneNode(!0)}));return t&&t.forEach((function(t){e.appendChild(t)})),e}},{key:"isPromoted",value:function(e){var t=this;if(e){var n=Array.from(e.querySelectorAll(this.twConfig.PROMOTED_SELECTOR));if(n.length)return n.some((function(e){var n=e.textContent;return!(!n||"string"!=typeof n)&&t.twConfig.PROMOTED_ALIASES.some((function(e){var t=n.toLowerCase().trim().split(" ");return t.length<6&&t.includes(e.toLowerCase().trim())}))}))}return!1}},{key:"isCarouselCandidate",value:function(e){return!(!e||!e.querySelector(this.twConfig.FEED.CHECK_IF_CAROUSEL_QUERY))}}])&&a(n.prototype,r),o&&a(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(n(2978));e.exports=y},7628:()=>{},3215:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(2315),s=n(1453),u=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t},(t=[{key:"InjectDetector",value:function(){if(document.head){var e=document.createElement("script");this.setAttributes(e),window.addEventListener("DOMContentLoaded",(function t(){document.head.appendChild(e),window.removeEventListener("DOMContentLoaded",t)}))}}},{key:"setAttributes",value:function(e){var t=a.getURL("../executers/".concat(s.TWITTER_FILENAME_TO_INJECT));e.setAttribute("bis_use","true"),e.type="text/javascript",e.setAttribute("charset","utf-8"),e.setAttribute("nonce",""),e.src=t}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=u},2315:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var u=n(1453),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"QuerySelectorAll",value:function(e,t){return document.__proto__.querySelectorAll.call(e,t)}},{key:"QuerySelector",value:function(e,t){return document.__proto__.querySelector.call(e,t)}},{key:"Escape",value:function(e){return e.replace(/\"/g,"&quot;")}},{key:"ToJSON",value:function(e){return"function"==typeof e.toJSON?e.toJSON():JSON.stringify(e)}},{key:"GetBaseHref",value:function(){var t=e.QuerySelector(document,"base");return t&&t.href?t.href:""}},{key:"GetTabIdKey",value:function(e){return"tb_"+e}},{key:"GetMainPageId",value:function(e){return"mp_"+e}},{key:"IsOnChromeRuntime",value:function(){var e=!0;if(chrome){if(chrome.runtime){try{chrome.runtime.getManifest()}catch(t){e=!1}if(e)return chrome.app?void 0!==chrome.app.isInstalled:!!chrome.runtime}else if(chrome.app)return chrome.app?void 0!==chrome.app.isInstalled:!!chrome.runtime}else if(self.navigator.userAgent.toLowerCase().includes("firefox"))return!!chrome.runtime;return!1}},{key:"GetElementSize",value:function(e){var t={x:0,y:0,w:0,h:0};if(e&&e.getBoundingClientRect){var n=e.getBoundingClientRect();t={x:~~(n.left+window.scrollX),y:~~(n.top+window.scrollY),w:~~n.width,h:~~n.height}}return t}},{key:"IsCoordinatesValid",value:function(e){return!!(e&&e.hasOwnProperty("x")&&"number"==typeof e.x&&e.hasOwnProperty("y")&&"number"==typeof e.y)}},{key:"GetFullElementSize",value:function(t,n,r){var i=e.GetElementSize(t);return e.IsCoordinatesValid(r)&&(i.x=i.x+r.x,i.y=i.y+r.y),e.IsCoordinatesValid(n)?(i.abs_x=i.x+n.x,i.abs_y=i.y+n.y):(i.abs_x=i.x,i.abs_y=i.y),i}},{key:"SetFullSizeToElement",value:function(t,n,r){var i={x:0,y:0,w:0,h:0};return e.IsCoordinatesValid(r)&&(i.x=i.x+r.x,i.y=i.y+r.y),t&&t.setAttribute&&(i=e.GetFullElementSize(t,n,r),t.setAttribute("bis_size",e.ToJSON(i))),i}},{key:"GenerateAndSetBisId",value:function(t,n){var r=n+e.GenerateQuickId();return t&&t.setAttribute&&t.setAttribute(u.ATTRIBUTE_BIS_ID,r),r}},{key:"GenerateAndSetBisIdToFrame",value:function(t){return e.GenerateAndSetBisId(t,"fr_")}},{key:"GenerateAndSetBisIdToBanner",value:function(t){return e.GenerateAndSetBisId(t,"bn_")}},{key:"GenerateAndSetBisIdToPinterestAds",value:function(t){return e.GenerateAndSetBisId(t,"pt_")}},{key:"GenerateAndSetBisIdToInstagramAds",value:function(t){return e.GenerateAndSetBisId(t,"ig_")}},{key:"GenerateAndSetBisIdToLinkedinAds",value:function(t){return e.GenerateAndSetBisId(t,"ln_")}},{key:"GenerateAndSetBisIdToFBAds",value:function(t){return e.GenerateAndSetBisId(t,"fb_")}},{key:"GenerateAndSetBisIdToTwitterAds",value:function(t){return e.GenerateAndSetBisId(t,"tw_")}},{key:"GenerateAndSetBisIdToRedditAds",value:function(t){return e.GenerateAndSetBisId(t,"rd_")}},{key:"SetBisDepth",value:function(e,t){e&&e.setAttribute&&e.setAttribute("bis_depth",t)}},{key:"SetBisChainId",value:function(e,t){e&&e.setAttribute&&e.setAttribute("bis_chainid",t)}},{key:"SetBannerId",value:function(e,t){e&&e.setAttribute&&e.setAttribute("bis_bannerid",t)}},{key:"UpdateCandidateStatusBorderColor",value:function(e,t){if(e&&e.style&&e.style.cssText&&t){var n="";t.filteredOut?n=u.STYLES_BORDER_BANNER_FILTERED:t.sentToBackend?n=u.STYLES_BORDER_BANNER_SENT:t.targetUrlExtracted?n=u.STYLES_BORDER_BANNER_URL_EXTRACTED:t.fullContentExtracted&&(n=u.STYLES_BORDER_BANNER_CONTENT_EXTRACTED);var r=e.style.cssText;r.includes(n)||(r=r.replace(/((border|outline): .{3,20} solid 6px !important;)|((border|outline): 6px solid .{3,20} !important;)/,n),e.style.cssText=r)}}},{key:"GetMainDomainFromHost",value:function(e){if(e&&e.split){var t=e.split(".");if(t.length>=2){var n=t[t.length-2],r=t[t.length-1];return t.length>=3&&2===r.length&&3===n.length?"".concat(t[t.length-3],".").concat(n,".").concat(r):n+"."+r}}return null}},{key:"GetMainDomainFromUrl",value:function(t){return e.GetMainDomainFromHost(e.GetHostNameFromUrl(t))}},{key:"GetHostNameFromUrl",value:function(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2]:null}},{key:"IsUrlFromHost",value:function(t,n){return-1!==t.indexOf(e.GetMainDomainFromUrl(n))}},{key:"IsPublisherInBlacklist",value:function(t,n){var r=!1,i=e.GetHostNameFromUrl(t);return n&&n.length&&i&&n.includes(i)&&(r=!0),r}},{key:"GetUrlFromStyleStr",value:function(e){var t=e.replace(/"/g,"'"),n=t.indexOf("http");-1===n&&(n=t.indexOf("//"));var r=t.indexOf("'",n),i="";return n>0&&r>0&&n<r&&(i=t.substr(n,r-n)),i}},{key:"GetCurrentDataTimeStr",value:function(){function e(e){return e<10?"0"+e:""+e}var t=new Date;return"".concat(t.getFullYear(),"-").concat(e(t.getMonth()+1),"-").concat(e(t.getDate())," ").concat(e(t.getHours()),":").concat(e(t.getMinutes()),":").concat(e(t.getSeconds()))}},{key:"GetWindowSize",value:function(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}},{key:"IsIframeHasContentScript",value:function(t){try{if(t&&!e.IsIframeSecure(t)&&"ok"!==t.contentDocument.body.getAttribute("bis_status"))return!1}catch(e){}return!0}},{key:"IsIframeSecure",value:function(e){return!e||0!==e.src.length&&"about:blank"!==e.src&&"about:srcdoc"!==e.src&&0!==e.src.indexOf("javascript:")}},{key:"isValidUrl",value:function(e){return"string"==typeof e&&e.length>0&&(-1!==e.indexOf("http")||-1!==e.indexOf("//"))}},{key:"IsValidBisId",value:function(e){return!!(e.startsWith("mp_")||e.startsWith("bg_")||e.startsWith("fr_"))}},{key:"IsYouTubeUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("youtube.com")}},{key:"IsFacebookUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("facebook.com")}},{key:"IsTwitterUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.search(/twitter|x\.com/)}},{key:"IsRedditUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("reddit.com")}},{key:"IsPinterestUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.search(/pinterest\.(com|ca|at|ch|cl|co\.kr|com\.au|com\.mx|co\.uk|de|dk|es|fr|ie|it|jp|nz|ph|pt|se)/)}},{key:"IsInstagramUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("instagram.com")}},{key:"IsLinkedinUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("linkedin.com")}},{key:"IsTiktokUrl",value:function(t){var n=e.GetHostNameFromUrl(t);return!!n&&-1!==n.indexOf("tiktok.com")}},{key:"GetFullIdStr",value:function(e,t,n){return"ext:".concat(chrome.runtime.id,"-chainId:").concat(e,"-frameId:").concat(t,"-bisId:").concat(n)}},{key:"GetRandomIntInRange",value:function(e,t){return parseInt((Math.random()*(t-e)+e).toFixed(0))}},{key:"GetCurrentTimestamp",value:function(){return Date.now()/1e3|0}},{key:"GetCurrentTimestampMs",value:function(){return Date.now()}},{key:"GenerateQuickId",value:function(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}},{key:"GenerateTicketId",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}},{key:"IsInFilterList",value:function(e,t){var n=!1;if(e)for(var r=0;r<e.length&&!n;r++)-1!==t.indexOf(e[r])&&(n=!0);return n}},{key:"IsChrome",value:function(){return-1!==navigator.userAgent.indexOf("Chrome")}},{key:"IsFirefox",value:function(){return-1!==navigator.userAgent.indexOf("Firefox")}},{key:"IsFBVideoDataValid",value:function(e){var t=!1;if(e)try{"number"==typeof e.detectionTime&&"string"==typeof e.videoId&&"string"==typeof e.videoUrl&&e.videoId.length&&e.videoUrl.length&&(t=!0)}catch(e){}return t}},{key:"GetDefaultAdblockerStatus",value:function(){var e={};return e[u.ADBLOCKER_FOR_DISPLAY]=u.ADBLOCKER_STATUS_DISABLED,e[u.ADBLOCKER_FOR_FACEBOOK]=u.ADBLOCKER_STATUS_DISABLED,e[u.ADBLOCKER_FOR_TWITTER]=u.ADBLOCKER_STATUS_DISABLED,e[u.ADBLOCKER_FOR_REDDIT]=u.ADBLOCKER_STATUS_DISABLED,e[u.ADBLOCKER_FOR_PINTEREST]=u.ADBLOCKER_STATUS_DISABLED,e[u.ADBLOCKER_FOR_INSTAGRAM]=u.ADBLOCKER_STATUS_DISABLED,e[u.ADBLOCKER_FOR_LINKEDIN]=u.ADBLOCKER_STATUS_DISABLED,e[u.USE_LOCAL_CONFIG]=u.ADBLOCKER_STATUS_DISABLED,e}},{key:"GetImagesSpacePercentage",value:function(t,n,r){var o=[];if(!n)return o;var a=r.w*r.h,s=[],u=Array.from(n.querySelectorAll("*")).map((function(e){return e.shadowRoot?e.shadowRoot.querySelectorAll(t):"IMG"===e.nodeName||"IFRAME"===e.nodeName?e:e.querySelectorAll(t)})).filter((function(e){return e})).reduce((function(e,t){return t&&t.length&&t.forEach((function(t){e.includes(t)||e.push(t)})),"IMG"!==t.nodeName&&"IFRAME"!==t.nodeName||e.push(t),e}),[]);if(null==u||!u.length||0===a)return o;var c,l=i(u);try{for(l.s();!(c=l.n()).done;){var d=c.value;d&&d.shadowRoot&&(d=d.shadowRoot.firstElementChild.querySelector(t));var f=e.GetElementSize(d);s.push(f.w*f.h/a*100)}}catch(e){l.e(e)}finally{l.f()}return s}},{key:"CheckDocumentReadyState",value:function(e){return document.readyState===e}},{key:"getURL",value:function(e){return chrome.runtime.getURL(e)}},{key:"getDataFromStorageLocal",value:function(e){return chrome.storage.local.get([e]).then((function(t){return t[e]?t[e]:t}))}},{key:"getDataFromStorageSync",value:function(e){return new Promise((function(t,n){try{chrome.storage.sync.get([e]).then((function(n){n[e]?t(n[e]):t(n)}))}catch(e){n(e)}}))}},{key:"GetCookie",value:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}},{key:"GetOriginFromHref",value:function(e){e&&e.search(/^http/)}},{key:"GetLocaleDateString",value:function(){try{return(new Date).toJSON().replace("T",", ")}catch(e){return(new Date).toTimeString()}}},{key:"GetAllCookies",value:function(){return document.cookie}}],(n=null)&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();e.exports=c},1453:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(1645),s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"DOCUMENT_READYSTATE_LOADING",get:function(){return"loading"}},{key:"DOCUMENT_READYSTATE_INTERACTIVE",get:function(){return"interactive"}},{key:"DOCUMENT_READYSTATE_COMPLETE",get:function(){return"complete"}},{key:"ATTRIBUTE_BIS_ID",get:function(){return"bis_id"}},{key:"ATTRIBUTE_BIS_SIZE",get:function(){return"bis_size"}},{key:"ATTRIBUTE_BIS_STYLE",get:function(){return"bis_style"}},{key:"ATTRIBUTE_BIS_STATUS",get:function(){return"bis_status"}},{key:"ATTRIBUTE_BIS_LABEL",get:function(){return"bis_label"}},{key:"ATTRIBUTE_BIS_ELEMENT_ID",get:function(){return"bis_element_id"}},{key:"ATTRIBUTE_BIS_HIDE_HEIGHT",get:function(){return"bis_hide_height"}},{key:"ATTRIBUTE_BIS_HIDE_WIDTH",get:function(){return"bis_hide_width"}},{key:"ATTRIBUTE_BIS_HIDE_STATUS",get:function(){return"bis_hide_status"}},{key:"ATTRIBUTE_BIS_HIDE_LEFT_OFFSET",get:function(){return"bis_hide_left_offset"}},{key:"ACTIVATION_BY_ADS_MANAGER",get:function(){return"ACTIVATION_BY_ADS_MANAGER"}},{key:"ACTIVATION_BY_ADS_SELF",get:function(){return"ACTIVATION_BY_ADS_SELF"}},{key:"MESSAGE_ID",get:function(){return"PANELOS_MESSAGE"}},{key:"MESSAGE_TYPE_TEST",get:function(){return"TEST"}},{key:"MESSAGE_TYPE_IFRAME_CONTENT",get:function(){return"IFRAME_CONTENT"}},{key:"MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME",get:function(){return"GET_HEADER_INFO_FOR_BLOCKED_IFRAME"}},{key:"MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE",get:function(){return"GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE"}},{key:"MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT",get:function(){return"IFRAME_INVALID_CHAIN_SEGMENT_CONTENT"}},{key:"MESSAGE_TYPE_TAB_INITIALIZATION",get:function(){return"TAB_INITIALIZATION"}},{key:"MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION",get:function(){return"TAB_SINGLE_PAGE_REINITIALIZATION"}},{key:"MESSAGE_TYPE_TAB_URL_CHANGED",get:function(){return"TAB_URL_CHANGED"}},{key:"MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED",get:function(){return"TAB_ADBLOCKER_STATUS_CHANGED"}},{key:"MESSAGE_TYPE_IFRAME_INITIALIZATION",get:function(){return"IFRAME_INITIALIZATION"}},{key:"MESSAGE_TYPE_IFRAME_INITIALIZATION_RESPONSE",get:function(){return"IFRAME_INITIALIZATION_RESPONSE"}},{key:"MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS",get:function(){return"IFRAME_CONTENT_INFO_DETECTED_INPUTS"}},{key:"MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS",get:function(){return"IFRAME_CONTENT_INFO_DETECTED_REDIRECTS"}},{key:"MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT",get:function(){return"HIDDEN_AD_CANDIDATES_AMOUNT"}},{key:"MESSAGE_TYPE_GET_WINDOW_TARGET_URL",get:function(){return"GET_WINDOW_TARGET_URL"}},{key:"MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND",get:function(){return"GET_WINDOW_TARGET_URL_RESPOND"}},{key:"MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL",get:function(){return"GET_WINDOW_CLICK_TARGET_URL"}},{key:"MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND",get:function(){return"GET_WINDOW_CLICK_TARGET_URL_RESPOND"}},{key:"MESSAGE_TYPE_GET_FRAME_CONTENT",get:function(){return"GET_FRAME_CONTENT"}},{key:"MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK",get:function(){return"TARGET_URL_DETECTION_BY_CLICK"}},{key:"MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET",get:function(){return"NEW_PAGE_CREATED_TICKET"}},{key:"MESSAGE_TYPE_PANEL_REGULATOR_RESULT",get:function(){return"PANEL_REGULATOR_RESULT"}},{key:"MESSAGE_TYPE_OUT_TICKET",get:function(){return"OUT_TICKET"}},{key:"MESSAGE_TYPE_CHAIN_ACTIVATION",get:function(){return"CHAIN_ACTIVATION"}},{key:"MESSAGE_TYPE_HEADER_INFO_TO_STORAGE",get:function(){return"HEADER_INFO_TO_STORAGE"}},{key:"MESSAGE_TYPE_LINKEDIN_FRAME_CONTENT_TO_STORAGE",get:function(){return"LINKEDIN_FRAME_CONTENT_TO_STORAGE"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_SKINADS",get:function(){return"CANDIDATES_DATA_SKINADS"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_BANNERS",get:function(){return"CANDIDATES_DATA_BANNERS"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK",get:function(){return"CANDIDATES_DATA_FACEBOOK"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_TWITTER",get:function(){return"CANDIDATES_DATA_TWITTER"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_REDDIT",get:function(){return"CANDIDATES_DATA_REDDIT"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST",get:function(){return"CANDIDATES_DATA_PINTEREST"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM",get:function(){return"CANDIDATES_DATA_INSTAGRAM"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_LINKEDIN",get:function(){return"CANDIDATES_DATA_LINKEDIN"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK",get:function(){return"CANDIDATE_PLACEMENTS_FACEBOOK"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER",get:function(){return"CANDIDATE_PLACEMENTS_TWITTER"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT",get:function(){return"CANDIDATE_PLACEMENTS_REDDIT"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_PINTEREST",get:function(){return"CANDIDATE_PLACEMENTS_PINTEREST"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5",get:function(){return"CANDIDATE_PLACEMENTS_HTML5"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TIKTOK",get:function(){return"CANDIDATE_PLACEMENTS_TIKTOK"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM",get:function(){return"CANDIDATE_PLACEMENTS_INSTAGRAM"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_LINKEDIN",get:function(){return"CANDIDATE_PLACEMENTS_LINKEDIN"}},{key:"MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES",get:function(){return"HTML5_CANDIDATES_EXTRACTION_STATUSES"}},{key:"MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES",get:function(){return"BANNER_CANDIDATES_EXTRACTION_STATUSES"}},{key:"MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES",get:function(){return"SKIN_AD_CANDIDATES_EXTRACTION_STATUSES"}},{key:"MESSAGE_TYPE_VIDEO_XHR_CANDIDATE",get:function(){return"VIDEO_XHR_CANDIDATE"}},{key:"MESSAGE_TYPE_VIDEO_HAR",get:function(){return"VIDEO_HAR"}},{key:"MESSAGE_TYPE_FACEBOOK_VIDEO_DATA",get:function(){return"FACEBOOK_VIDEO_DATA"}},{key:"MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA",get:function(){return"FACEBOOK_INSTREAM_DATA"}},{key:"MESSAGE_TYPE_FACEBOOK_MARKETPLACE_VIDEO_DATA",get:function(){return"FACEBOOK_MARKETPLACE_VIDEO_DATA"}},{key:"MESSAGE_TYPE_PINTEREST_VIDEO_DATA",get:function(){return"PINTEREST_VIDEO_DATA"}},{key:"MESSAGE_TYPE_TWITTER_VIDEO_DATA",get:function(){return"TWITTER_VIDEO_DATA"}},{key:"MESSAGE_TYPE_TWITTER_CAROUSEL_DATA",get:function(){return"TWITTER_CAROUSEL_DATA"}},{key:"MESSAGE_TYPE_REDDIT_VIDEO_DATA",get:function(){return"REDDIT_VIDEO_DATA"}},{key:"MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA",get:function(){return"REDDIT_RIGHT_COLUMN_DATA"}},{key:"MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA",get:function(){return"INSTAGRAM_VIDEO_DATA"}},{key:"MESSAGE_TYPE_INSTAGRAM_STORY_DATA",get:function(){return"INSTAGRAM_STORY_DATA"}},{key:"MESSAGE_TYPE_INSTAGRAM_FULL_TEXT_DATA",get:function(){return"INSTAGRAM_FULL_TEXT_DATA"}},{key:"MESSAGE_TYPE_INSTAGRAM_CAROUSEL_SLIDES_SOURCES",get:function(){return"INSTAGRAM_CAROUSEL_SLIDES_SOURCES"}},{key:"MESSAGE_TYPE_LINKEDIN_VIDEO_DATA",get:function(){return"LINKEDIN_VIDEO_DATA"}},{key:"MESSAGE_TYPE_LINKEDIN_SLIDES_DATA",get:function(){return"LINKEDIN_SLIDES_DATA"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANALYTICS_ID",get:function(){return"GET_PANALYTICS_ID"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANELOS_VERSION",get:function(){return"GET_PANELOS_VERSION"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_STATUS",get:function(){return"GET_ADBLOCKER_STATUS"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_COUNTERS",get:function(){return"GET_ADBLOCKER_COUNTERS"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_ADBLOCKER",get:function(){return"ENABLE_ADBLOCKER"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_ADBLOCKER",get:function(){return"DISABLE_ADBLOCKER"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_DATA_COLLECTION_STATUS",get:function(){return"GET_DATA_COLLECTION_STATUS"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_DATA_COLLECTION",get:function(){return"ENABLE_DATA_COLLECTION"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_DATA_COLLECTION",get:function(){return"DISABLE_DATA_COLLECTION"}},{key:"MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT",get:function(){return"ADBLOCK_INSPECTOR_AGENT_REPORT"}},{key:"MESSAGE_TYPE_GET_EXCLUDE_LIST",get:function(){return"GET_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_ADD_INTO_EXCLUDE_LIST",get:function(){return"ADD_INTO_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_REMOVE_FROM_EXCLUDE_LIST",get:function(){return"REMOVE_FROM_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST",get:function(){return"ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST",get:function(){return"ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_GET_CURRENT_DOMAIN",get:function(){return"GET_CURRENT_DOMAIN"}},{key:"MESSAGE_TYPE_GET_CURRENT_PAGE_URL",get:function(){return"GET_CURRENT_PAGE_URL"}},{key:"MESSAGE_TYPE_USE_LOCAL_CONFIG",get:function(){return"USE_LOCAL_CONFIG"}},{key:"MESSAGE_TYPE_GET_LOCAL_CONFIG_STATUS",get:function(){return"GET_LOCAL_CONFIG_STATUS"}},{key:"ADBLOCKER_STATUS_ENABLED",get:function(){return"enabled"}},{key:"ADBLOCKER_STATUS_DISABLED",get:function(){return"disabled"}},{key:"VIDEO_TRAFFIC_SOURCE_HTML",get:function(){return"HTML"}},{key:"VIDEO_TRAFFIC_SOURCE_JS",get:function(){return"JS"}},{key:"VIDEO_TRAFFIC_SOURCE_XHR",get:function(){return"XHR"}},{key:"VIDEO_TRAFFIC_MEDIA_TYPE_HTML",get:function(){return"HTML"}},{key:"VIDEO_TRAFFIC_FACEBOOK_MEDIA_TYPE_JSON",get:function(){return"JSON"}},{key:"VIDEO_TRAFFIC_FACEBOOK_MEDIA_ALIAS_JSON",get:function(){return"JSON_FB"}},{key:"VIDEO_TRAFFIC_ALIAS_YT_JSON_NEXTPAGE",get:function(){return"YT_JSON_NEXTPAGE"}},{key:"VIDEO_TRAFFIC_ALIAS_YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE",get:function(){return"YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE"}},{key:"VIDEO_TRAFFIC_FILENAME_TO_INJECT",get:function(){return"vi-tr.js"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_FEED",get:function(){return"feed"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH",get:function(){return"feedWatch"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE",get:function(){return"marketplace"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN",get:function(){return"rightColumn"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_STORIES",get:function(){return"stories"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_VIDEO_PAGE",get:function(){return"videoPage"}},{key:"FACEBOOK_AD_VIDEO_URL_REPLACE_NAME",get:function(){return"[ADVERTISER_NAME]"}},{key:"FACEBOOK_AD_VIDEO_URL_REPLACE_VIDEO_ID",get:function(){return"[VIDEO_ID]"}},{key:"FACEBOOK_FILENAME_TO_INJECT",get:function(){return"vi-oo-tr.js"}},{key:"TWITTER_AD_PLACEMENT_TYPE_FEED",get:function(){return"feedPost"}},{key:"TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW",get:function(){return"feedWhoToFollow"}},{key:"TWITTER_AD_PLACEMENT_TYPE_RIGHT_COLUMN_WHO_TO_FOLLOW",get:function(){return"rightColumnWhoToFollow"}},{key:"TWITTER_FILENAME_TO_INJECT",get:function(){return"vi-tt-tr.js"}},{key:"REDDIT_AD_PLACEMENT_TYPE_FEED",get:function(){return"feed"}},{key:"REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE",get:function(){return"commentPage"}},{key:"REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN",get:function(){return"rightColumn"}},{key:"REDDIT_FILENAME_TO_INJECT",get:function(){return"vi-rd-tr.js"}},{key:"LINKEDIN_AD_PLACEMENT_TYPE_FEED",get:function(){return"feed"}},{key:"LINKEDIN_AD_PLACEMENT_TYPE_RIGHT_COLUMN",get:function(){return"rightColumn"}},{key:"PINTEREST_AD_PLACEMENT_TYPE_FEED",get:function(){return"feed"}},{key:"PINTEREST_AD_PLACEMENT_TYPE_SEARCH",get:function(){return"searchPage"}},{key:"PINTEREST_AD_PLACEMENT_TYPE_PIN",get:function(){return"pinPage"}},{key:"PINTEREST_FILENAME_TO_INJECT",get:function(){return"vi-pn-tr.js"}},{key:"INSTAGRAM_FILENAME_TO_INJECT",get:function(){return"vi-ig-tr.js"}},{key:"LINKEDIN_FILENAME_TO_INJECT",get:function(){return"vi-ln-tr.js"}},{key:"PINTEREST_LOADER_TYPE_PIN_PAGE",get:function(){return"pinPage"}},{key:"PINTEREST_LOADER_TYPE_USER_INFO",get:function(){return"userInfo"}},{key:"INSTAGRAM_AD_PLACEMENT_TYPE_FEED",get:function(){return"feed"}},{key:"INSTAGRAM_AD_PLACEMENT_TYPE_STORY",get:function(){return"story"}},{key:"KNOWN_CSS_NAMES",get:function(){return["align-content","align-items","align-self","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","block-size","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start-color","border-block-start-style","border-block-start-width","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-adjust","color-interpolation","color-interpolation-filters","column-count","column-fill","column-gap","column-rule-color","column-rule-style","column-rule-width","column-width","contain","content","counter-increment","counter-reset","counter-set","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","fill","fill-opacity","fill-rule","filter","flex-basis","flex-direction","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column-end","grid-column-start","grid-row-end","grid-row-start","grid-template-areas","grid-template-columns","grid-template-rows","height","hyphens","image-orientation","image-rendering","ime-mode","inline-size","inset-block-end","inset-block-start","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style-image","list-style-position","list-style-type","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marker-end","marker-mid","marker-start","mask","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-position-x","mask-position-y","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","object-fit","object-position","opacity","order","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-inline","overflow-wrap","overflow-x","overflow-y","overscroll-behavior-x","overscroll-behavior-y","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","paint-order","perspective","perspective-origin","pointer-events","position","quotes","r","resize","right","row-gap","ruby-align","ruby-position","rx","ry","scroll-behavior","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","scrollbar-color","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","table-layout","text-align","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","top","touch-action","transform","transform-box","transform-origin","transform-style","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vector-effect","vertical-align","visibility","white-space","width","will-change","word-break","word-spacing","writing-mode","x","y","z-index","-moz-appearance","-moz-box-align","-moz-box-direction","-moz-box-flex","-moz-box-ordinal-group","-moz-box-orient","-moz-box-pack","-moz-float-edge","-moz-force-broken-image-icon","-moz-image-region","-moz-orient","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-stack-sizing","-moz-tab-size","-moz-text-size-adjust","-moz-user-focus","-moz-user-input","-moz-user-modify","-moz-window-dragging","-webkit-line-clamp","-webkit-text-fill-color","-webkit-text-stroke-color","-webkit-text-stroke-width","offset-distance","offset-path","offset-rotate","orphans","speak","tab-size","text-underline-position","text-size-adjust","widows","zoom","-webkit-appearance","-webkit-border-horizontal-spacing","-webkit-border-image","-webkit-border-vertical-spacing","-webkit-box-align","-webkit-box-decoration-break","-webkit-box-direction","-webkit-box-flex","-webkit-box-ordinal-group","-webkit-box-orient","-webkit-box-pack","-webkit-box-reflect","column-span","backdrop-filter","-webkit-font-smoothing","-webkit-highlight","-webkit-hyphenate-character","-webkit-line-break","-webkit-locale","-webkit-margin-before-collapse","-webkit-margin-after-collapse","-webkit-mask-box-image","-webkit-mask-box-image-outset","-webkit-mask-box-image-repeat","-webkit-mask-box-image-slice","-webkit-mask-box-image-source","-webkit-mask-box-image-width","-webkit-mask-clip","-webkit-mask-composite","-webkit-mask-image","-webkit-mask-origin","-webkit-mask-position","-webkit-mask-repeat","-webkit-mask-size","-webkit-print-color-adjust","-webkit-rtl-ordering","-webkit-tap-highlight-color","-webkit-text-combine","-webkit-text-decorations-in-effect","-webkit-text-emphasis-color","-webkit-text-emphasis-position","-webkit-text-emphasis-style","-webkit-text-orientation","-webkit-text-security","-webkit-user-drag","-webkit-user-modify","-webkit-writing-mode","-webkit-app-region","buffered-rendering","color-rendering","alignment-baseline","baseline-shift","d"]}},{key:"FACEBOOK_DESIGN_VERSION_OLD",get:function(){return 1}},{key:"FACEBOOK_DESIGN_VERSION_NEW",get:function(){return 2}},{key:"OUT_TICKET_TYPE_SINGLE",get:function(){return"SINGLE"}},{key:"OUT_TICKET_TYPE_MULTI",get:function(){return"MULTI"}},{key:"ADBLOCKER_FOR_DISPLAY",get:function(){return"DISPLAY"}},{key:"ADBLOCKER_FOR_FACEBOOK",get:function(){return"FACEBOOK"}},{key:"ADBLOCKER_FOR_TWITTER",get:function(){return"TWITTER"}},{key:"ADBLOCKER_FOR_REDDIT",get:function(){return"REDDIT"}},{key:"ADBLOCKER_FOR_PINTEREST",get:function(){return"PINTEREST"}},{key:"ADBLOCKER_FOR_INSTAGRAM",get:function(){return"INSTAGRAM"}},{key:"ADBLOCKER_FOR_LINKEDIN",get:function(){return"LINKEDIN"}},{key:"USE_LOCAL_CONFIG",get:function(){return"CONFIG"}},{key:"AD_DETECTOR_INITIATOR_TIMER",get:function(){return"timer"}},{key:"AD_DETECTOR_INITIATOR_MUTATION",get:function(){return"mutation"}},{key:"AD_DETECTOR_INITIATOR_PAGECHANGE",get:function(){return"pagechange"}},{key:"AD_DETECTOR_INITIATOR_ACTIVATION",get:function(){return"activation"}},{key:"AD_DETECTOR_INITIATOR_URL",get:function(){return"url"}},{key:"AD_DETECTOR_INITIATOR_SCROLL_EVENT",get:function(){return"scroll"}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_NONE",get:function(){return 0}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_INITED",get:function(){return 1}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_STARTED",get:function(){return 2}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_STARTED",get:function(){return 3}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_FINISHED",get:function(){return 4}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_FINISHED",get:function(){return 5}},{key:"IFRAMES_TRAFFIC_FILENAME_TO_INJECT",get:function(){return"fr-co.js"}},{key:"CANDIDATE_PROCESS_STATUS_DETECTED",get:function(){return 1}},{key:"CANDIDATE_PROCESS_STATUS_START_PROCESSING",get:function(){return 2}},{key:"CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED",get:function(){return 3}},{key:"CANDIDATE_PROCESS_STATUS_PREBUILD_INFO_SENT",get:function(){return 4}},{key:"TICKET_BUILDING_STATUS_INIT",get:function(){return 0}},{key:"TICKET_BUILDING_STATUS_STARTED",get:function(){return 1}},{key:"TICKET_BUILDING_STATUS_GETTING_WEBNAVIGATION_IFRAMES",get:function(){return 2}},{key:"TICKET_BUILDING_STATUS_GOT_WEBNAVIGATION_IFRAMES",get:function(){return 3}},{key:"TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_ACTIVE",get:function(){return 4}},{key:"TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_DONE",get:function(){return 5}},{key:"TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_ACTIVE",get:function(){return 6}},{key:"TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_DONE",get:function(){return 7}},{key:"TICKET_BUILDING_STATUS_DONE",get:function(){return 8}},{key:"TICKET_ALIAS_PANALYTICSID",get:function(){return a.decode("cGFuZWxpc3RJZA==")}},{key:"TICKET_ALIAS_PINSTANCEID",get:function(){return a.decode("cGFuZWxJZA==")}},{key:"MAX_OUT_TICKETS_QUEUE_LENGTH",get:function(){return 20}},{key:"EXCLUDE_DOMAINS_LIST",value:function(){return"EXCLUDE_DOMAINS_LIST"}},{key:"EXCLUDE_PAGES_LIST",value:function(){return"EXCLUDE_PAGES_LIST"}},{key:"STYLES_BORDER_BANNER_CONTENT_EXTRACTED",get:function(){return"border: 6px solid blue !important;"}},{key:"STYLES_BORDER_BANNER_URL_EXTRACTED",get:function(){return"border: 6px solid blueviolet !important;"}},{key:"STYLES_BORDER_BANNER_FILTERED",get:function(){return"border: 6px solid orange !important;"}},{key:"STYLES_BORDER_BANNER_SENT",get:function(){return"border: 6px solid green !important;"}},{key:"STYLES_OUTLINE_SUCCESS_DETECT",get:function(){return"outline: green solid 6px !important;"}},{key:"STYLES_OUTLINE_VIDEO_AD",get:function(){return"outline: rgba(42, 213, 255, 1) solid 6px !important;"}},{key:"STYLES_OUTLINE_TEXT_AD",get:function(){return"outline: rgba(243, 143, 20, 1) solid 6px !important;"}},{key:"STYLES_CONSOLE_LOGS_INFO",get:function(){return"background-color: rgba(108, 101, 224, 0.2); color: rgba(58, 191, 224, 1)"}},{key:"STYLES_CONSOLE_LOGS_ERROR",get:function(){return"background-color: rgba(241, 0, 43, 0.4); color: rgba(58, 191, 224, 1)"}},{key:"STYLES_HIDE_INSTAGRAM_FEED_AD",get:function(){return["position: absolute !important; height: 0px !important; margin: 0px !important; padding: 0px !important; overflow: hidden !important;","height: 0px !important; visibility: hidden !important;"]}},{key:"STYLES_HIDE_ELEMENT",get:function(){return"left: -10000px !important; position: absolute !important; height: 0;"}}],(t=null)&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=s},5883:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(1453),s=n(2315),u=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"EmptyMessage",get:function(){return{posdMessageId:a.MESSAGE_ID,posdHash:s.GenerateQuickId(),from:"",to:"",multiTo:[],type:"",content:""}}},{key:"IsValid",value:function(e){try{if(void 0!==e&&void 0!==e.posdMessageId&&void 0!==e.type&&void 0!==e.content)return e.posdMessageId===a.MESSAGE_ID}catch(e){throw e}return!1}},{key:"IsStrictValid",value:function(e){try{if(void 0!==e&&void 0!==e.posdMessageId&&void 0!==e.from&&void 0!==e.to&&void 0!==e.type&&void 0!==e.content)return e.posdMessageId===a.MESSAGE_ID}catch(e){throw e}return!1}}],(t=null)&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=u},8076:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var a=n(1453),s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"getStylesByElementsBisId",value:function(e){var t=this,n={};return this.addStylesForNode(e,n),e.querySelectorAll("*").forEach((function(e){t.addStylesForNode(e,n)})),n}},{key:"addStylesForNode",value:function(e,t){var n=this.getStyles(e);t[e.getAttribute(a.ATTRIBUTE_BIS_ELEMENT_ID)]=n}},{key:"getStyles",value:function(e){var t=window.getComputedStyle(e,null);return this.minimiseComputedStyles(t)}},{key:"minimiseComputedStyles",value:function(e){for(var t={},n=0;n<e.length;n++){var r=e.item(n),i=e.getPropertyValue(r);t[i]||(t[i]=[]);var o=a.KNOWN_CSS_NAMES.indexOf(r);o>=0?t[i].push(o):t[i].push(r)}return t}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();e.exports=s},1645:e=>{var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){if(TextEncoder&&atob&&btoa)return t.bytesToBase64((new TextEncoder).encode(e));var n,r,i,o,a,s,u,c="",l=0;for(e=t._utf8_encode(e);l<e.length;)o=(n=e.charCodeAt(l++))>>2,a=(3&n)<<4|(r=e.charCodeAt(l++))>>4,s=(15&r)<<2|(i=e.charCodeAt(l++))>>6,u=63&i,isNaN(r)?s=u=64:isNaN(i)&&(u=64),c=c+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(s)+this._keyStr.charAt(u);return c},decode:function(e){if("{"===e[0])return e;if(TextEncoder&&atob&&btoa)return(new TextDecoder).decode(t.base64ToBytes(e));var n,r,i,o,a,s,u="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)n=this._keyStr.indexOf(e.charAt(c++))<<2|(o=this._keyStr.indexOf(e.charAt(c++)))>>4,r=(15&o)<<4|(a=this._keyStr.indexOf(e.charAt(c++)))>>2,i=(3&a)<<6|(s=this._keyStr.indexOf(e.charAt(c++))),u+=String.fromCharCode(n),64!=a&&(u+=String.fromCharCode(r)),64!=s&&(u+=String.fromCharCode(i));return u=t._utf8_decode(u)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t="",n=0,r=0,i=0,o=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&i),n+=2):(i=e.charCodeAt(n+1),o=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o),n+=3);return t},base64ToBytes:function(e){var t=atob(e);return Uint8Array.from(t,(function(e){return e.codePointAt(0)}))},bytesToBase64:function(e){var t=Array.from(e,(function(e){return String.fromCodePoint(e)})).join("");return btoa(t)}};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(4241);var e=n(1453),t=n(6118),r=n(6875),i=n(2315);if(self===top)(new t).Init();else if(i.CheckDocumentReadyState(e.DOCUMENT_READYSTATE_LOADING))document.addEventListener("DOMContentLoaded",(function(){(new r).Init()}));else if(i.CheckDocumentReadyState(e.DOCUMENT_READYSTATE_INTERACTIVE)||i.CheckDocumentReadyState(e.DOCUMENT_READYSTATE_COMPLETE)){(new r).Init()}})()})();